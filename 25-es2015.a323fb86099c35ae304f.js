(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+cLM":function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var s=e("2QJI"),n=e("l+bK"),a=e("uq+3"),h=function(t){return t[t.DaYun=0]="DaYun",t[t.LiuNian=1]="LiuNian",t[t.XiaoYun=2]="XiaoYun",t}({});let u=(()=>{class t{constructor(i,e,s,n){this.Start=i,this.GZ=e,this.birthYear=s,this.type=n,this.type===h.DaYun&&(this.end=new Date(this.Start.getTime()+t.tenyear))}get Old(){return this.Start.getFullYear()-this.birthYear}get End(){return this.end}set End(t){this.end=t||this.end}get Year(){return this.Start.getFullYear()}}return t.oneday=864e5,t.oneyear=365.25*t.oneday,t.tenyear=10*t.oneyear,t})();class r{constructor(t,i){this.Birthday=t,this.Gender=i,this.bazi=n.b.calcBazi(this.Birthday.getFullYear(),this.Birthday.getMonth()+1,this.Birthday.getDate(),this.Birthday.getHours(),this.Birthday.getMinutes()),this.bazi.Y.Base=this.bazi.D,this.bazi.M.Base=this.bazi.D,this.bazi.D.Base=this.bazi.D,this.bazi.T.Base=this.bazi.D,this.initShenSha(),this.initDaYun()}get Y(){return this.bazi.Y}get M(){return this.bazi.M}get D(){return this.bazi.D}get T(){return this.bazi.T}get All(){return[this.bazi.Y,this.bazi.M,this.bazi.D,this.bazi.T]}get Direction(){return("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)}get MingGong(){if(this.minggong)return this.minggong;var t=this.M.Zhi.Index+1+this.T.Zhi.Index+1,i=t<14?14-t:26-t;return new s.b([(this.Y.Gan.QiYueGan+((i-=1)-2+12)%12)%10,i])}get TaiYuan(){return new s.b([(this.M.Gan.Index+1)%10,(this.M.Zhi.Index+3)%12])}get WuXings(){if(this.wuxings)return this.wuxings;let t=[0,0,0,0,0];return t[this.Y.Gan.WuXing.Index]+=1,t[this.M.Gan.WuXing.Index]+=1,t[this.D.Gan.WuXing.Index]+=1,t[this.T.Gan.WuXing.Index]+=1,t[this.Y.Zhi.WuXing.Index]+=1,t[this.M.Zhi.WuXing.Index]+=1,t[this.D.Zhi.WuXing.Index]+=1,t[this.T.Zhi.WuXing.Index]+=1,this.wuxings=[{Name:"\u91d1",Num:t[0]},{Name:"\u6c34",Num:t[1]},{Name:"\u6728",Num:t[2]},{Name:"\u706b",Num:t[3]},{Name:"\u571f",Num:t[4]}],this.wuxings}get ShenSha(){return this.shenshas}get DaYun(){return this.dayun}CalcShenSha(t){let i=new Array;for(let e of this.ShenSha)1==e.Is(t)&&i.push(e.Name);return i.join("\u3001")}CalcLiuNian(t,i){let e=new Array;for(var a=t-1984;a<0;)a+=60;a%=60;let r=this.T.Index+(t-this.Birthday.getFullYear()+1)*this.Direction;r=(r+600)%60;for(let o=t;o<=i;o++){let t=new s.b(a);t.Base=this.D,t.ShenSha=this.CalcShenSha(t);let i=new s.b(r);i.Base=this.D,i.ShenSha=this.CalcShenSha(i);let c=n.b.getSolarTerms(o,2)[0],l=new u(c,t,this.Birthday.getFullYear(),h.LiuNian);l.GZ2=i,e.push(l),a+=1,a%=60,r+=1*this.Direction,r=(r+60)%60}return e}equal(t){return this.Gender==t.Gender&&this.Birthday.toString()==t.Birthday.toString()}initShenSha(){this.shenshas=new Array;let t=this.Y.Index,i=this.M.Index,e=this.D.Index,s=this.T.Index;this.shenshas.push(new a.a("\u5c06\u661f",[e])),this.shenshas.push(new a.a("\u7f8a\u5203",[e])),this.shenshas.push(new a.a("\u7984\u795e",[e])),this.shenshas.push(new a.a("\u534e\u76d6",[e])),this.shenshas.push(new a.a("\u6587\u660c",[e])),this.shenshas.push(new a.a("\u5b66\u5802",[e])),this.shenshas.push(new a.a("\u5929\u559c",[i])),this.shenshas.push(new a.a("\u5929\u533b",[i])),this.shenshas.push(new a.a("\u8d35\u4eba",[e])),this.shenshas.push(new a.a("\u9a7f\u9a6c",[t,e])),this.shenshas.push(new a.a("\u6843\u82b1",[t,e])),this.shenshas.push(new a.a("\u707e\u715e",[t,e])),this.shenshas.push(new a.a("\u52ab\u715e",[t,e])),this.shenshas.push(new a.a("\u65ec\u7a7a",[e])),this.shenshas.push(new a.a("\u9b41\u7f61",[t,i,e,s])),this.shenshas.push(new a.a("\u56db\u5e9f",[t,i,e,s])),this.shenshas.push(new a.a("\u5b64\u8fb0\u5be1\u5bbf",[t,i,e,s])),this.shenshas.push(new a.a("\u9634\u5dee\u9633\u9519",[e]));let n=new a.a("\u5929\u7f57\u5730\u7f51",[t,i,e,s]);n.Gender=this.Gender,this.shenshas.push(n)}initDaYun(){this.dayun=new Array;const t=this.qiDaYun(),i=this.Direction,e=(t.getFullYear(),this.Birthday.getFullYear(),new u(this.Birthday,this.M,this.Birthday.getFullYear(),h.DaYun));e.End=t,this.dayun.push(e);for(let n=0;n<10;n++){const e=new s.b((this.M.Index+(n+1)*i+60)%60);e.Base=this.bazi.D;const a=new Date(t.getTime()+315576e6*n),r=new u(a,e,this.Birthday.getFullYear(),h.DaYun);this.dayun.push(r)}}qiDaYun(){var t=n.b.findNextJieQi(this.Birthday,("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)),i=Math.abs(t.getTime()-this.Birthday.getTime())/6e4*2;return new Date(this.Birthday.getTime()+36e5*i)}}},"06W+":function(t,i,e){"use strict";e.r(i);var s=e("ofXK"),n=e("3Pt+"),a=e("tyNb"),h=e("c7TG"),u=e("mrSG"),r=e("gTpY"),o=e("ylIl"),c=e("LTmD"),l=(e("0eVs"),e("fXoL"));function b(t,i){if(1&t&&l.Xb(0,"app-baziview",10),2&t){const t=l.jc();l.oc("Config",t.Config)("BaziText",t.Bazi)}}function g(t,i){if(1&t&&(l.Zb(0,"ion-item",11),l.Xb(1,"app-guaview",12),l.Yb()),2&t){const t=l.jc();l.Mb(1),l.oc("Config",t.Config)("GuaText",t.Gua)}}function d(t,i){if(1&t&&l.Xb(0,"ion-img",13),2&t){const t=l.jc();l.oc("src",t.Img)}}let f=(()=>{class t{constructor(t,i,e,s){this.settings=t,this.alertController=i,this.route=e,this.location=s,this.smallSymbol=!1,this.Bazi=null,this.Gua=null}ngOnInit(){return Object(u.b)(this,void 0,void 0,(function*(){yield this.settings.WaitInit(),this.guaconfig=Object(c.b)(this.settings.Gua),this.baziconfig=Object(c.b)(this.settings.Bazi),this.route.params.subscribe(t=>{const i=JSON.parse(t.arg);i&&void 0!==i.ben?this.Gua=i:i&&void 0!==i.male?this.Bazi=i:i&&void 0!==i.img&&(this.Img=atob(i.img),console.log("arg",this.Img))})}))}get Config(){return this.HasGua?this.guaconfig:this.HasBazi?this.baziconfig:null}get HasGua(){return!!this.Gua}get HasBazi(){return!!this.Bazi}ChangSymbol(){!1===this.smallSymbol?(this.guaconfig.shensha=4,this.guaconfig.symbol=1,this.baziconfig.shensha=4):(this.guaconfig=Object(c.b)(this.settings.Gua),this.baziconfig=Object(c.b)(this.settings.Bazi)),this.smallSymbol=!this.smallSymbol,this.guaview&&this.guaview.Reflash(this.guaconfig),this.baziview&&this.baziview.Reflash(this.baziconfig)}GoBack(){this.location.back()}Setting(){return Object(u.b)(this,void 0,void 0,(function*(){const t=this.settings.ForumSetting;let i=!1;const e=yield this.alertController.create({header:"\u663e\u793a\u504f\u597d",inputs:[{name:"showimg",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u56fe\u7247",value:1,checked:t.showimg},{name:"vip",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u5366\u4f8b",value:2,checked:t.showgua},{name:"huahe",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u547d\u4f8b",value:3,checked:t.showbazi},{name:"bbs",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u56fe\u7247",value:4,checked:!t.imgOut},{name:"liuyao",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u5366\u4f8b",value:5,checked:!t.guaOut},{name:"bazi",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u547d\u4f8b",value:6,checked:!t.baziOut}],buttons:[{text:"\u786e\u5b9a",handler:()=>{i=!0}},{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:()=>{}}]});yield e.present();const{data:s}=yield e.onWillDismiss();if(!i)return;const n={showimg:s.values.includes(1),showgua:s.values.includes(2),showbazi:s.values.includes(3),imgOut:!s.values.includes(4),guaOut:!s.values.includes(5),baziOut:!s.values.includes(6)};this.settings.ForumSetting=n,this.presentAlert("\u66f4\u6539\u663e\u793a\u504f\u597d",null,"\u60a8\u7684\u663e\u793a\u504f\u597d\u5df2\u66f4\u6539\uff0c\u8bf7\u8fd4\u56de\u8bba\u575b\u9996\u9875\u5e76\u5237\u65b0\uff0c\u4f7f\u504f\u597d\u751f\u6548\u3002")}))}presentAlert(t,i,e){return Object(u.b)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({header:t||"\u9519\u8bef",subHeader:i||"",message:e,buttons:["\u786e\u5b9a"]});yield s.present()}))}}return t.\u0275fac=function(i){return new(i||t)(l.Wb(c.a),l.Wb(h.b),l.Wb(a.a),l.Wb(s.f))},t.\u0275cmp=l.Qb({type:t,selectors:[["app-panfuviewer"]],viewQuery:function(t,i){var e;1&t&&(l.Ac(r.a,!0),l.Ac(o.a,!0)),2&t&&(l.qc(e=l.ic())&&(i.baziview=e.first),l.qc(e=l.ic())&&(i.guaview=e.first))},decls:23,vars:3,consts:[["color","primary"],["slot","start"],["defaulthref","","text","\u8fd4\u56de"],["slot","end"],[3,"click"],["name","md-options"],[3,"Config","BaziText",4,"ngIf"],["lines","none",4,"ngIf"],[3,"src",4,"ngIf"],["name","settings"],[3,"Config","BaziText"],["lines","none"],[3,"Config","GuaText"],[3,"src"]],template:function(t,i){1&t&&(l.Zb(0,"ion-header"),l.Zb(1,"ion-toolbar",0),l.Zb(2,"ion-buttons",1),l.Xb(3,"ion-back-button",2),l.Yb(),l.Zb(4,"ion-title"),l.xc(5,"\u76d8\u7b26"),l.Yb(),l.Zb(6,"ion-buttons",3),l.Zb(7,"ion-button",4),l.hc("click",(function(){return i.ChangSymbol()})),l.Xb(8,"ion-icon",5),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Zb(9,"ion-content"),l.wc(10,b,1,2,"app-baziview",6),l.wc(11,g,2,2,"ion-item",7),l.wc(12,d,1,1,"ion-img",8),l.Yb(),l.Zb(13,"ion-footer"),l.Zb(14,"ion-toolbar"),l.Zb(15,"ion-buttons",1),l.Zb(16,"ion-button",4),l.hc("click",(function(){return i.Setting()})),l.Xb(17,"ion-icon",9),l.Zb(18,"ion-text"),l.xc(19,"\u8bbe\u7f6e"),l.Yb(),l.Yb(),l.Yb(),l.Zb(20,"ion-buttons",3),l.Zb(21,"ion-button",4),l.hc("click",(function(){return i.GoBack()})),l.xc(22,"\u8fd4\u56de"),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&t&&(l.Mb(10),l.oc("ngIf",i.HasBazi),l.Mb(1),l.oc("ngIf",i.HasGua),l.Mb(1),l.oc("ngIf",i.Img))},directives:[h.s,h.Y,h.k,h.g,h.h,h.W,h.j,h.t,h.o,s.j,h.q,h.T,r.a,h.w,o.a,h.u],styles:[""]}),t})();var m=e("uEAi"),w=e("n7QD");e.d(i,"PanfuviewerPageModule",(function(){return y}));const p=[{path:"",component:f}];let y=(()=>{class t{}return t.\u0275mod=l.Ub({type:t}),t.\u0275inj=l.Tb({factory:function(i){return new(i||t)},imports:[[m.a,w.a,s.b,n.a,h.Z,a.i.forChild(p)]]}),t})()}}]);