(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+veT":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return i}));var c=n("dSyh"),o=n("kBU6");const i=e=>new Promise((t,n)=>{Object(c.m)(()=>{s(e),r(e).then(n=>{n.animation&&n.animation.destroy(),l(e),t(n)},t=>{l(e),n(t)})})}),s=e=>{const t=e.enteringEl,n=e.leavingEl;N(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),y(t,!1),n&&y(n,!1)},r=async e=>{const t=await d(e);return t?a(t,e):u(e)},l=e=>{const t=e.leavingEl;e.enteringEl.classList.remove("ion-page-invisible"),void 0!==t&&t.classList.remove("ion-page-invisible")},d=async e=>{if(e.leavingEl&&e.animated&&0!==e.duration)return e.animationBuilder?e.animationBuilder:"ios"===e.mode?(await n.e(117).then(n.bind(null,"Lu00"))).iosTransitionAnimation:(await n.e(118).then(n.bind(null,"wxTh"))).mdTransitionAnimation},a=async(e,t)=>{let c;await h(t,!0);try{const o=await n.e(14).then(n.bind(null,"gHMO"));c=await o.create(e,t.baseEl,t)}catch(i){c=e(t.baseEl,t)}f(t.enteringEl,t.leavingEl);const o=await b(c,t);return t.progressCallback&&t.progressCallback(void 0),o&&m(t.enteringEl,t.leavingEl),{hasCompleted:o,animation:c}},u=async e=>{const t=e.enteringEl,n=e.leavingEl;return await h(e,!1),f(t,n),m(t,n),{hasCompleted:!0}},h=async(e,t)=>{const n=(void 0!==e.deepWait?e.deepWait:t)?[v(e.enteringEl),v(e.leavingEl)]:[S(e.enteringEl),S(e.leavingEl)];await Promise.all(n),await g(e.viewIsReady,e.enteringEl)},g=async(e,t)=>{e&&await e(t)},b=(e,t)=>{const n=t.progressCallback,c=new Promise(t=>{e.onFinish(n=>{"number"==typeof n?t(1===n):void 0!==e.hasCompleted&&t(e.hasCompleted)})});return n?(e.progressStart(!0),n(e)):e.play(),c},f=(e,t)=>{p(t,o.c),p(e,o.a)},m=(e,t)=>{p(e,o.b),p(t,o.d)},p=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},S=e=>e&&e.componentOnReady?e.componentOnReady():Promise.resolve(),v=async e=>{const t=e;if(t){if(null!=t.componentOnReady&&null!=await t.componentOnReady())return;await Promise.all(Array.from(t.children).map(v))}},y=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},N=(e,t,n)=>{void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},w=e=>e.classList.contains("ion-page")?e:e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||e},"9UMr":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n("ofXK"),o=n("3Pt+"),i=n("c7TG"),s=(n("SRjL"),n("fXoL"));let r=(()=>{class e{}return e.\u0275mod=s.Wb({type:e}),e.\u0275inj=s.Vb({factory:function(t){return new(t||e)},imports:[[c.b,o.c,i.X]]}),e})()},B8lH:function(e,t,n){"use strict";var c=n("c7TG"),o=(n("0eVs"),n("LTmD")),i=n("fXoL"),s=n("ofXK"),r=n("3Pt+");function l(e,t){if(1&e){const e=i.ec();i.dc(0,"ion-item"),i.dc(1,"ion-label"),i.Jc(2,"\u6b64\u8bbe\u7f6e\u5e94\u7528\u5230\u5168\u5c40"),i.cc(),i.dc(3,"ion-checkbox",10),i.lc("ngModelChange",(function(t){return i.Cc(e),i.oc().Global=t})),i.cc(),i.cc()}if(2&e){const e=i.oc();i.Nb(3),i.vc("ngModel",e.Global)}}let d=(()=>{class e{constructor(e){this.settingService=e,this.OnlyGlobal=!1,this.ShowCommon=!0,this.ShowYuanju=!0,this.ShowShiyun=!0}ngOnInit(){this.Settings=Object(o.b)(this.settingService.Bazi)}GetChange(){return this.Global&&(this.settingService.Bazi=Object(o.b)(this.Settings)),this.Settings}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(o.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-bazisettings"]],inputs:{Global:"Global",OnlyGlobal:"OnlyGlobal"},decls:52,vars:16,consts:[[4,"ngIf"],["color","light"],["size","small","fill","clear","slot","end",3,"click"],[3,"name"],[3,"hidden"],["min","10","max","20","color","secondary","slot","end",3,"ngModel","ngModelChange"],["slot","start"],["slot","end"],["min","3","max","8","color","secondary","slot","end",3,"ngModel","ngModelChange"],[2,"margin-right","10px",3,"hidden"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.Hc(0,l,4,1,"ion-item",0),i.dc(1,"ion-item",1),i.dc(2,"ion-label"),i.Jc(3,"\u901a\u7528\u8bbe\u7f6e"),i.cc(),i.dc(4,"ion-button",2),i.lc("click",(function(){return t.ShowCommon=!t.ShowCommon})),i.Zb(5,"ion-icon",3),i.cc(),i.cc(),i.dc(6,"ion-list",4),i.dc(7,"ion-item"),i.dc(8,"ion-label"),i.Jc(9,"\u5b57\u4f53\u5927\u5c0f"),i.cc(),i.dc(10,"ion-text"),i.Jc(11),i.cc(),i.dc(12,"ion-range",5),i.lc("ngModelChange",(function(e){return t.Settings.fontsize=e})),i.dc(13,"ion-label",6),i.Jc(14,"10"),i.cc(),i.dc(15,"ion-label",7),i.Jc(16,"20"),i.cc(),i.cc(),i.cc(),i.dc(17,"ion-item"),i.dc(18,"ion-label"),i.Jc(19,"\u795e\u715e\u5217\u6570"),i.cc(),i.dc(20,"ion-text"),i.Jc(21),i.cc(),i.dc(22,"ion-range",8),i.lc("ngModelChange",(function(e){return t.Settings.shensha=e})),i.dc(23,"ion-label",6),i.Jc(24,"3"),i.cc(),i.dc(25,"ion-label",7),i.Jc(26,"8"),i.cc(),i.cc(),i.cc(),i.dc(27,"ion-item"),i.dc(28,"ion-label"),i.dc(29,"ion-text",9),i.Jc(30,"\u7b80\u6392"),i.cc(),i.dc(31,"ion-text",9),i.Jc(32,"\u5168\u6392"),i.cc(),i.cc(),i.dc(33,"ion-toggle",10),i.lc("ngModelChange",(function(e){return t.Settings.shortname=e})),i.cc(),i.cc(),i.dc(34,"ion-item"),i.dc(35,"ion-label"),i.dc(36,"ion-text",9),i.Jc(37,"\u6c34\u571f\u5171\u957f\u751f"),i.cc(),i.dc(38,"ion-text",9),i.Jc(39,"\u706b\u571f\u5171\u957f\u751f"),i.cc(),i.dc(40,"ion-text"),i.Jc(41,"(\u5168\u5c40\u8bbe\u5b9a)"),i.cc(),i.cc(),i.dc(42,"ion-toggle",10),i.lc("ngModelChange",(function(e){return t.Settings.shuitu=e})),i.cc(),i.cc(),i.dc(43,"ion-item"),i.dc(44,"ion-label"),i.dc(45,"ion-text",9),i.Jc(46,"\u534e\u9e64\u5341\u795e"),i.cc(),i.dc(47,"ion-text",9),i.Jc(48,"\u4f20\u7edf\u5341\u795e"),i.cc(),i.dc(49,"ion-text"),i.Jc(50,"(\u5168\u5c40\u8bbe\u5b9a)"),i.cc(),i.cc(),i.dc(51,"ion-toggle",10),i.lc("ngModelChange",(function(e){return t.Settings.huahecai=e})),i.cc(),i.cc(),i.cc()),2&e&&(i.vc("ngIf",!t.OnlyGlobal),i.Nb(5),i.vc("name",t.ShowCommon?"arrow-dropdown":"arrow-dropleft"),i.Nb(1),i.vc("hidden",!t.ShowCommon),i.Nb(5),i.Kc(t.Settings.fontsize),i.Nb(1),i.vc("ngModel",t.Settings.fontsize),i.Nb(9),i.Kc(t.Settings.shensha),i.Nb(1),i.vc("ngModel",t.Settings.shensha),i.Nb(7),i.vc("hidden",!t.Settings.shortname),i.Nb(2),i.vc("hidden",t.Settings.shortname),i.Nb(2),i.vc("ngModel",t.Settings.shortname),i.Nb(3),i.vc("hidden",!t.Settings.shuitu),i.Nb(2),i.vc("hidden",t.Settings.shuitu),i.Nb(4),i.vc("ngModel",t.Settings.shuitu),i.Nb(3),i.vc("hidden",!t.Settings.huahecai),i.Nb(2),i.vc("hidden",t.Settings.huahecai),i.Nb(4),i.vc("ngModel",t.Settings.huahecai))},directives:[s.j,c.w,c.C,c.h,c.t,c.D,c.S,c.H,c.fb,r.f,r.g,c.V,c.c,c.j],styles:[".alignleft[_ngcontent-%COMP%]{float:left;margin-left:10px}.alignright[_ngcontent-%COMP%]{float:right;margin-right:10px}"]}),e})();function a(e,t){if(1&e){const e=i.ec();i.dc(0,"ion-item"),i.dc(1,"ion-label"),i.Jc(2,"\u6b64\u8bbe\u7f6e\u5e94\u7528\u5230\u5168\u5c40"),i.cc(),i.dc(3,"ion-checkbox",6),i.lc("ngModelChange",(function(t){return i.Cc(e),i.oc().Global=t})),i.cc(),i.cc()}if(2&e){const e=i.oc();i.Nb(3),i.vc("ngModel",e.Global)}}let u=(()=>{class e{constructor(e){this.settingService=e,this.OnlyGlobal=!1}ngOnInit(){this.Settings=Object(o.b)(this.settingService.Gua)}get OriginSymbol(){return 1!==this.Settings.symbol}set OriginSymbol(e){this.Settings.symbol=e?0:1}GetChange(){return this.Global&&(this.settingService.Gua=Object(o.b)(this.Settings)),this.Settings}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(o.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-guasettings"]],inputs:{Global:"Global",OnlyGlobal:"OnlyGlobal"},decls:36,vars:11,consts:[[4,"ngIf"],["min","10","max","20","color","secondary","slot","end",3,"ngModel","ngModelChange"],["slot","start"],["slot","end"],["min","3","max","8","color","secondary","slot","end",3,"ngModel","ngModelChange"],[2,"margin-right","10px",3,"hidden"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.dc(0,"ion-list"),i.Hc(1,a,4,1,"ion-item",0),i.dc(2,"ion-item"),i.dc(3,"ion-label"),i.Jc(4,"\u5b57\u4f53\u5927\u5c0f"),i.cc(),i.dc(5,"ion-text"),i.Jc(6),i.cc(),i.dc(7,"ion-range",1),i.lc("ngModelChange",(function(e){return t.Settings.fontsize=e})),i.dc(8,"ion-label",2),i.Jc(9,"10"),i.cc(),i.dc(10,"ion-label",3),i.Jc(11,"20"),i.cc(),i.cc(),i.cc(),i.dc(12,"ion-item"),i.dc(13,"ion-label"),i.Jc(14,"\u795e\u715e\u5217\u6570"),i.cc(),i.dc(15,"ion-text"),i.Jc(16),i.cc(),i.dc(17,"ion-range",4),i.lc("ngModelChange",(function(e){return t.Settings.shensha=e})),i.dc(18,"ion-label",2),i.Jc(19,"3"),i.cc(),i.dc(20,"ion-label",3),i.Jc(21,"8"),i.cc(),i.cc(),i.cc(),i.dc(22,"ion-item"),i.dc(23,"ion-label"),i.dc(24,"ion-text",5),i.Jc(25,"\u7b26\u53f7\uff1a \u25fc\ufe0e\u25fb\ufe0e\u25fc\ufe0e\u3001\u25fc\ufe0e\u25fc\ufe0e\u25fc\ufe0e"),i.cc(),i.dc(26,"ion-text",5),i.Jc(27,"\u7b26\u53f7\uff1a=\u3001-"),i.cc(),i.cc(),i.dc(28,"ion-toggle",6),i.lc("ngModelChange",(function(e){return t.OriginSymbol=e})),i.cc(),i.cc(),i.dc(29,"ion-item"),i.dc(30,"ion-label"),i.dc(31,"ion-text",5),i.Jc(32,"\u7b80\u6392"),i.cc(),i.dc(33,"ion-text",5),i.Jc(34,"\u5168\u6392"),i.cc(),i.cc(),i.dc(35,"ion-toggle",6),i.lc("ngModelChange",(function(e){return t.Settings.shortname=e})),i.cc(),i.cc(),i.cc()),2&e&&(i.Nb(1),i.vc("ngIf",!t.OnlyGlobal),i.Nb(5),i.Kc(t.Settings.fontsize),i.Nb(1),i.vc("ngModel",t.Settings.fontsize),i.Nb(9),i.Kc(t.Settings.shensha),i.Nb(1),i.vc("ngModel",t.Settings.shensha),i.Nb(7),i.vc("hidden",!t.OriginSymbol),i.Nb(2),i.vc("hidden",t.OriginSymbol),i.Nb(2),i.vc("ngModel",t.OriginSymbol),i.Nb(3),i.vc("hidden",!t.Settings.shortname),i.Nb(2),i.vc("hidden",t.Settings.shortname),i.Nb(2),i.vc("ngModel",t.Settings.shortname))},directives:[c.D,s.j,c.w,c.C,c.S,c.H,c.fb,r.f,r.g,c.V,c.c,c.j],styles:[""]}),e})();function h(e,t){if(1&e&&i.Zb(0,"app-bazisettings",8),2&e){const e=i.oc();i.vc("Global",e.Global)("OnlyGlobal",e.OnlyGlobal)}}function g(e,t){if(1&e&&i.Zb(0,"app-guasettings",8),2&e){const e=i.oc();i.vc("Global",e.Global)("OnlyGlobal",e.OnlyGlobal)}}n.d(t,"a",(function(){return b}));let b=(()=>{class e{constructor(e,t){this.modalCtrl=e,this.setting=t,this.OnlyGlobal=!1}ngOnInit(){switch(this.settingComponent){case"bazi":this.Titel="\u516b\u5b57\u547d\u76d8\u8bbe\u7f6e";break;case"gua":this.Titel="\u516d\u723b\u5366\u76d8\u8bbe\u7f6e"}}ngAfterViewInit(){}set SettingComponent(e){this.settingComponent=e}get SettingComponent(){return this.settingComponent}onSave(){const e=(this.baziSettingView||this.guaSettingView).GetChange();this.close(e)}onCancel(){this.close(null)}close(e){this.modalCtrl.dismiss({result:e=e||{}})}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(c.ab),i.Yb(o.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-settingdialog"]],viewQuery:function(e,t){var n;1&e&&(i.Oc(d,!0),i.Oc(u,!0)),2&e&&(i.yc(n=i.mc())&&(t.baziSettingView=n.first),i.yc(n=i.mc())&&(t.guaSettingView=n.first))},inputs:{Config:"Config",SettingComponent:"SettingComponent"},decls:17,vars:3,consts:[["color","secondary"],["slot","start"],[3,"click"],["name","close-circle"],["slot","end"],["name","save"],["scrollY","true"],[3,"Global","OnlyGlobal",4,"ngIf"],[3,"Global","OnlyGlobal"]],template:function(e,t){1&e&&(i.dc(0,"ion-header"),i.dc(1,"ion-toolbar",0),i.dc(2,"ion-buttons",1),i.dc(3,"ion-button",2),i.lc("click",(function(){return t.onCancel()})),i.Zb(4,"ion-icon",3),i.dc(5,"ion-text"),i.Jc(6,"\u53d6\u6d88"),i.cc(),i.cc(),i.cc(),i.dc(7,"ion-title"),i.Jc(8),i.cc(),i.dc(9,"ion-buttons",4),i.dc(10,"ion-button",2),i.lc("click",(function(){return t.onSave()})),i.Zb(11,"ion-icon",5),i.dc(12,"ion-text"),i.Jc(13,"\u786e\u5b9a"),i.cc(),i.cc(),i.cc(),i.cc(),i.cc(),i.dc(14,"ion-content",6),i.Hc(15,h,1,2,"app-bazisettings",7),i.Hc(16,g,1,2,"app-guasettings",7),i.cc()),2&e&&(i.Nb(8),i.Kc(t.Titel),i.Nb(7),i.vc("ngIf","bazi"==t.SettingComponent),i.Nb(1),i.vc("ngIf","gua"==t.SettingComponent))},directives:[c.s,c.W,c.i,c.h,c.t,c.S,c.U,c.m,s.j,d,u],styles:[""]}),e})()},Dl6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return r}));const c=(e,t)=>null!==t.closest(e),o=e=>"string"==typeof e&&e.length>0?{"ion-color":!0,[`ion-color-${e}`]:!0}:void 0,i=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(e=>null!=e).map(e=>e.trim()).filter(e=>""!==e):[])(e).forEach(e=>t[e]=!0),t},s=/^[a-z][a-z0-9+\-.]*:/,r=async(e,t,n)=>{if(null!=e&&"#"!==e[0]&&!s.test(e)){const c=document.querySelector("ion-router");if(c)return null!=t&&t.preventDefault(),c.push(e,n)}return!1}},Gfuc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n("ofXK"),o=n("3Pt+"),i=n("c7TG"),s=(n("LvB5"),n("fXoL"));let r=(()=>{class e{}return e.\u0275mod=s.Wb({type:e}),e.\u0275inj=s.Vb({factory:function(t){return new(t||e)},imports:[[c.b,o.c,i.X]]}),e})()},KPWP:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n("ofXK"),o=n("3Pt+"),i=n("c7TG"),s=(n("B8lH"),n("fXoL"));let r=(()=>{class e{}return e.\u0275mod=s.Wb({type:e}),e.\u0275inj=s.Vb({factory:function(t){return new(t||e)},imports:[[c.b,o.c,i.X]]}),e})()},YtD4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));const c=e=>{try{if("string"!=typeof e||""===e)return e;const t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,r.forEach(e=>{const n=t.querySelectorAll(e);for(let c=n.length-1;c>=0;c--){const e=n[c];e.parentNode?e.parentNode.removeChild(e):t.removeChild(e);const s=i(e);for(let t=0;t<s.length;t++)o(s[t])}});const c=i(t);for(let e=0;e<c.length;e++)o(c[e]);const s=document.createElement("div");s.appendChild(t);const l=s.querySelector("div");return null!==l?l.innerHTML:s.innerHTML}catch(t){return console.error(t),""}},o=e=>{if(e.nodeType&&1!==e.nodeType)return;for(let n=e.attributes.length-1;n>=0;n--){const t=e.attributes.item(n),c=t.name;if(!s.includes(c.toLowerCase())){e.removeAttribute(c);continue}const o=t.value;null!=o&&o.toLowerCase().includes("javascript:")&&e.removeAttribute(c)}const t=i(e);for(let n=0;n<t.length;n++)o(t[n])},i=e=>null!=e.children?e.children:e.childNodes,s=["class","id","href","src","name","slot"],r=["script","style","iframe","meta","link","object","embed"]},m9yc:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));const c=async(e,t,n,c,o)=>{if(e)return e.attachViewToDom(t,n,o,c);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const i="string"==typeof n?t.ownerDocument&&t.ownerDocument.createElement(n):n;return c&&c.forEach(e=>i.classList.add(e)),o&&Object.assign(i,o),t.appendChild(i),i.componentOnReady&&await i.componentOnReady(),i},o=(e,t)=>{if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},mo90:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("HULg"),o=n("xPBH"),i=n("c7TG"),s=n("fXoL"),r=n("ofXK"),l=n("vBXD");function d(e,t){if(1&e&&(s.dc(0,"ion-item"),s.dc(1,"ion-text"),s.Jc(2,"\u539f\u76ee\u5f55\uff1a"),s.cc(),s.dc(3,"ion-text",5),s.Jc(4),s.cc(),s.cc()),2&e){const e=s.oc();s.Nb(4),s.Kc(e.From)}}let a=(()=>{class e{constructor(e,t){this.dbservice=e,this.modalCtrl=t,this.NodeID="",this.SelectDocument=!1,this.SelectedNode=null,this.To="\u6839\u76ee\u5f55",this.From=""}ngOnInit(){this.dbservice.getNodes().then(e=>{this.Nodes=this.buildNodeTree(e,null),this.From=this.NodeID?o.a.getNodePath(null,this.NodeID,this.Nodes).join("/"):""})}onclose(e){var t;let n={};e&&(n={nodeid:(null===(t=this.SelectedNode)||void 0===t?void 0:t.ID)||"root"}),this.modalCtrl.dismiss(n)}onNodeSelecte(e){this.SelectDocument&&!e.IsFile||!this.SelectDocument&&e.IsFile||e.ID!==this.NodeID&&(e.Sub.select(e=>e.ID).includes(this.NodeID)||(this.SelectedNode&&(this.SelectedNode.IsSelected=!1),e!==this.SelectedNode&&e&&(this.SelectedNode=e,this.SelectedNode.IsSelected=!0,this.To=o.a.getNodePath(null,this.SelectedNode.ID,this.Nodes).join("/"))))}restore(){this.To="\u6839\u76ee\u5f55",this.SelectedNode&&(this.SelectedNode.IsSelected=!1,this.SelectedNode=null)}buildNodeTree(e,t){let n=[];return(t||"").IsNullOrEmpty(),t=null!=t?t:"",n=e.where(e=>(e.parent||"")===t).sortByKey("created").select(e=>{const t=new o.a(e.type,e.name,e.id);return t.ID=e.id||null,t.ShowButton=!1,t}),n.forEach(t=>{t.Sub=this.buildNodeTree(e,t.ID)}),n}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(c.a),s.Yb(i.ab))},e.\u0275cmp=s.Sb({type:e,selectors:[["app-picknode"]],inputs:{Titel:"Titel",NodeID:"NodeID",SelectDocument:"SelectDocument"},decls:21,vars:4,consts:[["color","secondary"],["slot","start"],[3,"click"],["slot","end"],[4,"ngIf"],["color","medium"],["slot","end",3,"click"],["name","md-backspace"],[3,"nodes","nodeSelected"]],template:function(e,t){1&e&&(s.dc(0,"ion-header"),s.dc(1,"ion-toolbar",0),s.dc(2,"ion-buttons",1),s.dc(3,"ion-button",2),s.lc("click",(function(){return t.onclose(!1)})),s.Jc(4," \u53d6\u6d88 "),s.cc(),s.cc(),s.dc(5,"ion-title"),s.Jc(6),s.cc(),s.dc(7,"ion-buttons",3),s.dc(8,"ion-button",2),s.lc("click",(function(){return t.onclose(!0)})),s.Jc(9," \u786e\u5b9a "),s.cc(),s.cc(),s.cc(),s.cc(),s.dc(10,"ion-content"),s.dc(11,"ion-list"),s.Hc(12,d,5,1,"ion-item",4),s.dc(13,"ion-item"),s.dc(14,"ion-text"),s.Jc(15,"\u76ee\u6807\u76ee\u5f55\uff1a"),s.cc(),s.dc(16,"ion-text",5),s.Jc(17),s.cc(),s.dc(18,"ion-button",6),s.lc("click",(function(){return t.restore()})),s.Zb(19,"ion-icon",7),s.cc(),s.cc(),s.dc(20,"app-tree-node",8),s.lc("nodeSelected",(function(e){return t.onNodeSelecte(e)})),s.cc(),s.cc(),s.cc()),2&e&&(s.Nb(6),s.Kc(t.Titel),s.Nb(6),s.vc("ngIf",""!==t.From),s.Nb(5),s.Kc(t.To),s.Nb(3),s.vc("nodes",t.Nodes))},directives:[i.s,i.W,i.i,i.h,i.U,i.m,i.D,r.j,i.w,i.S,i.t,l.a],styles:[""]}),e})()},"nN+u":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));const c=(e,t,n)=>{const c=new MutationObserver(e=>{n(o(e,t))});return c.observe(e,{childList:!0,subtree:!0}),c},o=(e,t)=>{let n;return e.forEach(e=>{for(let c=0;c<e.addedNodes.length;c++)n=i(e.addedNodes[c],t)||n}),n},i=(e,t)=>{if(1===e.nodeType)return(e.tagName===t.toUpperCase()?[e]:Array.from(e.querySelectorAll(t))).find(e=>!0===e.checked)}},opz7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));const c=()=>{const e=window.TapticEngine;e&&e.selection()},o=()=>{const e=window.TapticEngine;e&&e.gestureSelectionStart()},i=()=>{const e=window.TapticEngine;e&&e.gestureSelectionChanged()},s=()=>{const e=window.TapticEngine;e&&e.gestureSelectionEnd()}},qaSm:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));class c{constructor(e,t){this.x=e,this.y=t}}const o=(e,t,n,c,o)=>{const r=s(e.y,t.y,n.y,c.y,o);return i(e.x,t.x,n.x,c.x,r[0])},i=(e,t,n,c,o)=>o*(3*t*Math.pow(o-1,2)+o*(-3*n*o+3*n+c*o))-e*Math.pow(o-1,3),s=(e,t,n,c,o)=>r((c-=o)-3*(n-=o)+3*(t-=o)-(e-=o),3*n-6*t+3*e,3*t-3*e,e).filter(e=>e>=0&&e<=1),r=(e,t,n,c)=>{if(0===e)return((e,t,n)=>{const c=t*t-4*e*n;return c<0?[]:[(-t+Math.sqrt(c))/(2*e),(-t-Math.sqrt(c))/(2*e)]})(t,n,c);const o=(3*(n/=e)-(t/=e)*t)/3,i=(2*t*t*t-9*t*n+27*(c/=e))/27;if(0===o)return[Math.pow(-i,1/3)];if(0===i)return[Math.sqrt(-o),-Math.sqrt(-o)];const s=Math.pow(i/2,2)+Math.pow(o/3,3);if(0===s)return[Math.pow(i/2,.5)-t/3];if(s>0)return[Math.pow(-i/2+Math.sqrt(s),1/3)-Math.pow(i/2+Math.sqrt(s),1/3)-t/3];const r=Math.sqrt(Math.pow(-o/3,3)),l=Math.acos(-i/(2*Math.sqrt(Math.pow(-o/3,3)))),d=2*Math.pow(r,1/3);return[d*Math.cos(l/3)-t/3,d*Math.cos((l+2*Math.PI)/3)-t/3,d*Math.cos((l+4*Math.PI)/3)-t/3]}},vBXD:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c=n("mrSG"),o=n("fXoL"),i=(n("xPBH"),n("ofXK")),s=n("c7TG");function r(e,t){if(1&e){const e=o.ec();o.dc(0,"ion-icon",9),o.lc("click",(function(){o.Cc(e);const t=o.oc().$implicit;return t.IsExpanded=!t.IsExpanded})),o.cc()}if(2&e){const e=o.oc().$implicit;o.vc("color",e.IsExpanded?"primary":"dark")("name",e.IsExpanded?"arrow-dropup":"arrow-dropdown")}}function l(e,t){if(1&e){const e=o.ec();o.dc(0,"ion-icon",10),o.lc("click",(function(){o.Cc(e);const t=o.oc().$implicit;return t.IsExpanded=!t.IsExpanded})),o.cc()}if(2&e){const e=o.oc().$implicit;o.vc("name",e.Icon)}}function d(e,t){if(1&e){const e=o.ec();o.dc(0,"app-tree-node",11),o.lc("nodeOpen",(function(t){return o.Cc(e),o.oc(2).onSubNodeOpen(t)}))("nodeSelected",(function(t){return o.Cc(e),o.oc(2).onSubNodeSelecte(t)}))("nodeAdd",(function(t){return o.Cc(e),o.oc(2).onSubNodeAdd(t)})),o.cc()}if(2&e){const e=o.oc().$implicit;o.vc("nodes",e.Sub)("hidden",!e.IsExpanded)}}const a=function(e){return{active:e}};function u(e,t){if(1&e){const e=o.ec();o.dc(0,"div",1),o.dc(1,"ion-item",2),o.lc("click",(function(){o.Cc(e);const n=t.$implicit;return o.oc().clickNode(n)})),o.dc(2,"ion-label"),o.Hc(3,r,1,2,"ion-icon",3),o.Hc(4,l,1,1,"ion-icon",4),o.dc(5,"ion-text",5),o.lc("click",(function(){const e=t.$implicit;return e.IsExpanded=!e.IsExpanded})),o.Jc(6),o.cc(),o.cc(),o.dc(7,"ion-buttons"),o.dc(8,"ion-button",6),o.lc("click",(function(){o.Cc(e);const n=t.$implicit;return o.oc().OpenBook(n)})),o.dc(9,"ion-text"),o.Jc(10,"\u6253\u5f00"),o.cc(),o.Zb(11,"ion-icon",7),o.cc(),o.cc(),o.cc(),o.Hc(12,d,1,2,"app-tree-node",8),o.cc()}if(2&e){const e=t.$implicit;o.Nb(1),o.vc("ngClass",o.xc(8,a,e.IsExpanded))("color",e.ColorB),o.Nb(2),o.vc("ngIf",!e.IsFile&&e.Sub.length>0),o.Nb(1),o.vc("ngIf",e.Icon),o.Nb(1),o.vc("color",e.Color),o.Nb(1),o.Lc(" ",e.Title," "),o.Nb(2),o.vc("hidden",!e.IsSelected),o.Nb(4),o.vc("ngIf",e.Sub.length>0)}}let h=(()=>{class e{constructor(){this.nodeSelected=new o.s,this.nodeAdd=new o.s,this.nodeOpen=new o.s}ngOnInit(){}clickNode(e){this.nodeSelected.emit(e)}CreateNode(e){return Object(c.b)(this,void 0,void 0,(function*(){this.nodeAdd.emit(e)}))}OpenBook(e){this.nodeOpen.emit(e)}onSubNodeSelecte(e){this.nodeSelected.emit(e)}onSubNodeAdd(e){this.nodeAdd.emit(e)}onSubNodeOpen(e){this.nodeOpen.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Sb({type:e,selectors:[["app-tree-node"]],inputs:{nodes:"nodes"},outputs:{nodeSelected:"nodeSelected",nodeAdd:"nodeAdd",nodeOpen:"nodeOpen"},decls:1,vars:1,consts:[["class","divitem",4,"ngFor","ngForOf"],[1,"divitem"],["detail","false","lines","none",3,"ngClass","color","click"],["slot","start",3,"color","name","click",4,"ngIf"],["class","iconNode","color","dark",3,"name","click",4,"ngIf"],[3,"color","click"],["color","primary",3,"hidden","click"],["name","arrow-dropright"],[3,"nodes","hidden","nodeOpen","nodeSelected","nodeAdd",4,"ngIf"],["slot","start",3,"color","name","click"],["color","dark",1,"iconNode",3,"name","click"],[3,"nodes","hidden","nodeOpen","nodeSelected","nodeAdd"]],template:function(e,t){1&e&&o.Hc(0,u,13,10,"div",0),2&e&&o.vc("ngForOf",t.nodes)},directives:[i.i,s.w,i.h,s.C,i.j,s.S,s.i,s.h,s.t,e],styles:[".spanCursor[_ngcontent-%COMP%]{min-width:1em}.divitem[_ngcontent-%COMP%]{padding:0 0 0 15px;margin:0}.iconNode[_ngcontent-%COMP%]{margin-right:.5em}.selectedNode[_ngcontent-%COMP%]{background-color:#5f9ea0}"]}),e})()},xPBH:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));class c{constructor(e,t,n,c=!1){this.Type=e,this.Title=t,this.ShowButton=!0,this.Version=0,this.isExpanded=!1,this.isSelected=!1,this.url="",this.sub=[],this.ID=n}static getNodePath(e,t,n=null){var c,o;const i=e?e.Sub:n;if((t||"").IsNullOrEmpty())return["\u6839\u76ee\u5f55"];if((null===(c=e)||void 0===c?void 0:c.ID)===t)return[e.Title];if(!(i.length>0))return null;for(const s of i){const n=this.getNodePath(s,t);if(n)return n.insert(0,(null===(o=e)||void 0===o?void 0:o.Title)||""),n}}get IsFile(){return 32===this.Type}get IsSelected(){return this.isSelected}set IsSelected(e){this.isSelected=e}get IsExpanded(){return this.isExpanded||!1}set IsExpanded(e){0!==this.Sub.length&&(this.isExpanded=e)}get Icon(){switch(this.Type){case 2:return"person";case 4:return"lock";case 8:return"menu";case 16:return"walk";case 32:return"document";case 1:default:return"folder"}}get Url(){return this.url}get Sub(){return this.sub}set Sub(e){this.sub=e}get Color(){return this.isSelected?"primary":""}get ColorB(){return this.isSelected?"light":""}SubNodesId(e){e.push(this.ID);for(const t of this.Sub)t.SubNodesId(e)}}}}]);