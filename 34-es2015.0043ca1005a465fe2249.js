(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{J4mY:function(c,i,t){"use strict";t.r(i);var o=t("ofXK"),n=t("3Pt+"),e=t("tyNb"),s=t("c7TG"),r=t("mrSG"),a=t("LTmD"),l=t("PKx9"),d=t("8/yo"),u=t("Y6BA"),h=t("G6JS"),f=t("fXoL");let m=(()=>{class c{constructor(c){this.modalCtrl=c}ngOnInit(){}onClose(){this.modalCtrl.dismiss()}}return c.\u0275fac=function(i){return new(i||c)(f.Yb(s.cb))},c.\u0275cmp=f.Sb({type:c,selectors:[["app-imgmodal"]],inputs:{ImgSrc:"ImgSrc"},decls:7,vars:1,consts:[["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["name","close"],[1,"frame",2,"background-color","black"],[1,"helper"],[3,"src"]],template:function(c,i){1&c&&(f.dc(0,"ion-content"),f.dc(1,"ion-fab",0),f.lc("click",(function(){return i.onClose()})),f.dc(2,"ion-fab-button"),f.Zb(3,"ion-icon",1),f.cc(),f.cc(),f.dc(4,"div",2),f.Zb(5,"span",3),f.Zb(6,"img",4),f.cc(),f.cc()),2&c&&(f.Nb(6),f.vc("src",i.ImgSrc,f.Ec))},directives:[s.n,s.p,s.q,s.u],styles:[".frame[_ngcontent-%COMP%]{height:100%;width:100%;white-space:nowrap;text-align:center;margin:1em 0}.helper[_ngcontent-%COMP%]{display:inline-block;height:100%}.helper[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{vertical-align:middle}img[_ngcontent-%COMP%]{background:#3a6f9a}"]}),c})();var p=t("i/bi"),g=t("ylIl"),b=t("gTpY"),v=t("jhN1");let T=(()=>{class c{constructor(c){this.sanitizer=c}transform(c){return this.sanitizer.bypassSecurityTrustHtml(c)}}return c.\u0275fac=function(i){return new(i||c)(f.Yb(v.b))},c.\u0275pipe=f.Xb({name:"safeHtml",type:c,pure:!0}),c})();function C(c,i){if(1&c&&(f.dc(0,"ion-header"),f.dc(1,"ion-toolbar",12),f.dc(2,"ion-buttons",3),f.Zb(3,"ion-back-button",13),f.cc(),f.dc(4,"ion-title"),f.Jc(5),f.cc(),f.dc(6,"ion-buttons",5),f.dc(7,"ion-button",14),f.Zb(8,"ion-icon",15),f.cc(),f.cc(),f.cc(),f.cc()),2&c){const c=f.oc();f.Nb(5),f.Kc(c.Titel)}}function x(c,i){1&c&&(f.dc(0,"ion-text",16),f.Jc(1,"[\u7cbe\u534e]"),f.cc())}function I(c,i){1&c&&(f.dc(0,"ion-text",16),f.Jc(1,"[\u7f6e\u9876]"),f.cc())}function N(c,i){if(1&c){const c=f.ec();f.dc(0,"ion-button",17),f.lc("click",(function(){return f.Cc(c),f.oc().NavBack()})),f.Zb(1,"ion-icon",18),f.cc()}}function w(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){return f.Cc(c),f.oc(2).AnswerTopic(null)})),f.Jc(2,"[\u56de\u590d]"),f.cc(),f.cc()}}function y(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc(2);return i.EditTopic(i.Topic)})),f.Jc(2,"[\u4fee\u6539]"),f.cc(),f.cc()}}function k(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc(2);return i.DeleteTopic(i.Topic.id,!0)})),f.Jc(2,"[\u5220\u9664]"),f.cc(),f.cc()}}function z(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc(2);return i.FrozenTopic(i.Topic)})),f.Jc(2,"[\u5c01\u5b58]"),f.cc(),f.cc()}}function S(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc(2);return i.ChangeImg(i.Topic,"img")})),f.Jc(2,"[\u56fe\u7247]"),f.cc(),f.cc()}}function H(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",28),f.lc("click",(function(){return f.Cc(c),f.oc(2).SetTopOrGood("\u7cbe\u534e")})),f.Jc(2,"[\u7cbe\u534e]"),f.cc(),f.cc()}if(2&c){const c=f.oc(2);f.Nb(1),f.vc("color",null!=c.Topic&&c.Topic.good?"primary":"danger")}}function O(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",29),f.lc("click",(function(){return f.Cc(c),f.oc(2).SetTopOrGood("\u7f6e\u9876")})),f.Jc(2,"[\u7f6e\u9876]"),f.cc(),f.cc()}if(2&c){const c=f.oc(2);f.Nb(1),f.vc("color",null!=c.Topic&&c.Topic.top?"primary":"danger")}}function J(c,i){if(1&c&&(f.dc(0,"sui-accordion",30),f.dc(1,"sui-accordion-panel",31),f.dc(2,"div",32),f.Zb(3,"i",33),f.Jc(4," \u5366\u76d8 "),f.cc(),f.dc(5,"div",34),f.Zb(6,"app-guaview",35),f.cc(),f.cc(),f.cc()),2&c){const c=f.oc(2);f.vc("closeOthers",!1),f.Nb(1),f.vc("isOpen",!1),f.Nb(5),f.vc("Config",c.GuaConfig)("GuaText",c.Topic.gua)}}function A(c,i){if(1&c&&(f.dc(0,"sui-accordion",30),f.dc(1,"sui-accordion-panel",31),f.dc(2,"div",32),f.Zb(3,"i",33),f.Jc(4," \u547d\u76d8 "),f.cc(),f.dc(5,"div",34),f.Zb(6,"app-baziview",36),f.cc(),f.cc(),f.cc()),2&c){const c=f.oc(2);f.vc("closeOthers",!1),f.Nb(1),f.vc("isOpen",!1),f.Nb(5),f.vc("Config",c.BaziConfig)("BaziText",c.Topic.bazi)}}const P=function(c){return{"max-height.px":c}};function Z(c,i){if(1&c){const c=f.ec();f.dc(0,"ion-item",37),f.lc("click",(function(){f.Cc(c);const i=f.oc(2);return i.ShowImageModal(i.Topic.img)})),f.dc(1,"div",38),f.Zb(2,"img",39),f.cc(),f.cc()}if(2&c){const c=f.oc(2);f.Nb(2),f.vc("src",c.Topic.img,f.Ec)("ngStyle",f.xc(2,P,c.MaxHeight))}}function L(c,i){if(1&c){const c=f.ec();f.dc(0,"div",19),f.dc(1,"ion-item"),f.dc(2,"ion-thumbnail",3),f.Zb(3,"img",20),f.cc(),f.dc(4,"ion-label",21),f.dc(5,"ion-text",22),f.lc("click",(function(){f.Cc(c);const i=f.oc();return i.ShowUserInfo(i.Topic.author)})),f.Jc(6),f.cc(),f.Zb(7,"br"),f.dc(8,"ion-note"),f.dc(9,"small"),f.Jc(10),f.cc(),f.cc(),f.Zb(11,"br"),f.dc(12,"ion-note"),f.dc(13,"small"),f.Jc(14),f.cc(),f.cc(),f.Zb(15,"br"),f.dc(16,"ion-label",21),f.dc(17,"small"),f.dc(18,"ion-text",23),f.Jc(19,"0 \u697c"),f.cc(),f.cc(),f.Hc(20,w,3,0,"small",0),f.Hc(21,y,3,0,"small",0),f.Hc(22,k,3,0,"small",0),f.Hc(23,z,3,0,"small",0),f.Hc(24,S,3,0,"small",0),f.Hc(25,H,3,1,"small",0),f.Hc(26,O,3,1,"small",0),f.cc(),f.cc(),f.cc(),f.Hc(27,J,7,4,"sui-accordion",24),f.Hc(28,A,7,4,"sui-accordion",24),f.Hc(29,Z,3,4,"ion-item",25),f.dc(30,"ion-item"),f.dc(31,"ion-label",21),f.Zb(32,"ion-text",26),f.pc(33,"safeHtml"),f.cc(),f.cc(),f.cc()}if(2&c){const c=f.oc();f.vc("hidden",1!==c.PageIndex),f.Nb(3),f.vc("src",c.Topic.avatar,f.Ec),f.Nb(3),f.Lc("\u4f5c\u8005\uff1a",c.Topic.author,""),f.Nb(4),f.Lc("\u53d1\u5e16\u65f6\u95f4: ",c.DateText(c.Topic.created),""),f.Nb(4),f.Lc("\u4fee\u6539\u65f6\u95f4: ",c.DateText(c.Topic.modified),""),f.Nb(6),f.vc("ngIf",c.CheckAction(c.Topic,"anwser")),f.Nb(1),f.vc("ngIf",c.CheckAction(c.Topic,"modify")),f.Nb(1),f.vc("ngIf",c.CheckAction(c.Topic,"delete")),f.Nb(1),f.vc("ngIf",c.CheckAction(c.Topic,"frozen")),f.Nb(1),f.vc("ngIf",c.Topic.img),f.Nb(1),f.vc("ngIf",c.IsAdmin),f.Nb(1),f.vc("ngIf",c.IsAdmin),f.Nb(1),f.vc("ngIf",c.Topic.gua),f.Nb(1),f.vc("ngIf",c.Topic.bazi),f.Nb(1),f.vc("ngIf",c.ShowMe(c.Topic,"img")),f.Nb(3),f.vc("innerHtml",f.qc(33,16,c.Topic.content),f.Dc)}}function G(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){return f.Cc(c),f.oc(2).AnswerTopic(null)})),f.Jc(2,"[\u56de\u590d]"),f.cc(),f.cc()}}function D(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc().$implicit;return f.oc().EditTopic(i)})),f.Jc(2,"[\u4fee\u6539]"),f.cc(),f.cc()}}function M(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc().$implicit;return f.oc().DeleteTopic(i.id,!0)})),f.Jc(2,"[\u5220\u9664]"),f.cc(),f.cc()}}function B(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc().$implicit;return f.oc().FrozenTopic(i)})),f.Jc(2,"[\u5c01\u5b58]"),f.cc(),f.cc()}}function U(c,i){if(1&c){const c=f.ec();f.dc(0,"small"),f.dc(1,"ion-text",27),f.lc("click",(function(){f.Cc(c);const i=f.oc().$implicit;return f.oc().ChangeImg(i,"img")})),f.Jc(2,"[\u56fe\u7247]"),f.cc(),f.cc()}}function $(c,i){if(1&c&&(f.dc(0,"sui-accordion",30),f.dc(1,"sui-accordion-panel",31),f.dc(2,"div",32),f.Zb(3,"i",33),f.Jc(4," \u5366\u76d8 "),f.cc(),f.dc(5,"div",34),f.Zb(6,"app-guaview",35),f.cc(),f.cc(),f.cc()),2&c){const c=f.oc().$implicit,i=f.oc();f.vc("closeOthers",!1),f.Nb(1),f.vc("isOpen",!1),f.Nb(5),f.vc("Config",i.GuaConfig)("GuaText",c.gua)}}function j(c,i){if(1&c&&(f.dc(0,"sui-accordion",30),f.dc(1,"sui-accordion-panel",31),f.dc(2,"div",32),f.Zb(3,"i",33),f.Jc(4," \u547d\u76d8 "),f.cc(),f.dc(5,"div",34),f.Zb(6,"app-baziview",36),f.cc(),f.cc(),f.cc()),2&c){const c=f.oc().$implicit,i=f.oc();f.vc("closeOthers",!1),f.Nb(1),f.vc("isOpen",!1),f.Nb(5),f.vc("Config",i.BaziConfig)("BaziText",c.bazi)}}function V(c,i){if(1&c){const c=f.ec();f.dc(0,"ion-item",37),f.lc("click",(function(){f.Cc(c);const i=f.oc().$implicit;return f.oc().ShowImageModal(i.img)})),f.dc(1,"div",38),f.Zb(2,"img",39),f.cc(),f.cc()}if(2&c){const c=f.oc().$implicit,i=f.oc();f.Nb(2),f.vc("src",c.img,f.Ec)("ngStyle",f.xc(2,P,i.MaxHeight))}}function E(c,i){if(1&c){const c=f.ec();f.dc(0,"ion-item"),f.dc(1,"div",40),f.dc(2,"ion-item"),f.dc(3,"ion-thumbnail",3),f.Zb(4,"img",20),f.cc(),f.dc(5,"ion-label",21),f.dc(6,"ion-text",22),f.lc("click",(function(){f.Cc(c);const t=i.$implicit;return f.oc().ShowUserInfo(t.author)})),f.Jc(7),f.cc(),f.Zb(8,"br"),f.dc(9,"ion-note"),f.dc(10,"small"),f.Jc(11),f.cc(),f.cc(),f.Zb(12,"br"),f.dc(13,"ion-note"),f.dc(14,"small"),f.Jc(15),f.cc(),f.cc(),f.Zb(16,"br"),f.dc(17,"ion-label",21),f.dc(18,"small"),f.dc(19,"ion-text",23),f.Jc(20),f.cc(),f.cc(),f.Hc(21,G,3,0,"small",0),f.Hc(22,D,3,0,"small",0),f.Hc(23,M,3,0,"small",0),f.Hc(24,B,3,0,"small",0),f.Hc(25,U,3,0,"small",0),f.cc(),f.cc(),f.cc(),f.Hc(26,$,7,4,"sui-accordion",24),f.Hc(27,j,7,4,"sui-accordion",24),f.Hc(28,V,3,4,"ion-item",25),f.dc(29,"ion-item",41),f.dc(30,"ion-label",21),f.Zb(31,"ion-text",26),f.cc(),f.cc(),f.cc(),f.cc()}if(2&c){const c=i.$implicit,t=i.index,o=f.oc();f.Nb(4),f.vc("src",c.avatar,f.Ec),f.Nb(3),f.Lc("\u4f5c\u8005\uff1a",c.author,""),f.Nb(4),f.Lc("\u53d1\u5e16\u65f6\u95f4: ",o.DateText(c.created),""),f.Nb(4),f.Lc("\u4fee\u6539\u65f6\u95f4: ",o.DateText(c.modified),""),f.Nb(5),f.Lc("",t+1," \u697c"),f.Nb(1),f.vc("ngIf",o.CheckAction(c,"anwser")),f.Nb(1),f.vc("ngIf",o.CheckAction(c,"modify")),f.Nb(1),f.vc("ngIf",o.CheckAction(c,"delete")),f.Nb(1),f.vc("ngIf",o.CheckAction(c,"frozen")),f.Nb(1),f.vc("ngIf",c.img),f.Nb(1),f.vc("ngIf",c.gua),f.Nb(1),f.vc("ngIf",c.bazi),f.Nb(1),f.vc("ngIf",o.ShowMe(c,"img")),f.Nb(3),f.vc("innerHtml",c.content,f.Dc)}}function Y(c,i){if(1&c){const c=f.ec();f.dc(0,"div",42),f.dc(1,"sui-pagination",43),f.lc("pageChange",(function(i){return f.Cc(c),f.oc().PageIndex=i})),f.cc(),f.cc()}if(2&c){const c=f.oc();f.Nb(1),f.vc("collectionSize",c.PageSum)("pageSize",20)("maxSize",c.MaxPageButtons)("hasNavigationLinks",!0)("hasBoundaryLinks",!0)("page",c.PageIndex)}}let F=(()=>{class c{constructor(c,i,t,o,n,e,s){this.loadingController=c,this.alertController=i,this.settings=t,this.forumservice=o,this.modalCtrl=n,this.route=e,this.router=s,this.pageindex=1,this.cache=[],this.Pages=[0],this.PageSum=0,this.Titel="Topic Titel",this.VTopic=[],this.LoadSuccessed=!1,this.route.params.subscribe(c=>{this.forumid=c.forumid,this.topicid=c.topicid})}ngOnInit(){var c;return Object(r.b)(this,void 0,void 0,(function*(){yield this.settings.WaitInit(),this.forumservice.ForumMG.Forumlist||(yield this.forumservice.LoadForumList()),this.forum=this.forumservice.ForumMG.Forumlist.find(c=>c.id===this.forumid),this.Titel=(null===(c=this.forum)||void 0===c?void 0:c.name)||this.forumid,this.user=this.settings.User||u.a,this.GuaConfig=this.settings.Gua,this.BaziConfig=this.settings.Bazi,this.loadingView=yield this.loadingController.create({message:"\u6b63\u5728\u83b7\u53d6\u8bba\u575b\u5e16\u5b50...",duration:6e4}),this.Topic=yield this.forumservice.GetTopic(this.forumid,this.topicid),this.PageIndex=1}))}get IsWeb(){return"web"===u.b}get HasUser(){return this.settings.HasUser&&this.user!==u.a}get MaxPageButtons(){return this.settings.DeviceWidth>=400?7:2}get PageIndex(){return this.pageindex}set PageIndex(c){this.VTopic&&this.VTopic.length>0&&(this.cache.find(c=>c.page===this.pageindex-1)||this.cache.push({page:this.pageindex-1,items:this.VTopic})),this.pageindex=c,this.LoadAnswors(c-1).then(c=>{this.LoadSuccessed=c})}get MaxHeight(){return Math.ceil(this.settings.DeviceHeight/2)}get IsAdmin(){if(!this.user||!this.forum)return!1;let c=256===this.user.roller;return this.forum&&this.Topic&&(c=c||this.forum.admin.includes(this.user.id)),c}doRefresh(c){this.cache=[],this.forumservice.GetTopic(this.forumid,this.topicid).then(c=>(this.Topic=c,this.LoadAnswors(this.PageIndex-1))).then(c=>{this.LoadSuccessed=c}).catch(c=>{console.log(c)}).finally(()=>{c.target.complete()})}LoadAnswors(c){return Object(r.b)(this,void 0,void 0,(function*(){this.VTopic=[];const i=this.cache.find(i=>i.page===c);return i?(this.VTopic=i.items,Promise.resolve(!0)):this.forumservice.LoadAnswerList(this.topicid,this.forumid,c).then(i=>(i&&Array.isArray(i.data)&&(this.PageSum=0===c?i.sum||0:this.PageSum,this.VTopic=i.data,this.updateUserAvatar()),!0)).catch(c=>(console.log("LoadAnswors Error",c),!1))}))}DateText(c){if(!c)return"\u65e0";const i=new Date(c);return i.toChinaStr()+` ${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}`}GetRoles(c){return c?this.settings.UserRolers(c):[]}CheckAction(c,i){if(!c||!this.HasUser)return!1;let t=!1;return"modify"===i?(t=this.user.id===c.author||this.IsAdmin,t=t&&!0!==c.frozen):"delete"===i?(t=this.user.id===c.author||this.IsAdmin,t=t&&!0!==c.frozen):"frozen"===i?(t=this.user.id===c.author||this.IsAdmin,t=t&&!0!==c.frozen):"anwser"===i&&(t=!0),t&&!(!0===c.deleted)}ShowPanfu(c){this.router.navigate([`menu/topicpanfu/${JSON.stringify(c)}`])}EditTopic(c){var i;return Object(r.b)(this,void 0,void 0,(function*(){const t=void 0!==c.forumid;let o=t?null===(i=this.forum)||void 0===i?void 0:i.name:this.Topic.title;o||(o=c.forumid||this.forumid);const n=yield this.modalCtrl.create({component:d.a,componentProps:{MainTopic:t?c:null,VTopic:t?null:c,forumid:this.forumid,forumname:o,Private:!this.forum}});yield n.present(),yield n.onWillDismiss()}))}DeleteTopic(c,i){return Object(r.b)(this,void 0,void 0,(function*(){this.presentConfirm("\u5220\u9664",null,"\u786e\u5b9a\u5220\u9664\u6b64\u5e16\u5b50/\u53d1\u8a00\uff1f").then(t=>!0===t&&this.forumservice.DeleteTopic(c,i?null:this.Topic.id)).then(c=>{c&&this.router.navigateByUrl(i?"menu/forum":`menu/topiclist/${this.forumid}`)})}))}AnswerTopic(c){return Object(r.b)(this,void 0,void 0,(function*(){const i=this.CreateTopic(c),t=yield this.modalCtrl.create({component:d.a,componentProps:{VTopic:i,forumid:this.forumid,forumname:this.Topic.title}});yield t.present(),yield t.onWillDismiss()}))}FrozenTopic(c){return Object(r.b)(this,void 0,void 0,(function*(){const i=!c;c=c||this.Topic,this.presentConfirm("\u5c01\u5b58",null,"\u5c01\u5b58\u53d1\u8a00\u540e\uff0c\u4e0d\u5141\u8bb8\u518d\u4fee\u6539\u3001\u5220\u9664\u3002\u5168\u697c\u5c01\u5b58\u540e\u4e0d\u5141\u8bb8\u8ddf\u8d34\u3002\u786e\u5b9a\u5c01\u5b58\u5417\uff1f").then(i=>{if(!0===i)return this.forumservice.UpdateTopic({frozen:!0},c.id,!this.forum)}).then(t=>{t&&(c.frozen=!0,c.deleted=!!i||c.deleted)}).catch(c=>{this.presentConfirm("\u64cd\u4f5c\u5931\u8d25",null,"\u5c01\u697c/\u53d1\u8a00\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff0c \u6216\u8005\u5411\u7248\u4e3b\u62a5\u544a\u3002")})}))}SetTopOrGood(c){return Object(r.b)(this,void 0,void 0,(function*(){const i={};"\u7cbe\u534e"===c?i.good=!this.Topic.good:"\u7f6e\u9876"===c&&(i.top=(this.Topic.top+1)%2),this.forumservice.UpdateTopic(i,this.Topic.id,!this.forum).then(i=>{i&&("\u7cbe\u534e"===c?this.Topic.good=!this.Topic.good:"\u7f6e\u9876"===c&&(this.Topic.top=(this.Topic.top+1)%2))})}))}ShowUserInfo(c){return Object(r.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:h.a,componentProps:{Uerid:c}});yield i.present(),yield i.onWillDismiss()}))}ShowImageModal(c){return Object(r.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:m,componentProps:{ImgSrc:c}});yield i.present(),yield i.onWillDismiss()}))}NavBack(){this.router.navigateByUrl(`/menu/topiclist/${this.forumid}`)}ShowMe(c,i){return"img"===i?c&&c.img&&c.showImg:"gua"===i?c&&c.gua&&c.showgua:"bazi"===i&&c&&c.bazi&&c.showbazi}ChangeImg(c,i){"img"===i?c.showImg=!c.showImg:"gua"===i?c.showGua=!c.showGua:"bazi"===i&&(c.showBazi=!c.showBazi)}CreateTopic(c){const i=Date.now();return{id:"",created:i,modified:i,author:this.user.id,topic:this.Topic.id,gua:null,bazi:null,img:null,content:"",feedback:c||"",frozen:!1}}updateUserAvatar(){this.VTopic.forEach(c=>{this.forumservice.GetUserInfo(c.author).then(i=>{const t=(i||u.a).avatar||"";c.avatar=t.IsNullOrEmpty()?this.settings.Avatar(i.gender):t,c.showImg=!0,c.showGua=!0,c.showBazi=!0})})}presentConfirm(c,i,t){return Object(r.b)(this,void 0,void 0,(function*(){let o=!1;const n=yield this.alertController.create({header:c||"\u63d0\u793a",subHeader:i||"",message:t,buttons:[{text:"\u786e\u5b9a",handler:()=>{o=!0}},{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:()=>{}}]});return yield n.present(),yield n.onWillDismiss(),Promise.resolve(o)}))}}return c.\u0275fac=function(i){return new(i||c)(f.Yb(s.bb),f.Yb(s.b),f.Yb(a.a),f.Yb(l.a),f.Yb(s.cb),f.Yb(e.a),f.Yb(e.g))},c.\u0275cmp=f.Sb({type:c,selectors:[["app-topicviewer"]],decls:19,vars:9,consts:[[4,"ngIf"],["color","medium"],[1,"ion-no-padding"],["slot","start"],["color","danger",4,"ngIf"],["slot","end"],[3,"click",4,"ngIf"],[3,"disabled","click"],["slot","fixed",3,"ionRefresh"],[3,"hidden",4,"ngIf"],[4,"ngFor","ngForOf"],["class","ui very basic segment",4,"ngIf"],["color","primary"],["defaulthref","","text","\u8fd4\u56de"],["routerLink","/menu/forum"],["icon-only","","name","home"],["color","danger"],[3,"click"],["name","undo"],[3,"hidden"],[3,"src"],[1,"ion-text-wrap"],["color","primary",3,"click"],[1,"ion-margin-end"],[3,"closeOthers",4,"ngIf"],["lines","none",3,"click",4,"ngIf"],["ion-padding-vertical","",2,"margin-bottom","1px",3,"innerHtml"],["color","secondary",1,"ion-margin-end",3,"click"],[1,"ion-margin-end",3,"color","click"],[3,"color","click"],[3,"closeOthers"],[3,"isOpen"],["title",""],[1,"dropdown","icon"],["content",""],[3,"Config","GuaText"],[3,"Config","BaziText"],["lines","none",3,"click"],[1,"img-container"],[3,"src","ngStyle"],[2,"padding-bottom","3px"],["lines","none"],[1,"ui","very","basic","segment"],[1,"ui","right","floated",3,"collectionSize","pageSize","maxSize","hasNavigationLinks","hasBoundaryLinks","page","pageChange"]],template:function(c,i){1&c&&(f.Hc(0,C,9,1,"ion-header",0),f.Zb(1,"ion-text",1),f.dc(2,"ion-item-divider",2),f.dc(3,"ion-label",3),f.dc(4,"ion-text"),f.Jc(5),f.cc(),f.Hc(6,x,2,0,"ion-text",4),f.Hc(7,I,2,0,"ion-text",4),f.cc(),f.dc(8,"ion-buttons",5),f.Hc(9,N,2,0,"ion-button",6),f.dc(10,"ion-button",7),f.lc("click",(function(){return i.FrozenTopic(null)})),f.Jc(11,"\u5c01\u697c"),f.cc(),f.cc(),f.cc(),f.dc(12,"ion-content",2),f.dc(13,"ion-refresher",8),f.lc("ionRefresh",(function(c){return i.doRefresh(c)})),f.Zb(14,"ion-refresher-content"),f.cc(),f.Hc(15,L,34,18,"div",9),f.dc(16,"ion-list",2),f.Hc(17,E,32,14,"ion-item",10),f.Hc(18,Y,2,6,"div",11),f.cc(),f.cc()),2&c&&(f.vc("ngIf",!i.IsWeb),f.Nb(5),f.Lc("\u9898\u76ee\uff1a",null==i.Topic?null:i.Topic.title,""),f.Nb(1),f.vc("ngIf",null==i.Topic?null:i.Topic.good),f.Nb(1),f.vc("ngIf",null==i.Topic?null:i.Topic.top),f.Nb(2),f.vc("ngIf",i.IsWeb),f.Nb(1),f.vc("disabled",!i.CheckAction(i.Topic,"frozen")),f.Nb(5),f.vc("ngIf",i.Topic),f.Nb(2),f.vc("ngForOf",i.VTopic),f.Nb(1),f.vc("ngIf",i.LoadSuccessed))},directives:[o.j,s.T,s.y,s.D,s.j,s.i,s.n,s.J,s.K,s.E,o.i,s.t,s.Y,s.f,s.g,s.W,s.gb,e.h,s.u,s.x,s.V,s.H,p.a,p.b,g.a,b.a,o.k,p.f],pipes:[T],styles:[".img-container[_ngcontent-%COMP%]{text-align:center;display:block}"]}),c})();var W=t("CGrG"),R=t("zioG"),_=t("uEAi"),K=t("n7QD");t.d(i,"TopicviewerPageModule",(function(){return q}));const X=[{path:"",component:F}];let q=(()=>{class c{}return c.\u0275mod=f.Wb({type:c}),c.\u0275inj=f.Vb({factory:function(i){return new(i||c)},imports:[[_.a,K.a,R.b,p.e,o.b,n.c,s.Z,W.b,e.j.forChild(X)]]}),c})()}}]);