function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+cLM":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("2QJI"),s=n("l+bK"),a=n("uq+3"),h=function(e){return e[e.DaYun=0]="DaYun",e[e.LiuNian=1]="LiuNian",e[e.XiaoYun=2]="XiaoYun",e}({}),r=function(){var e=function(){function e(t,n,i,s){_classCallCheck(this,e),this.Start=t,this.GZ=n,this.birthYear=i,this.type=s,this.type===h.DaYun&&(this.end=new Date(this.Start.getTime()+e.tenyear))}return _createClass(e,[{key:"Old",get:function(){return this.Start.getFullYear()-this.birthYear}},{key:"End",get:function(){return this.end},set:function(e){this.end=e||this.end}},{key:"Year",get:function(){return this.Start.getFullYear()}}]),e}();return e.oneday=864e5,e.oneyear=365.25*e.oneday,e.tenyear=10*e.oneyear,e}(),u=function(){function e(t,n){_classCallCheck(this,e),this.Birthday=t,this.Gender=n,this.bazi=s.b.calcBazi(this.Birthday.getFullYear(),this.Birthday.getMonth()+1,this.Birthday.getDate(),this.Birthday.getHours(),this.Birthday.getMinutes()),this.bazi.Y.Base=this.bazi.D,this.bazi.M.Base=this.bazi.D,this.bazi.D.Base=this.bazi.D,this.bazi.T.Base=this.bazi.D,this.initShenSha(),this.initDaYun()}return _createClass(e,[{key:"CalcShenSha",value:function(e){var t=new Array,n=!0,i=!1,s=void 0;try{for(var a,h=this.ShenSha[Symbol.iterator]();!(n=(a=h.next()).done);n=!0){var r=a.value;1==r.Is(e)&&t.push(r.Name)}}catch(u){i=!0,s=u}finally{try{n||null==h.return||h.return()}finally{if(i)throw s}}return t.join("\u3001")}},{key:"CalcLiuNian",value:function(e,t){for(var n=new Array,a=e-1984;a<0;)a+=60;a%=60;var u=this.T.Index+(e-this.Birthday.getFullYear()+1)*this.Direction;u=(u+600)%60;for(var o=e;o<=t;o++){var c=new i.b(a);c.Base=this.D,c.ShenSha=this.CalcShenSha(c);var l=new i.b(u);l.Base=this.D,l.ShenSha=this.CalcShenSha(l);var b=s.b.getSolarTerms(o,2)[0],g=new r(b,c,this.Birthday.getFullYear(),h.LiuNian);g.GZ2=l,n.push(g),a+=1,a%=60,u=((u+=1*this.Direction)+60)%60}return n}},{key:"equal",value:function(e){return this.Gender==e.Gender&&this.Birthday.toString()==e.Birthday.toString()}},{key:"initShenSha",value:function(){this.shenshas=new Array;var e=this.Y.Index,t=this.M.Index,n=this.D.Index,i=this.T.Index;this.shenshas.push(new a.a("\u5c06\u661f",[n])),this.shenshas.push(new a.a("\u7f8a\u5203",[n])),this.shenshas.push(new a.a("\u7984\u795e",[n])),this.shenshas.push(new a.a("\u534e\u76d6",[n])),this.shenshas.push(new a.a("\u6587\u660c",[n])),this.shenshas.push(new a.a("\u5b66\u5802",[n])),this.shenshas.push(new a.a("\u5929\u559c",[t])),this.shenshas.push(new a.a("\u5929\u533b",[t])),this.shenshas.push(new a.a("\u8d35\u4eba",[n])),this.shenshas.push(new a.a("\u9a7f\u9a6c",[e,n])),this.shenshas.push(new a.a("\u6843\u82b1",[e,n])),this.shenshas.push(new a.a("\u707e\u715e",[e,n])),this.shenshas.push(new a.a("\u52ab\u715e",[e,n])),this.shenshas.push(new a.a("\u65ec\u7a7a",[n])),this.shenshas.push(new a.a("\u9b41\u7f61",[e,t,n,i])),this.shenshas.push(new a.a("\u56db\u5e9f",[e,t,n,i])),this.shenshas.push(new a.a("\u5b64\u8fb0\u5be1\u5bbf",[e,t,n,i])),this.shenshas.push(new a.a("\u9634\u5dee\u9633\u9519",[n]));var s=new a.a("\u5929\u7f57\u5730\u7f51",[e,t,n,i]);s.Gender=this.Gender,this.shenshas.push(s)}},{key:"initDaYun",value:function(){this.dayun=new Array;var e=this.qiDaYun(),t=this.Direction,n=(e.getFullYear(),this.Birthday.getFullYear(),new r(this.Birthday,this.M,this.Birthday.getFullYear(),h.DaYun));n.End=e,this.dayun.push(n);for(var s=0;s<10;s++){var a=new i.b((this.M.Index+(s+1)*t+60)%60);a.Base=this.bazi.D;var u=new Date(e.getTime()+315576e6*s),o=new r(u,a,this.Birthday.getFullYear(),h.DaYun);this.dayun.push(o)}}},{key:"qiDaYun",value:function(){var e=s.b.findNextJieQi(this.Birthday,("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)),t=Math.abs(e.getTime()-this.Birthday.getTime())/6e4*2;return new Date(this.Birthday.getTime()+36e5*t)}},{key:"Y",get:function(){return this.bazi.Y}},{key:"M",get:function(){return this.bazi.M}},{key:"D",get:function(){return this.bazi.D}},{key:"T",get:function(){return this.bazi.T}},{key:"All",get:function(){return[this.bazi.Y,this.bazi.M,this.bazi.D,this.bazi.T]}},{key:"Direction",get:function(){return("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)}},{key:"MingGong",get:function(){if(this.minggong)return this.minggong;var e=this.M.Zhi.Index+1+this.T.Zhi.Index+1,t=e<14?14-e:26-e;return new i.b([(this.Y.Gan.QiYueGan+((t-=1)-2+12)%12)%10,t])}},{key:"TaiYuan",get:function(){return new i.b([(this.M.Gan.Index+1)%10,(this.M.Zhi.Index+3)%12])}},{key:"WuXings",get:function(){if(this.wuxings)return this.wuxings;var e=[0,0,0,0,0];return e[this.Y.Gan.WuXing.Index]+=1,e[this.M.Gan.WuXing.Index]+=1,e[this.D.Gan.WuXing.Index]+=1,e[this.T.Gan.WuXing.Index]+=1,e[this.Y.Zhi.WuXing.Index]+=1,e[this.M.Zhi.WuXing.Index]+=1,e[this.D.Zhi.WuXing.Index]+=1,e[this.T.Zhi.WuXing.Index]+=1,this.wuxings=[{Name:"\u91d1",Num:e[0]},{Name:"\u6c34",Num:e[1]},{Name:"\u6728",Num:e[2]},{Name:"\u706b",Num:e[3]},{Name:"\u571f",Num:e[4]}],this.wuxings}},{key:"ShenSha",get:function(){return this.shenshas}},{key:"DaYun",get:function(){return this.dayun}}]),e}()},"06W+":function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),s=n("3Pt+"),a=n("tyNb"),h=n("c7TG"),r=n("mrSG"),u=n("gTpY"),o=n("ylIl"),c=n("LTmD"),l=(n("0eVs"),n("fXoL"));function b(e,t){if(1&e&&l.Xb(0,"app-baziview",10),2&e){var n=l.jc();l.oc("Config",n.Config)("BaziText",n.Bazi)}}function g(e,t){if(1&e&&(l.Zb(0,"ion-item",11),l.Xb(1,"app-guaview",12),l.Yb()),2&e){var n=l.jc();l.Mb(1),l.oc("Config",n.Config)("GuaText",n.Gua)}}function f(e,t){if(1&e&&l.Xb(0,"ion-img",13),2&e){var n=l.jc();l.oc("src",n.Img)}}var d,y=((d=function(){function e(t,n,i,s){_classCallCheck(this,e),this.settings=t,this.alertController=n,this.route=i,this.location=s,this.smallSymbol=!1,this.Bazi=null,this.Gua=null}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.settings.WaitInit();case 2:this.guaconfig=Object(c.b)(this.settings.Gua),this.baziconfig=Object(c.b)(this.settings.Bazi),this.route.params.subscribe((function(e){var n=JSON.parse(e.arg);n&&void 0!==n.ben?t.Gua=n:n&&void 0!==n.male?t.Bazi=n:n&&void 0!==n.img&&(t.Img=atob(n.img),console.log("arg",t.Img))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"ChangSymbol",value:function(){!1===this.smallSymbol?(this.guaconfig.shensha=4,this.guaconfig.symbol=1,this.baziconfig.shensha=4):(this.guaconfig=Object(c.b)(this.settings.Gua),this.baziconfig=Object(c.b)(this.settings.Bazi)),this.smallSymbol=!this.smallSymbol,this.guaview&&this.guaview.Reflash(this.guaconfig),this.baziview&&this.baziview.Reflash(this.baziconfig)}},{key:"GoBack",value:function(){this.location.back()}},{key:"Setting",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i,s,a,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.settings.ForumSetting,n=!1,e.next=4,this.alertController.create({header:"\u663e\u793a\u504f\u597d",inputs:[{name:"showimg",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u56fe\u7247",value:1,checked:t.showimg},{name:"vip",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u5366\u4f8b",value:2,checked:t.showgua},{name:"huahe",type:"checkbox",label:"\u663e\u793a/\u9690\u85cf \u547d\u4f8b",value:3,checked:t.showbazi},{name:"bbs",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u56fe\u7247",value:4,checked:!t.imgOut},{name:"liuyao",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u5366\u4f8b",value:5,checked:!t.guaOut},{name:"bazi",type:"checkbox",label:"\u8d34\u5185\u663e\u793a\u547d\u4f8b",value:6,checked:!t.baziOut}],buttons:[{text:"\u786e\u5b9a",handler:function(){n=!0}},{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:function(){}}]});case 4:return i=e.sent,e.next=7,i.present();case 7:return e.next=9,i.onWillDismiss();case 9:if(s=e.sent,a=s.data,n){e.next=13;break}return e.abrupt("return");case 13:h={showimg:a.values.includes(1),showgua:a.values.includes(2),showbazi:a.values.includes(3),imgOut:!a.values.includes(4),guaOut:!a.values.includes(5),baziOut:!a.values.includes(6)},this.settings.ForumSetting=h,this.presentAlert("\u66f4\u6539\u663e\u793a\u504f\u597d",null,"\u60a8\u7684\u663e\u793a\u504f\u597d\u5df2\u66f4\u6539\uff0c\u8bf7\u8fd4\u56de\u8bba\u575b\u9996\u9875\u5e76\u5237\u65b0\uff0c\u4f7f\u504f\u597d\u751f\u6548\u3002");case 15:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e,t,n){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.alertController.create({header:e||"\u9519\u8bef",subHeader:t||"",message:n,buttons:["\u786e\u5b9a"]});case 2:return s=i.sent,i.next=5,s.present();case 5:case"end":return i.stop()}}),i,this)})))}},{key:"Config",get:function(){return this.HasGua?this.guaconfig:this.HasBazi?this.baziconfig:null}},{key:"HasGua",get:function(){return!!this.Gua}},{key:"HasBazi",get:function(){return!!this.Bazi}}]),e}()).\u0275fac=function(e){return new(e||d)(l.Wb(c.a),l.Wb(h.b),l.Wb(a.a),l.Wb(i.f))},d.\u0275cmp=l.Qb({type:d,selectors:[["app-panfuviewer"]],viewQuery:function(e,t){var n;1&e&&(l.Ac(u.a,!0),l.Ac(o.a,!0)),2&e&&(l.qc(n=l.ic())&&(t.baziview=n.first),l.qc(n=l.ic())&&(t.guaview=n.first))},decls:23,vars:3,consts:[["color","primary"],["slot","start"],["defaulthref","","text","\u8fd4\u56de"],["slot","end"],[3,"click"],["name","md-options"],[3,"Config","BaziText",4,"ngIf"],["lines","none",4,"ngIf"],[3,"src",4,"ngIf"],["name","settings"],[3,"Config","BaziText"],["lines","none"],[3,"Config","GuaText"],[3,"src"]],template:function(e,t){1&e&&(l.Zb(0,"ion-header"),l.Zb(1,"ion-toolbar",0),l.Zb(2,"ion-buttons",1),l.Xb(3,"ion-back-button",2),l.Yb(),l.Zb(4,"ion-title"),l.xc(5,"\u76d8\u7b26"),l.Yb(),l.Zb(6,"ion-buttons",3),l.Zb(7,"ion-button",4),l.hc("click",(function(){return t.ChangSymbol()})),l.Xb(8,"ion-icon",5),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Zb(9,"ion-content"),l.wc(10,b,1,2,"app-baziview",6),l.wc(11,g,2,2,"ion-item",7),l.wc(12,f,1,1,"ion-img",8),l.Yb(),l.Zb(13,"ion-footer"),l.Zb(14,"ion-toolbar"),l.Zb(15,"ion-buttons",1),l.Zb(16,"ion-button",4),l.hc("click",(function(){return t.Setting()})),l.Xb(17,"ion-icon",9),l.Zb(18,"ion-text"),l.xc(19,"\u8bbe\u7f6e"),l.Yb(),l.Yb(),l.Yb(),l.Zb(20,"ion-buttons",3),l.Zb(21,"ion-button",4),l.hc("click",(function(){return t.GoBack()})),l.xc(22,"\u8fd4\u56de"),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&e&&(l.Mb(10),l.oc("ngIf",t.HasBazi),l.Mb(1),l.oc("ngIf",t.HasGua),l.Mb(1),l.oc("ngIf",t.Img))},directives:[h.s,h.Y,h.k,h.g,h.h,h.W,h.j,h.t,h.o,i.j,h.q,h.T,u.a,h.w,o.a,h.u],styles:[""]}),d),v=n("uEAi"),m=n("n7QD");n.d(t,"PanfuviewerPageModule",(function(){return k}));var p,w=[{path:"",component:y}],k=((p=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ub({type:p}),p.\u0275inj=l.Tb({factory:function(e){return new(e||p)},imports:[[v.a,m.a,i.b,s.a,h.Z,a.i.forChild(w)]]}),p)}}]);