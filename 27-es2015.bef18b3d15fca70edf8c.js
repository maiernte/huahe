(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"+cLM":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("2QJI"),c=n("l+bK"),o=n("uq+3"),s=function(t){return t[t.DaYun=0]="DaYun",t[t.LiuNian=1]="LiuNian",t[t.XiaoYun=2]="XiaoYun",t}({});let a=(()=>{class t{constructor(e,n,i,c){this.Start=e,this.GZ=n,this.birthYear=i,this.type=c,this.type===s.DaYun&&(this.end=new Date(this.Start.getTime()+t.tenyear))}get Old(){return this.Start.getFullYear()-this.birthYear}get End(){return this.end}set End(t){this.end=t||this.end}get Year(){return this.Start.getFullYear()}}return t.oneday=864e5,t.oneyear=365.25*t.oneday,t.tenyear=10*t.oneyear,t})();class l{constructor(t,e){this.Birthday=t,this.Gender=e,this.bazi=c.b.calcBazi(this.Birthday.getFullYear(),this.Birthday.getMonth()+1,this.Birthday.getDate(),this.Birthday.getHours(),this.Birthday.getMinutes()),this.bazi.Y.Base=this.bazi.D,this.bazi.M.Base=this.bazi.D,this.bazi.D.Base=this.bazi.D,this.bazi.T.Base=this.bazi.D,this.initShenSha(),this.initDaYun()}get Y(){return this.bazi.Y}get M(){return this.bazi.M}get D(){return this.bazi.D}get T(){return this.bazi.T}get All(){return[this.bazi.Y,this.bazi.M,this.bazi.D,this.bazi.T]}get Direction(){return("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)}get MingGong(){if(this.minggong)return this.minggong;var t=this.M.Zhi.Index+1+this.T.Zhi.Index+1,e=t<14?14-t:26-t;return new i.b([(this.Y.Gan.QiYueGan+((e-=1)-2+12)%12)%10,e])}get TaiYuan(){return new i.b([(this.M.Gan.Index+1)%10,(this.M.Zhi.Index+3)%12])}get WuXings(){if(this.wuxings)return this.wuxings;let t=[0,0,0,0,0];return t[this.Y.Gan.WuXing.Index]+=1,t[this.M.Gan.WuXing.Index]+=1,t[this.D.Gan.WuXing.Index]+=1,t[this.T.Gan.WuXing.Index]+=1,t[this.Y.Zhi.WuXing.Index]+=1,t[this.M.Zhi.WuXing.Index]+=1,t[this.D.Zhi.WuXing.Index]+=1,t[this.T.Zhi.WuXing.Index]+=1,this.wuxings=[{Name:"\u91d1",Num:t[0]},{Name:"\u6c34",Num:t[1]},{Name:"\u6728",Num:t[2]},{Name:"\u706b",Num:t[3]},{Name:"\u571f",Num:t[4]}],this.wuxings}get ShenSha(){return this.shenshas}get DaYun(){return this.dayun}CalcShenSha(t){let e=new Array;for(let n of this.ShenSha)1==n.Is(t)&&e.push(n.Name);return e.join("\u3001")}CalcLiuNian(t,e){let n=new Array;for(var o=t-1984;o<0;)o+=60;o%=60;let l=this.T.Index+(t-this.Birthday.getFullYear()+1)*this.Direction;l=(l+600)%60;for(let r=t;r<=e;r++){let t=new i.b(o);t.Base=this.D,t.ShenSha=this.CalcShenSha(t);let e=new i.b(l);e.Base=this.D,e.ShenSha=this.CalcShenSha(e);let h=c.b.getSolarTerms(r,2)[0],d=new a(h,t,this.Birthday.getFullYear(),s.LiuNian);d.GZ2=e,n.push(d),o+=1,o%=60,l+=1*this.Direction,l=(l+60)%60}return n}equal(t){return this.Gender==t.Gender&&this.Birthday.toString()==t.Birthday.toString()}initShenSha(){this.shenshas=new Array;let t=this.Y.Index,e=this.M.Index,n=this.D.Index,i=this.T.Index;this.shenshas.push(new o.a("\u5c06\u661f",[n])),this.shenshas.push(new o.a("\u7f8a\u5203",[n])),this.shenshas.push(new o.a("\u7984\u795e",[n])),this.shenshas.push(new o.a("\u534e\u76d6",[n])),this.shenshas.push(new o.a("\u6587\u660c",[n])),this.shenshas.push(new o.a("\u5b66\u5802",[n])),this.shenshas.push(new o.a("\u5929\u559c",[e])),this.shenshas.push(new o.a("\u5929\u533b",[e])),this.shenshas.push(new o.a("\u8d35\u4eba",[n])),this.shenshas.push(new o.a("\u9a7f\u9a6c",[t,n])),this.shenshas.push(new o.a("\u6843\u82b1",[t,n])),this.shenshas.push(new o.a("\u707e\u715e",[t,n])),this.shenshas.push(new o.a("\u52ab\u715e",[t,n])),this.shenshas.push(new o.a("\u65ec\u7a7a",[n])),this.shenshas.push(new o.a("\u9b41\u7f61",[t,e,n,i])),this.shenshas.push(new o.a("\u56db\u5e9f",[t,e,n,i])),this.shenshas.push(new o.a("\u5b64\u8fb0\u5be1\u5bbf",[t,e,n,i])),this.shenshas.push(new o.a("\u9634\u5dee\u9633\u9519",[n]));let c=new o.a("\u5929\u7f57\u5730\u7f51",[t,e,n,i]);c.Gender=this.Gender,this.shenshas.push(c)}initDaYun(){this.dayun=new Array;const t=this.qiDaYun(),e=this.Direction,n=(t.getFullYear(),this.Birthday.getFullYear(),new a(this.Birthday,this.M,this.Birthday.getFullYear(),s.DaYun));n.End=t,this.dayun.push(n);for(let c=0;c<10;c++){const n=new i.b((this.M.Index+(c+1)*e+60)%60);n.Base=this.bazi.D;const o=new Date(t.getTime()+315576e6*c),l=new a(o,n,this.Birthday.getFullYear(),s.DaYun);this.dayun.push(l)}}qiDaYun(){var t=c.b.findNextJieQi(this.Birthday,("m"==this.Gender?1:-1)*(this.Y.Zhi.Index%2==0?1:-1)),e=Math.abs(t.getTime()-this.Birthday.getTime())/6e4*2;return new Date(this.Birthday.getTime()+36e5*e)}}},EUVb:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),c=n("3Pt+"),o=n("tyNb"),s=n("c7TG"),a=n("Y6BA"),l=n("fXoL"),r=n("mrSG"),h=n("l+bK");function d(t,e){if(1&t&&(l.dc(0,"ion-select-option",12),l.Jc(1),l.cc()),2&t){const t=e.$implicit;l.vc("value",e.index),l.Nb(1),l.Lc("",t,"\u6708")}}function u(t,e){if(1&t&&(l.dc(0,"ion-select-option",12),l.Jc(1),l.cc()),2&t){const t=e.$implicit;l.vc("value",e.index),l.Nb(1),l.Kc(t)}}let g=(()=>{class t{constructor(t){this.modalCtrl=t}close(){this.modalCtrl.dismiss({result:this.NlSearch.Result})}get Year(){return this.year}set Year(t){this.year=t}get CurrentYear(){return new Date(Date.now()).getFullYear()}searchNL(){const t=this.NlSearch.Year;let e=parseInt(this.NlSearch.Month.toString(),10)+1;const n=parseInt(this.NlSearch.Date.toString(),10)+1;let i="";!0===this.NlSearch.Leap&&(e*=-1,i="\u95f0"),console.log("search ..",t,e,n);const c=h.b.SearchNongli(t,e,n);null!=c?(this.NlSearch.Result=c,this.NlSearch.ResultTX=c.toChinaStr()):(this.NlSearch.ResultTX="\u627e\u4e0d\u5230\u519c\u5386 "+this.NlSearch.Year+"\u5e74 "+i+h.b.M_ChineseMonthNames[this.NlSearch.Month]+"\u6708 "+h.b.M_DayNames[this.NlSearch.Date],this.NlSearch.Result=null)}ngOnInit(){const t=new Date(Date.now());this.NlSearch={Year:t.getFullYear(),MonthOptions:h.b.M_ChineseMonthNames,DateOptions:h.b.M_DayNames,Month:0,Date:0,Leap:!1,Result:null,ResultTX:""}}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(s.ab))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-searchnoli"]],decls:31,vars:8,consts:[["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],["position","floating"],["type","number","max","2010","min","1640",3,"placeholder","ngModel","ngModelChange"],["placeholder","\u6b63\u6708","cancelText","\u53d6\u6d88","okText","\u786e\u5b9a",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","\u521d\u4e00","cancelText","\u53d6\u6d88","okText","\u786e\u5b9a",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["slot","start",3,"click"],[1,"ion-text-wrap"],[3,"value"]],template:function(t,e){1&t&&(l.dc(0,"ion-header"),l.dc(1,"ion-toolbar",0),l.dc(2,"ion-buttons",1),l.dc(3,"ion-button",2),l.lc("click",(function(){return e.close()})),l.Zb(4,"ion-icon",3),l.cc(),l.cc(),l.dc(5,"ion-title"),l.Jc(6,"\u519c\u5386\u8f6c\u516c\u5386"),l.cc(),l.cc(),l.cc(),l.dc(7,"ion-content"),l.dc(8,"ion-item"),l.dc(9,"ion-label",4),l.Jc(10,"\u5e74\u4efd(1640 ~ 20100)"),l.cc(),l.dc(11,"ion-input",5),l.lc("ngModelChange",(function(t){return e.NlSearch.Year=t})),l.cc(),l.cc(),l.dc(12,"ion-item"),l.dc(13,"ion-label"),l.Jc(14,"\u6708\u4efd"),l.cc(),l.dc(15,"ion-select",6),l.lc("ngModelChange",(function(t){return e.NlSearch.Month=t})),l.Hc(16,d,2,2,"ion-select-option",7),l.cc(),l.cc(),l.dc(17,"ion-item"),l.dc(18,"ion-label"),l.Jc(19,"\u65e5\u5b50"),l.cc(),l.dc(20,"ion-select",8),l.lc("ngModelChange",(function(t){return e.NlSearch.Date=t})),l.Hc(21,u,2,2,"ion-select-option",7),l.cc(),l.cc(),l.dc(22,"ion-item"),l.dc(23,"ion-label"),l.Jc(24,"\u95f0\u6708"),l.cc(),l.dc(25,"ion-toggle",9),l.lc("ngModelChange",(function(t){return e.NlSearch.Leap=t})),l.cc(),l.cc(),l.dc(26,"ion-item"),l.dc(27,"ion-button",10),l.lc("click",(function(){return e.searchNL()})),l.Jc(28,"\u8ba1\u7b97"),l.cc(),l.dc(29,"ion-label",11),l.Jc(30),l.cc(),l.cc(),l.cc()),2&t&&(l.Nb(11),l.vc("placeholder",e.CurrentYear)("ngModel",e.NlSearch.Year),l.Nb(4),l.vc("ngModel",e.NlSearch.Month),l.Nb(1),l.vc("ngForOf",e.NlSearch.MonthOptions),l.Nb(4),l.vc("ngModel",e.NlSearch.Date),l.Nb(1),l.vc("ngForOf",e.NlSearch.DateOptions),l.Nb(4),l.vc("ngModel",e.NlSearch.Leap),l.Nb(5),l.Lc("\u67e5\u8be2\u7ed3\u679c\uff1a",e.NlSearch.ResultTX,""))},directives:[s.s,s.W,s.i,s.h,s.t,s.U,s.m,s.w,s.C,s.v,s.bb,c.f,c.g,s.P,s.fb,i.i,s.V,s.c,s.Q],styles:[""]}),t})();var b=n("LTmD");function p(t,e){1&t&&(l.dc(0,"ion-header"),l.dc(1,"ion-toolbar"),l.dc(2,"ion-buttons",10),l.Zb(3,"ion-menu-button"),l.cc(),l.dc(4,"ion-title"),l.Jc(5,"\u5e74\u5386"),l.cc(),l.cc(),l.cc())}function f(t,e){if(1&t&&(l.dc(0,"div",29),l.Jc(1),l.cc()),2&t){const t=l.oc().$implicit;l.Nb(1),l.Kc(t.GZdate)}}function m(t,e){if(1&t){const t=l.ec();l.dc(0,"div",27),l.lc("click",(function(){l.Cc(t);const n=e.$implicit;return l.oc(2).changeDate(n)})),l.dc(1,"div"),l.Jc(2),l.cc(),l.dc(3,"div"),l.Jc(4),l.cc(),l.Hc(5,f,2,1,"div",28),l.cc()}if(2&t){const t=e.$implicit,n=l.oc(2);l.Qb("xmonth",t.Month!=n.Month)("active",t.Date==n.Date&&t.Month==n.Month)("jieqi",!!t.JQname),l.Nb(2),l.Kc(t.Display),l.Nb(2),l.Kc(t.DisplayChi),l.Nb(1),l.vc("ngIf",n.ShowGZ)}}function y(t,e){if(1&t&&(l.dc(0,"div",6),l.Hc(1,m,6,9,"div",26),l.cc()),2&t){const t=e.$implicit;l.Nb(1),l.vc("ngForOf",t.Dates)}}class v{constructor(){this.Dates=[]}}let D=(()=>{class t{constructor(t,e){this.modalController=t,this.settings=e,this.Weeks=[],this.searchModel=!1,this.inited=!1}get IsWeb(){return"web"===a.b}get DateGanZhi(){return`${this.tyDate.GZyear}\u5e74 ${this.tyDate.GZmonth}\u6708 ${this.tyDate.GZdate}\u65e5`}get NongLi(){return`${this.tyDate.GZyear}\u5e74 ${this.tyDate.NLleap}${this.tyDate.NLmonth}\u6708 ${this.tyDate.NLdate}\u65e5`}get SelectedDate(){return this.selectedDate}set SelectedDate(t){if(!1===this.inited||""===t)return;this.selectedDate=t;const e=new Date(Date.parse(t));e.getFullYear()===this.Year&&e.getMonth()+1===this.Month&&e.getDate()===this.Date||this.initWeeks(e.getFullYear(),e.getMonth()+1,e.getDate())}get ShowGZ(){return this.settings.Calendar.showGanZhi}set ShowGZ(t){this.settings.Calendar.showGanZhi=t,this.settings.Calendar=this.settings.Calendar}get TyDate(){return this.tyDate}set TyDate(t){this.tyDate=t,this.initDetail()}calcFirstDayInCalendarTable(t,e){const n=new Date(t,e-1,1);let i=n.getDay();return i=0===i?7:i,h.b.addDays(-1*i,n)}showModal(){return Object(r.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:g});yield t.present(),yield t.onWillDismiss()}))}initWeeks(t,e,n){let i=this.calcFirstDayInCalendarTable(t,e);const c=[];for(let s=0;s<6;s++){const t=new v;c.push(t);for(let c=0;c<7;c++){const c=new h.a(i);t.Dates.push(c),i=h.b.addDays(1,i),c.Month===e&&c.Date===n&&(this.TyDate=c)}}this.Weeks=c,this.Month=e,this.Date=n,this.Year=t;const o=new Date(t,e-1,n);this.SelectedDate=o.toDatabaseStr()}initDetail(){const t=this.tyDate.JianChu;this.Good=t.Good,this.Bad=t.Bad,this.Jianchu=t.Titel+": "+t.Mean;let e="";e+=!0===this.tyDate.IsSuiPo?" \u5c81\u7834":"",e+=!0===this.tyDate.IsYuePo?" \u6708\u7834":"",e+=!0===this.tyDate.IsShangSuo?" \u4e0a\u6714":"",e+=!0===this.tyDate.IsYangGong13?" \u6768\u516c\u5341\u4e09\u5fcc":"",this.BadDay=e.trim()}changeDate(t){const e=new Date(Date.now()),n=t?t.Year:e.getFullYear(),i=t?t.Month:e.getMonth()+1,c=t?t.Date:e.getDate();i===this.Month&&t?(this.Date=c,this.TyDate=t,this.SelectedDate=t.date.toDatabaseStr()):this.initWeeks(n,i,c)}ngOnInit(){const t=new Date(Date.now());this.initWeeks(t.getFullYear(),t.getMonth()+1,t.getDate()),this.inited=!0}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(s.ab),l.Yb(b.a))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-wannianli"]],decls:77,vars:13,consts:[[4,"ngIf"],[2,"background-image","url('assets/img/back_15.jpg')"],["fixed",""],[1,"ui","attached","top","segment"],[1,"ui","top","attached","blue","large","label"],[1,"ui","attached","segment"],[1,"ui","equal","width","grid"],[1,"weekend","th","cell","column"],[1,"weekday","th","cell","column"],["class","ui equal width grid",4,"ngFor","ngForOf"],["slot","start"],["color","primary"],["slot","start","color","primary",1,"ion-no-padding"],["side","end"],["color","secondary"],["slot","start","color","warning",1,"ion-no-padding"],["color","warning"],["side","end",1,"ion-text-wrap"],[3,"hidden"],["slot","start","color","danger",1,"ion-no-padding"],["color","secondary",1,"ion-text-wrap"],[3,"ngModel","ngModelChange"],["slot","end"],[3,"click"],["displayFormat","YYYY\u5e74MM\u6708DD\u65e5","cancelText","\u53d6\u6d88","doneText","\u786e\u5b9a",3,"ngModel","ngModelChange"],["lines","none"],["class","cell column month td",3,"xmonth","active","jieqi","click",4,"ngFor","ngForOf"],[1,"cell","column","month","td",3,"click"],["style","color: gray;",4,"ngIf"],[2,"color","gray"]],template:function(t,e){1&t&&(l.Hc(0,p,6,0,"ion-header",0),l.dc(1,"ion-content",1),l.dc(2,"ion-grid",2),l.dc(3,"div",3),l.dc(4,"div",4),l.Jc(5),l.Zb(6,"br"),l.Jc(7,"\xa0 "),l.cc(),l.cc(),l.dc(8,"div",5),l.dc(9,"div",6),l.dc(10,"div",7),l.Jc(11,"\u661f\u671f\u5929"),l.Zb(12,"br"),l.Jc(13,"\xa0"),l.cc(),l.dc(14,"div",8),l.Jc(15,"\u661f\u671f\u4e00"),l.Zb(16,"div"),l.cc(),l.dc(17,"div",8),l.Jc(18,"\u661f\u671f\u4e8c"),l.Zb(19,"div"),l.cc(),l.dc(20,"div",8),l.Jc(21,"\u661f\u671f\u4e09"),l.Zb(22,"div"),l.cc(),l.dc(23,"div",8),l.Jc(24,"\u661f\u671f\u56db"),l.Zb(25,"div"),l.cc(),l.dc(26,"div",8),l.Jc(27,"\u661f\u671f\u4e94"),l.Zb(28,"div"),l.cc(),l.dc(29,"div",7),l.Jc(30,"\u661f\u671f\u516d"),l.Zb(31,"div"),l.cc(),l.cc(),l.cc(),l.dc(32,"div",5),l.Hc(33,y,2,1,"div",9),l.cc(),l.dc(34,"ion-list"),l.dc(35,"ion-item"),l.dc(36,"ion-label",10),l.dc(37,"ion-text",11),l.dc(38,"p"),l.Jc(39),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(40,"ion-item"),l.dc(41,"ion-note",12),l.dc(42,"ion-text",11),l.dc(43,"h3"),l.Jc(44,"\u5b9c"),l.cc(),l.cc(),l.cc(),l.dc(45,"ion-label",13),l.dc(46,"ion-text",14),l.dc(47,"p"),l.Jc(48),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(49,"ion-item"),l.dc(50,"ion-note",15),l.dc(51,"ion-text",16),l.dc(52,"h3"),l.Jc(53,"\u5fcc"),l.cc(),l.cc(),l.cc(),l.dc(54,"ion-label",17),l.dc(55,"ion-text",14),l.dc(56,"p"),l.Jc(57),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(58,"ion-item",18),l.dc(59,"ion-note",19),l.Jc(60),l.cc(),l.dc(61,"ion-label"),l.dc(62,"ion-text",20),l.dc(63,"p"),l.Jc(64,"\u51e1\u5c81\u7834, \u6708\u7834, \u4e0a\u6714, \u6768\u516c\u5341\u4e09\u5fcc\u7b49\u8bf8\u65e5, \u5927\u4e8b\u4e0d\u5b9c!"),l.cc(),l.cc(),l.cc(),l.cc(),l.cc(),l.dc(65,"ion-item"),l.dc(66,"ion-checkbox",21),l.lc("ngModelChange",(function(t){return e.ShowGZ=t})),l.cc(),l.dc(67,"ion-label"),l.Jc(68,"\u663e\u793a\u65e5\u5e72\u652f"),l.cc(),l.dc(69,"ion-buttons",22),l.dc(70,"ion-button",23),l.lc("click",(function(){return e.showModal()})),l.Jc(71,"\u519c\u5386\u53cd\u67e5"),l.cc(),l.cc(),l.cc(),l.dc(72,"ion-item"),l.dc(73,"ion-label"),l.Jc(74,"\u8df3\u8f6c\u5230\uff1a"),l.cc(),l.dc(75,"ion-datetime",24),l.lc("ngModelChange",(function(t){return e.SelectedDate=t})),l.cc(),l.cc(),l.Zb(76,"ion-item",25),l.cc(),l.cc()),2&t&&(l.vc("ngIf",!e.IsWeb),l.Nb(5),l.Nc(" ",e.Year,"\u5e74",e.Month,"\u6708",e.Date,"\u65e5\xa0--\xa0 ",e.DateGanZhi," "),l.Nb(28),l.vc("ngForOf",e.Weeks),l.Nb(6),l.Lc("\u519c\u5386\uff1a",e.NongLi,""),l.Nb(9),l.Kc(e.Jianchu),l.Nb(9),l.Kc(e.Bad),l.Nb(1),l.vc("hidden",""==e.BadDay),l.Nb(2),l.Lc(" ",e.BadDay," "),l.Nb(6),l.vc("ngModel",e.ShowGZ),l.Nb(9),l.vc("ngModel",e.SelectedDate))},directives:[i.j,s.m,s.r,i.i,s.D,s.w,s.C,s.S,s.G,s.j,s.c,c.f,c.g,s.i,s.h,s.n,s.fb,s.s,s.W,s.F,s.U],styles:[".column.th.cell[_ngcontent-%COMP%]{text-align:center;padding:0;border:1px solid #a9a9a9}.th.cell.weekday[_ngcontent-%COMP%]{background-color:#cdc8b1}.th.cell.weekend[_ngcontent-%COMP%]{background-color:#d2691e}.month.column.cell.td[_ngcontent-%COMP%]{text-align:center;padding:0;border:1px solid #a9a9a9}.column.cell.month[_ngcontent-%COMP%]{background-color:#eee9e9;color:#000}.column.cell.jieqi[_ngcontent-%COMP%]{background-color:#cdc8b1;color:#000}.column.cell.xmonth[_ngcontent-%COMP%]{background-color:snow;color:grey}.column.cell.active[_ngcontent-%COMP%]{background-color:#6495ed;color:#000}ion-grid[_ngcontent-%COMP%]{--ion-grid-width:540px}"]}),t})();var w=n("LvB5"),C=n("B8lH"),S=n("HULg"),N=n("ylIl"),M=n("mo90");function Y(t,e){if(1&t){const t=l.ec();l.dc(0,"ion-header"),l.dc(1,"ion-toolbar"),l.dc(2,"ion-buttons",4),l.Zb(3,"ion-menu-button"),l.cc(),l.dc(4,"ion-title"),l.Jc(5,"\u516d\u723b"),l.cc(),l.dc(6,"ion-buttons",5),l.dc(7,"ion-button",6),l.lc("click",(function(){return l.Cc(t),l.oc().showPaiguaModal()})),l.Zb(8,"ion-icon",7),l.cc(),l.dc(9,"ion-button",6),l.lc("click",(function(){return l.Cc(t),l.oc().showSettingModal()})),l.Zb(10,"ion-icon",8),l.cc(),l.dc(11,"ion-button",9),l.lc("click",(function(){return l.Cc(t),l.oc().SaveGua()})),l.Zb(12,"ion-icon",10),l.cc(),l.cc(),l.cc(),l.cc()}if(2&t){const t=l.oc();l.Nb(11),l.vc("disabled",!t.HasGua)}}function x(t,e){if(1&t){const t=l.ec();l.dc(0,"ion-item",11),l.dc(1,"ion-buttons"),l.dc(2,"ion-button",6),l.lc("click",(function(){return l.Cc(t),l.oc().showPaiguaModal()})),l.Zb(3,"ion-icon",12),l.Jc(4," \u6392\u5366 "),l.cc(),l.dc(5,"ion-button",6),l.lc("click",(function(){return l.Cc(t),l.oc().showSettingModal()})),l.Zb(6,"ion-icon",13),l.Jc(7," \u8bbe\u7f6e "),l.cc(),l.dc(8,"ion-button",9),l.lc("click",(function(){return l.Cc(t),l.oc().SaveGua()})),l.Zb(9,"ion-icon",14),l.Jc(10," \u4fdd\u5b58 "),l.cc(),l.cc(),l.cc()}if(2&t){const t=l.oc();l.Nb(8),l.vc("disabled",!t.HasGua)}}n("0eVs");const I=function(t){return{display:t}};function Z(t,e){if(1&t&&(l.dc(0,"div",15),l.dc(1,"div",16),l.Zb(2,"app-guaview",17),l.cc(),l.cc()),2&t){const t=l.oc();l.Nb(1),l.vc("ngStyle",l.xc(3,I,t.Align)),l.Nb(1),l.vc("Config",t.Config)("GuaText",t.Gua)}}let k=(()=>{class t{constructor(t,e,n,i){this.modalController=t,this.alertController=e,this.setting=n,this.dbservice=i,this.smallSymbol=!1}get IsWeb(){return"web"===a.b}get Align(){return this.setting.DeviceWidth>500?"inline-block":"inline"}get Config(){return this.config||(this.config=Object(b.b)(this.setting.Gua)),this.config}set Config(t){t&&(this.config=t)}get Gua(){return this.gua}get HasGua(){return!!this.Gua}ngOnInit(){t.last&&(this.gua=t.last)}SaveGua(){return Object(r.b)(this,void 0,void 0,(function*(){const t=((yield this.dbservice.getNodes())||[]).filter(t=>32===t.type);if(!t||0===t.length)return void this.presentAlert("\u65e0\u6cd5\u4fdd\u5b58",null,"\u8bf7\u5230\u6848\u4f8b\u9875\u9762\uff0c\u521b\u5efa\u81f3\u5c11\u4e00\u4e2a\u201c\u6587\u4ef6\u5939\u201d\u7c7b\u578b\u7684\u76ee\u5f55\u3002");const e=yield this.modalController.create({component:M.a,componentProps:{Titel:"\u9009\u62e9\u65b0\u76ee\u5f55",SelectDocument:!0,NodeID:""}});yield e.present();const{data:n}=yield e.onWillDismiss();console.log("select node",n),n&&n.nodeid&&this.dbservice.CreateRecord(n.nodeid,this.gua.question,8,JSON.stringify(this.gua))}))}showPaiguaModal(){return Object(r.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:w.a});yield e.present();const{data:n}=yield e.onWillDismiss();n.result?(t.last=n.result,this.gua=n.result):this.gua=null}))}showSettingModal(){return Object(r.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:C.a,componentProps:{SettingComponent:"gua",Config:Object(b.b)(this.Config)}});yield t.present();const{data:e}=yield t.onWillDismiss();Object(b.c)({},e.result)||!Object(b.c)(this.Config,e.result)&&(this.Config=Object(b.b)(e.result),this.guaview&&this.guaview.Reflash(this.Config))}))}ChangSymbol(){const t=Object(b.b)(this.config);!1===this.smallSymbol&&(t.shensha=4,t.symbol=1),this.smallSymbol=!this.smallSymbol,this.guaview.Reflash(t)}presentAlert(t,e,n){return Object(r.b)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:t||"\u9519\u8bef",subHeader:e||"",message:n,buttons:["\u786e\u5b9a"]});yield i.present()}))}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(s.ab),l.Yb(s.b),l.Yb(b.a),l.Yb(S.a))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-paigua"]],viewQuery:function(t,e){var n;1&t&&l.Oc(N.a,!0),2&t&&l.yc(n=l.mc())&&(e.guaview=n.first)},decls:4,vars:3,consts:[[4,"ngIf"],[2,"margin-bottom","10px"],["lines","none",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","add-circle-outline"],["slot","icon-only","name","settings"],[3,"disabled","click"],["slot","icon-only","name","save"],["lines","none"],["name","add-circle-outline"],["name","settings"],["name","save"],[2,"text-align","center"],[2,"margin-bottom","3px",3,"ngStyle"],[3,"Config","GuaText"]],template:function(t,e){1&t&&(l.Hc(0,Y,13,1,"ion-header",0),l.dc(1,"ion-content",1),l.Hc(2,x,11,1,"ion-item",2),l.Hc(3,Z,3,5,"div",3),l.cc()),2&t&&(l.vc("ngIf",!e.IsWeb),l.Nb(2),l.vc("ngIf",e.IsWeb),l.Nb(1),l.vc("ngIf",e.HasGua))},directives:[i.j,s.m,s.s,s.W,s.i,s.F,s.U,s.h,s.t,s.w,i.k,N.a],styles:[""]}),t})();var G=n("SRjL"),J=n("gTpY");function O(t,e){if(1&t){const t=l.ec();l.dc(0,"ion-header"),l.dc(1,"ion-toolbar",4),l.dc(2,"ion-buttons",5),l.Zb(3,"ion-menu-button"),l.cc(),l.dc(4,"ion-title"),l.Jc(5,"\u516b\u5b57"),l.cc(),l.dc(6,"ion-buttons",6),l.dc(7,"ion-button",7),l.lc("click",(function(){return l.Cc(t),l.oc().showPaipanModal()})),l.Zb(8,"ion-icon",8),l.cc(),l.dc(9,"ion-button",7),l.lc("click",(function(){return l.Cc(t),l.oc().showSettingModal()})),l.Zb(10,"ion-icon",9),l.cc(),l.dc(11,"ion-button",10),l.lc("click",(function(){return l.Cc(t),l.oc().SaveBazi()})),l.Zb(12,"ion-icon",11),l.cc(),l.cc(),l.cc(),l.cc()}if(2&t){const t=l.oc();l.Nb(11),l.vc("disabled",!t.HasBazi)}}function z(t,e){if(1&t){const t=l.ec();l.dc(0,"ion-item",12),l.dc(1,"ion-buttons"),l.dc(2,"ion-button",7),l.lc("click",(function(){return l.Cc(t),l.oc().showPaipanModal()})),l.Zb(3,"ion-icon",13),l.Jc(4," \u6392\u76d8 "),l.cc(),l.dc(5,"ion-button",7),l.lc("click",(function(){return l.Cc(t),l.oc().showSettingModal()})),l.Zb(6,"ion-icon",14),l.Jc(7," \u8bbe\u7f6e "),l.cc(),l.dc(8,"ion-button",10),l.lc("click",(function(){return l.Cc(t),l.oc().SaveBazi()})),l.Zb(9,"ion-icon",15),l.Jc(10," \u4fdd\u5b58 "),l.cc(),l.cc(),l.cc()}if(2&t){const t=l.oc();l.Nb(8),l.vc("disabled",!t.HasBazi)}}const B=function(t){return{display:t}};function T(t,e){if(1&t&&(l.dc(0,"div",16),l.dc(1,"div",17),l.Zb(2,"app-baziview",18),l.cc(),l.cc()),2&t){const t=l.oc();l.Nb(1),l.vc("ngStyle",l.xc(3,B,t.Align)),l.Nb(1),l.vc("Config",t.Config)("BaziText",t.Bazi)}}let W=(()=>{class t{constructor(t,e,n,i){this.modalController=t,this.alertController=e,this.dbservice=n,this.setting=i}get IsWeb(){return"web"===a.b}get Align(){return this.setting.DeviceWidth>500?"inline-block":"inline"}get Config(){return this.config||(this.config=Object(b.b)(this.setting.Bazi)),this.config}set Config(t){t&&(this.config=t)}get Bazi(){return this.bazi}get HasBazi(){return!!this.bazi}ngOnInit(){t.last&&(this.bazi=t.last)}SaveBazi(){return Object(r.b)(this,void 0,void 0,(function*(){const t=((yield this.dbservice.getNodes())||[]).filter(t=>32===t.type);if(!t||0===t.length)return void this.presentAlert("\u65e0\u6cd5\u4fdd\u5b58",null,"\u8bf7\u5230\u6848\u4f8b\u9875\u9762\uff0c\u521b\u5efa\u81f3\u5c11\u4e00\u4e2a\u201c\u6587\u4ef6\u5939\u201d\u7c7b\u578b\u7684\u76ee\u5f55\u3002");const e=yield this.modalController.create({component:M.a,componentProps:{Titel:"\u9009\u62e9\u65b0\u76ee\u5f55",SelectDocument:!0,NodeID:""}});yield e.present();const{data:n}=yield e.onWillDismiss();n&&n.nodeid&&this.dbservice.CreateRecord(n.nodeid,this.bazi.person,16,JSON.stringify(this.bazi))}))}showPaipanModal(){return Object(r.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:G.a});yield e.present();const{data:n}=yield e.onWillDismiss();n.result?(t.last=n.result,this.bazi=n.result):this.bazi=null}))}showSettingModal(){return Object(r.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:C.a,componentProps:{SettingComponent:"bazi",Config:Object(b.b)(this.Config)}});yield t.present();const{data:e}=yield t.onWillDismiss();Object(b.c)({},e.result)||!Object(b.c)(this.Config,e.result)&&(this.Config=Object(b.b)(e.result),this.baziview&&this.baziview.Reflash(this.Config))}))}presentAlert(t,e,n){return Object(r.b)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:t||"\u9519\u8bef",subHeader:e||"",message:n,buttons:["\u786e\u5b9a"]});yield i.present()}))}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(s.ab),l.Yb(s.b),l.Yb(S.a),l.Yb(b.a))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-paibazi"]],viewQuery:function(t,e){var n;1&t&&l.Oc(J.a,!0),2&t&&l.yc(n=l.mc())&&(e.baziview=n.first)},decls:4,vars:3,consts:[[4,"ngIf"],[2,"margin-bottom","10px"],["lines","none",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["color","primary"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","add-circle-outline"],["slot","icon-only","name","settings"],[3,"disabled","click"],["slot","icon-only","name","save"],["lines","none"],["name","add-circle-outline"],["name","settings"],["name","save"],[2,"text-align","center"],[2,"margin-bottom","3px",3,"ngStyle"],[3,"Config","BaziText"]],template:function(t,e){1&t&&(l.Hc(0,O,13,1,"ion-header",0),l.dc(1,"ion-content",1),l.Hc(2,z,11,1,"ion-item",2),l.Hc(3,T,3,5,"div",3),l.cc()),2&t&&(l.vc("ngIf",!e.IsWeb),l.Nb(2),l.vc("ngIf",e.IsWeb),l.Nb(1),l.vc("ngIf",e.HasBazi))},directives:[i.j,s.m,s.s,s.W,s.i,s.F,s.U,s.h,s.t,s.w,i.k,J.a],styles:[""]}),t})();function j(t,e){1&t&&l.Zb(0,"app-wannianli")}function F(t,e){1&t&&l.Zb(0,"app-paigua")}function H(t,e){1&t&&l.Zb(0,"app-paibazi")}let P=(()=>{class t{constructor(t,e){this.router=t,this.route=e,this.ChildrenType={Calendar:"calendar",Gua:"gua",Bazi:"bazi"},this.Child=this.ChildrenType.Calendar,this.route.params.subscribe(t=>{this.Child=t.child||this.ChildrenType.Calendar})}ngOnInit(){}get IsWeb(){return"web"===a.b}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(o.g),l.Yb(o.a))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-paipan"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(l.dc(0,"ion-content"),l.Hc(1,j,1,0,"app-wannianli",0),l.Hc(2,F,1,0,"app-paigua",0),l.Hc(3,H,1,0,"app-paibazi",0),l.cc()),2&t&&(l.Nb(1),l.vc("ngIf",e.Child===e.ChildrenType.Calendar),l.Nb(1),l.vc("ngIf",e.Child===e.ChildrenType.Gua),l.Nb(1),l.vc("ngIf",e.Child===e.ChildrenType.Bazi))},directives:[s.m,i.j,D,k,W],styles:[""]}),t})();var L=n("Gfuc"),X=n("KPWP"),A=n("n7QD");let R=(()=>{class t{}return t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({factory:function(e){return new(e||t)},imports:[[L.a,X.a,A.a,i.b,c.c,s.X]]}),t})();var _=n("9UMr"),$=n("uEAi");let q=(()=>{class t{}return t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({factory:function(e){return new(e||t)},imports:[[_.a,X.a,$.a,i.b,c.c,s.X]]}),t})(),K=(()=>{class t{}return t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({factory:function(e){return new(e||t)},imports:[[i.b,c.c,s.X]]}),t})();n.d(e,"PaipanPageModule",(function(){return U}));const Q=[{path:"",component:P}];let U=(()=>{class t{}return t.\u0275mod=l.Wb({type:t}),t.\u0275inj=l.Vb({factory:function(e){return new(e||t)},imports:[[i.b,c.c,s.X,R,q,K,o.j.forChild(Q)]]}),t})()}}]);