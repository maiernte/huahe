(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{HQI1:function(t,i,c){"use strict";c.d(i,"a",(function(){return u}));var n=c("c7TG"),e=c("fXoL"),s=c("ofXK");function a(t,i){if(1&t){const t=e.fc();e.ec(0,"ion-item",3),e.mc("click",(function(){e.Bc(t);const c=i.$implicit;return e.pc(2).onSelect(c.value)})),e.ec(1,"ion-text"),e.Ic(2),e.dc(),e.dc()}if(2&t){const t=i.$implicit,c=e.pc(2);e.vc("color",t.value===c.currentOption?"light":""),e.Nb(2),e.Jc(t.name)}}function o(t,i){if(1&t&&(e.ec(0,"div"),e.Gc(1,a,3,2,"ion-item",2),e.dc()),2&t){const t=e.pc();e.Nb(1),e.vc("ngForOf",t.items)}}function r(t,i){if(1&t&&(e.ec(0,"ion-note"),e.Ic(1),e.dc()),2&t){const t=e.pc().$implicit;e.Nb(1),e.Kc(" ",t.name," ")}}function l(t,i){if(1&t&&(e.ec(0,"ion-item",6),e.Gc(1,r,2,1,"ion-note",0),e.ec(2,"ion-label",7),e.ec(3,"small"),e.ac(4,"ion-text",8),e.dc(),e.dc(),e.dc()),2&t){const t=i.$implicit;e.Nb(1),e.vc("ngIf",t.name),e.Nb(3),e.vc("innerHtml",t.value,e.Cc)}}function h(t,i){if(1&t&&(e.ec(0,"ion-list",4),e.Gc(1,l,5,2,"ion-item",5),e.dc()),2&t){const t=e.pc();e.Nb(1),e.vc("ngForOf",t.items)}}let u=(()=>{class t{constructor(t){this.popoverCtrl=t,this.toselect=!0}ngOnInit(){}onSelect(t){this.popoverCtrl.dismiss(t)}}return t.\u0275fac=function(i){return new(i||t)(e.Zb(n.fb))},t.\u0275cmp=e.Tb({type:t,selectors:[["app-optionpopover"]],inputs:{currentOption:"currentOption",items:"items",toselect:"toselect"},decls:2,vars:2,consts:[[4,"ngIf"],["class","ion-no-padding",4,"ngIf"],["button","",3,"color","click",4,"ngFor","ngForOf"],["button","",3,"color","click"],[1,"ion-no-padding"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",1,"ion-text-wrap"],[3,"innerHtml"]],template:function(t,i){1&t&&(e.Gc(0,o,2,1,"div",0),e.Gc(1,h,2,1,"ion-list",1)),2&t&&(e.vc("ngIf",i.toselect),e.Nb(1),e.vc("ngIf",!i.toselect))},directives:[s.j,s.i,n.x,n.T,n.E,n.D,n.H],styles:[""]}),t})()},gTpY:function(t,i,c){"use strict";c.d(i,"a",(function(){return $}));var n=c("mrSG"),e=c("c7TG"),s=c("+cLM"),a=(c("0eVs"),c("FiP+")),o=c("l+bK"),r=c("LTmD"),l=c("HQI1"),h=c("fXoL"),u=c("i/bi"),d=c("ofXK");function g(t,i){if(1&t&&(h.ec(0,"span"),h.Ic(1),h.dc()),2&t){const t=h.pc();h.Nb(1),h.Kc("\u771f\u592a\u9633\u65f6\uff1a",t.RealTime,"")}}function p(t,i){if(1&t&&(h.ec(0,"span"),h.Ic(1),h.dc()),2&t){const t=h.pc().$implicit;h.Nb(1),h.Jc(t.text)}}function b(t,i){if(1&t&&(h.ec(0,"span",20),h.Ic(1),h.dc()),2&t){const t=h.pc().$implicit;h.Nb(1),h.Jc(t.text)}}function f(t,i){if(1&t&&(h.ec(0,"ion-col",18),h.ec(1,"ion-text",9),h.Gc(2,p,2,1,"span",7),h.Gc(3,b,2,1,"span",19),h.dc(),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.Fc("color",t.color),h.Nb(1),h.vc("ngIf",!t.bz),h.Nb(1),h.vc("ngIf",t.bz)}}function m(t,i){if(1&t&&(h.ec(0,"ion-row",18),h.Gc(1,f,4,4,"ion-col",10),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.vc("ngForOf",t)}}function N(t,i){if(1&t&&(h.ec(0,"span"),h.Ic(1),h.dc()),2&t){const t=h.pc().$implicit;h.Nb(1),h.Jc(t.text)}}function v(t,i){if(1&t&&(h.ec(0,"span",20),h.Ic(1),h.dc()),2&t){const t=h.pc().$implicit;h.Nb(1),h.Jc(t.text)}}function G(t,i){if(1&t&&(h.ec(0,"ion-col",18),h.ec(1,"ion-text",9),h.Gc(2,N,2,1,"span",7),h.Gc(3,v,2,1,"span",19),h.dc(),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.Fc("color",t.color),h.Nb(1),h.vc("ngIf",!t.bz),h.Nb(1),h.vc("ngIf",t.bz)}}function S(t,i){if(1&t&&(h.ec(0,"ion-row",18),h.Gc(1,G,4,4,"ion-col",10),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.vc("ngForOf",t)}}function x(t,i){if(1&t&&(h.ec(0,"td"),h.Ic(1),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.Jc(t)}}function y(t,i){if(1&t&&(h.ec(0,"tr"),h.Gc(1,x,2,1,"td",12),h.dc()),2&t){const t=i.$implicit;h.Nb(1),h.vc("ngForOf",t)}}function C(t,i){if(1&t){const t=h.fc();h.ec(0,"div",21),h.ec(1,"div",22),h.Ic(2),h.dc(),h.ec(3,"div",23),h.mc("click",(function(){h.Bc(t);const c=i.index;return h.pc().SelectedDY=c})),h.ec(4,"div",24),h.Ic(5),h.dc(),h.ec(6,"div",25),h.Ic(7),h.dc(),h.dc(),h.ec(8,"div",22),h.Ic(9),h.dc(),h.ec(10,"div"),h.Ic(11),h.dc(),h.dc()}if(2&t){const t=i.$implicit,c=i.index,n=h.pc();h.Nb(2),h.Jc(t[1]),h.Nb(1),h.Fc("background-color",n.SelectedDY===c?"skyblue":"white"),h.Nb(2),h.Jc(t[2][0]),h.Nb(2),h.Jc(t[2][1]),h.Nb(2),h.Jc(t[3]),h.Nb(2),h.Jc(t[8])}}function z(t,i){if(1&t){const t=h.fc();h.ec(0,"tr"),h.ec(1,"td"),h.Ic(2),h.dc(),h.ec(3,"td"),h.Ic(4),h.dc(),h.ec(5,"td",23),h.mc("click",(function(c){h.Bc(t);const n=i.$implicit;return h.pc(2).ShowDetail(n,c)})),h.ec(6,"span",22),h.Ic(7),h.dc(),h.ec(8,"span",27),h.Ic(9),h.dc(),h.ec(10,"span",22),h.Ic(11),h.dc(),h.dc(),h.ec(12,"td",23),h.mc("click",(function(c){h.Bc(t);const n=i.$implicit;return h.pc(2).ShowDetail(n,c)})),h.ec(13,"span",22),h.Ic(14),h.dc(),h.ec(15,"span",27),h.Ic(16),h.dc(),h.ec(17,"span",22),h.Ic(18),h.dc(),h.dc(),h.dc()}if(2&t){const t=i.$implicit,c=i.index,n=h.pc().$implicit;h.Nb(2),h.Jc(t[0]),h.Nb(2),h.Jc(t[8]),h.Nb(3),h.Kc("(",t[1],")"),h.Nb(2),h.Jc(t[2]),h.Nb(2),h.Kc("(",t[3],")"),h.Nb(3),h.Kc("(",n.xiao[c][1],")"),h.Nb(2),h.Jc(n.xiao[c][2]),h.Nb(2),h.Kc("(",n.xiao[c][3],")")}}function I(t,i){if(1&t&&(h.ec(0,"sui-accordion",2),h.ec(1,"sui-accordion-panel",3),h.ec(2,"div",4),h.ac(3,"i",5),h.Ic(4),h.dc(),h.ec(5,"div",6),h.ec(6,"table",26),h.ec(7,"thead"),h.ec(8,"tr"),h.ec(9,"th"),h.Ic(10,"\u5e74\u4efd"),h.dc(),h.ec(11,"th"),h.Ic(12,"\u5c81\u6570"),h.dc(),h.ec(13,"th"),h.Ic(14,"\u6d41\u5e74"),h.dc(),h.ec(15,"th"),h.Ic(16,"\u5c0f\u8fd0"),h.dc(),h.dc(),h.dc(),h.ec(17,"tbody"),h.Gc(18,z,19,8,"tr",12),h.dc(),h.dc(),h.dc(),h.dc(),h.dc()),2&t){const t=i.$implicit;h.vc("closeOthers",!0),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Kc(" ",t.name," "),h.Nb(14),h.vc("ngForOf",t.liu)}}let $=(()=>{class t{constructor(t,i){this.toastController=t,this.popoverCtrl=i,this.ShowDayun=!1,this.ShowLiunian=!1,this.ShowXiaoyun=!1,this.selectedDayun=0,this.SelectedLiu=0,this.SelectedXiao=0,this.AllLiuNian=[]}ngOnInit(){this.initBaseInfo(),this.Reflash(null)}set Config(t){this.config=Object(r.b)(t)}get FontSize(){return`${this.config.fontsize}px`}get YuanJu(){return this.yuanju}get DayunName(){return this.dayunname}get SelectedDY(){return this.selectedDayun}set SelectedDY(t){this.selectedDayun=t;const i=this.bazi.DaYun[t];i.Start.getFullYear(),this.dayunname=`${i.GZ.Name}`}set BaziText(t){this.baziText=t}get BaziInText(){return`${this.bazi.Y.Name} / ${this.bazi.M.Name} / ${this.bazi.D.Name} / ${this.bazi.T.Name} `}Reflash(t){t&&(this.config=Object(r.b)(t)),this.initYuanju(""===this.RealTime?this.Birthday:this.RealTime),this.initShenShas(),this.SelectedDY=0,this.initDayuns()}ChangeDayun(t){return Object(n.b)(this,void 0,void 0,(function*(){this.SelectedDY=t;const i=this.bazi.DaYun[t-1].Start.toChinaStr(),c=this.bazi.DaYun[t-1].GZ.Name,n=yield this.toastController.create({message:`\u5927\u8fd0${c} \u5f00\u59cb\u4e8e ${i}`,duration:3e3});yield n.present()}))}ShowDetail(t,i){return Object(n.b)(this,void 0,void 0,(function*(){const c=`${this.bazi.Y.Gan.Name} ${this.bazi.M.Gan.Name} ${this.bazi.D.Gan.Name} ${this.bazi.T.Gan.Name}`,n=`${this.bazi.Y.Zhi.Name} ${this.bazi.M.Zhi.Name} ${this.bazi.D.Zhi.Name} ${this.bazi.T.Zhi.Name}`,e=yield this.popoverCtrl.create({component:l.a,event:i,componentProps:{items:[{name:"\u516b\u5b57",value:`<span>${c}</span><br><span>${n}</span>`},{name:"\u85cf\u5e72",value:t[4]},{name:"\u7eb3\u97f3",value:t[5]},{name:"\u957f\u751f\u5bab",value:t[6]},{name:"\u795e\u715e",value:t[7]}],toselect:!1},translucent:!0});yield e.present(),yield e.onDidDismiss()}))}initBaseInfo(){let t;const i=this.baziText.place,c=a.a.FindCity(i[0],i[1]);this.Place=c?`${i[0]}\u7701/\u5e02 ${i[1]}\u5e02/\u53bf/\u533a`:"\u672a\u77e5",this.Gender=this.baziText.male?"\u4e7e":"\u5764",this.Person=`${this.baziText.person} (${this.Gender}\u9020)`;const n=this.baziText.time.parseDate();this.Birthday=n.toChinaStr(!0);const e=new o.a(n);if(this.BirthdayN=`${e.GZyear}\u5e74${e.NLleap}${e.NLmonth}\u6708${e.NLdate}`,this.baziText.realsuntime){const i=c?a.a.CalcTimeOff(c.Code):null;t=new Date(n.getTime()+6e4*i),this.RealTime=t.toChinaStr(!0)}else this.RealTime=""}initYuanju(t){const i=[],c=t.parseDate();this.bazi=new s.a(c,this.baziText.male?"m":"f");const n=this.config.shortname?1:0;if(i.push(this.bazi.All.select(t=>({text:t.Shen10Gan[n],color:"gray",bz:!1}))),i.push(this.bazi.All.select(t=>({text:t.Gan.Name,color:"darkblue",bz:!0}))),i.push(this.bazi.All.select(t=>({text:t.Zhi.Name,color:"darkblue",bz:!0}))),i.push(this.bazi.All.select(t=>({text:t.Shen10Zhi[n],color:"gray",bz:!1}))),i[0].insert(0,{text:this.Gender,color:"",bz:!1}),i[1].insert(0,{text:"\u9020",color:"",bz:!1}),i[2].insert(0,{text:"",color:"",bz:!1}),i[3].insert(0,{text:"",color:"",bz:!1}),this.config.yuanju.cangan){const t=this.bazi.All.select(t=>({text:t.Zhi.CGan.map(t=>t.Name).join(""),color:""}));t.insert(0,{text:"\u85cf\u5e72",color:"gray",bz:!1}),i.push(t)}if(this.config.yuanju.nayin){const t=this.bazi.All.select(t=>({text:t.NaYin,color:""}));t.insert(0,{text:"\u7eb3\u97f3",color:"gray",bz:!1}),i.push(t)}if(this.config.yuanju.changshen){const t=this.bazi.All.select(t=>({text:t.ChangSheng,color:""}));t.insert(0,{text:"\u957f\u751f",color:"gray",bz:!1}),i.push(t)}const e=this.bazi.WuXings.map(t=>({text:`${t.Name} - ${t.Num}`,color:"gray",bz:!1}));e.insert(0,{text:"\u4e94\u884c",color:"gray",bz:!1}),i.push(e),this.yuanju=i}initShenShas(){const t=[],i=this.bazi.ShenSha.length;for(let e=0;e<i;e++)t.push(`[${this.bazi.ShenSha[e].Name} - ${this.bazi.ShenSha[e].Result.join("")}]`);const c=this.config.shensha;this.ShenShas=[];for(let e=0;e<=i;e+=c){const n=t.slice(e,e+c>i?i:e+c);this.ShenShas.push(n)}const n=c-this.ShenShas[this.ShenShas.length-1].length;if(n>0)for(let e=0;e<n;e++)this.ShenShas[this.ShenShas.length-1].push("");this.ShenShaHead=`[\u547d\u5bab - ${this.bazi.MingGong.Name}] [\u80ce\u5143 - ${this.bazi.TaiYuan.Name}]`}initDayuns(){const t=this.config.shortname?1:0,i=this.bazi.Birthday.getFullYear(),c=[];this.bazi.DaYun.forEach(n=>{const e=[];e.push(`${n.Start.toChinaStr()}`),e.push(n.GZ.Shen10Gan[t]),e.push(n.GZ.Name),e.push(n.GZ.Shen10Zhi[t]),e.push(n.GZ.Zhi.CGan.map(t=>t.Name).join("")),e.push(n.GZ.NaYin),e.push(n.GZ.ChangSheng),e.push(this.bazi.CalcShenSha(n.GZ)),e.push(n.Start.getFullYear()-i),c.push(e)}),this.Dayuns=c,this.SelectedDY=0;const n=[];for(const e of this.bazi.DaYun){const t=this.calcXiaoyun(e.Start.getFullYear(),e.End.getFullYear());n.push({name:`${e.GZ.Name}\u8fd0 ${e.Start.toChinaStr()}`,liu:t[0],xiao:t[1]})}this.AllLiuNian=n}calcXiaoyun(t,i){const c=this.config.shortname?1:0,n=[],e=[];let s=this.bazi.Birthday.toChinaStr();return s=s.replace(this.bazi.Birthday.getFullYear().toString(),"##"),this.bazi.CalcLiuNian(t,i).forEach(t=>{const i=[],s=[];i.push(`${t.Start.getFullYear()}`),s.push(`${t.Start.getFullYear()}\u5e74${this.bazi.Birthday.getMonth()+1}\u6708${this.bazi.Birthday.getDate()+1}\u65e5`),i.push(t.GZ.Shen10Gan[c]),i.push(t.GZ.Name),i.push(t.GZ.Shen10Zhi[c]),s.push(t.GZ2.Shen10Gan[c]),s.push(t.GZ2.Name),s.push(t.GZ2.Shen10Zhi[c]),n.push(i),e.push(s),i.push(t.GZ.Zhi.CGan.map(t=>t.Name).join("")),s.push(t.GZ2.Zhi.CGan.map(t=>t.Name).join("")),i.push(t.GZ.NaYin),s.push(t.GZ2.NaYin),i.push(t.GZ.ChangSheng),s.push(t.GZ2.ChangSheng),i.push(this.bazi.CalcShenSha(t.GZ)),s.push(this.bazi.CalcShenSha(t.GZ2)),i.push(t.Start.getFullYear()-this.bazi.Birthday.getFullYear())}),[n,e]}}return t.\u0275fac=function(i){return new(i||t)(h.Zb(e.jb),h.Zb(e.fb))},t.\u0275cmp=h.Tb({type:t,selectors:[["app-baziview"]],inputs:{Config:"Config",BaziText:"BaziText"},decls:73,vars:39,consts:[[1,"ui","attached","segment",2,"margin-left","3px","max-width","500px"],[1,"ui","blue","ribbon","label"],[3,"closeOthers"],[3,"isOpen"],["title",""],[1,"dropdown","icon"],["content",""],[4,"ngIf"],["lines","none"],[1,"bzgrid"],["class","ion-no-padding bzgrid",4,"ngFor","ngForOf"],[2,"width","100%"],[4,"ngFor","ngForOf"],[1,"ui","equal","width","grid"],["class","column","style","padding-left: 0;padding-right: 0;text-align: center",4,"ngFor","ngForOf"],[1,"ion-no-padding"],[1,"item"],[3,"closeOthers",4,"ngFor","ngForOf"],[1,"ion-no-padding","bzgrid"],["style","font-weight: bolder;",4,"ngIf"],[2,"font-weight","bolder"],[1,"column",2,"padding-left","0","padding-right","0","text-align","center"],[2,"color","gray"],[3,"click"],[2,"margin-top","3px","font-weight","bold"],[2,"margin-bottom","3px","font-weight","bold"],[1,"ui","unstackable","very","basic","table","compact","striped"],[2,"font-weight","bold"]],template:function(t,i){1&t&&(h.ec(0,"div",0),h.ec(1,"div"),h.ec(2,"a",1),h.Ic(3),h.dc(),h.dc(),h.ec(4,"sui-accordion",2),h.ec(5,"sui-accordion-panel",3),h.ec(6,"div",4),h.ac(7,"i",5),h.Ic(8),h.dc(),h.ec(9,"div",6),h.ec(10,"span"),h.Ic(11),h.dc(),h.ac(12,"br"),h.ec(13,"span"),h.Ic(14),h.dc(),h.ac(15,"br"),h.ec(16,"span"),h.Ic(17),h.dc(),h.ac(18,"br"),h.Gc(19,g,2,1,"span",7),h.ac(20,"br"),h.dc(),h.dc(),h.dc(),h.ec(21,"ion-item",8),h.ec(22,"ion-grid",9),h.Gc(23,m,2,1,"ion-row",10),h.qc(24,"slice"),h.dc(),h.dc(),h.ec(25,"sui-accordion",2),h.ec(26,"sui-accordion-panel",3),h.ec(27,"div",4),h.ac(28,"i",5),h.Ic(29," \u516b\u5b57\u539f\u5c40 "),h.dc(),h.ec(30,"div",6),h.ec(31,"ion-grid",9),h.Gc(32,S,2,1,"ion-row",10),h.qc(33,"slice"),h.dc(),h.dc(),h.dc(),h.dc(),h.ec(34,"sui-accordion",2),h.ec(35,"sui-accordion-panel",3),h.ec(36,"div",4),h.ac(37,"i",5),h.Ic(38),h.dc(),h.ec(39,"div",6),h.ec(40,"table",11),h.Gc(41,y,2,1,"tr",12),h.dc(),h.dc(),h.dc(),h.dc(),h.ec(42,"sui-accordion",2),h.ec(43,"sui-accordion-panel",3),h.ec(44,"div",4),h.ac(45,"i",5),h.Ic(46),h.dc(),h.ec(47,"div",6),h.ec(48,"div",13),h.Gc(49,C,12,7,"div",14),h.dc(),h.ec(50,"ion-list",15),h.ec(51,"ion-item",16),h.ec(52,"small"),h.Ic(53),h.dc(),h.dc(),h.ec(54,"ion-item",16),h.ec(55,"small"),h.Ic(56),h.dc(),h.dc(),h.ec(57,"ion-item",16),h.ec(58,"small"),h.Ic(59),h.dc(),h.dc(),h.ec(60,"ion-item",16),h.ec(61,"small"),h.Ic(62),h.dc(),h.dc(),h.ec(63,"ion-item",16),h.ec(64,"small"),h.Ic(65),h.dc(),h.dc(),h.dc(),h.dc(),h.dc(),h.dc(),h.ec(66,"sui-accordion",2),h.ec(67,"sui-accordion-panel",3),h.ec(68,"div",4),h.ac(69,"i",5),h.Ic(70," \u6d41\u5e74\u5c0f\u8fd0 "),h.dc(),h.ec(71,"div",6),h.Gc(72,I,19,4,"sui-accordion",17),h.dc(),h.dc(),h.dc(),h.dc()),2&t&&(h.Nb(3),h.Kc(" ",i.BaziInText," "),h.Nb(1),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Kc(" \u547d\u4e3b\uff1a",i.Person," "),h.Nb(3),h.Kc("\u751f\u65e5\uff1a",i.Birthday,""),h.Nb(3),h.Kc("\u519c\u5386\uff1a",i.BirthdayN,""),h.Nb(3),h.Kc("\u51fa\u751f\u5730\uff1a",i.Place,""),h.Nb(2),h.vc("ngIf",""!=i.RealTime),h.Nb(3),h.Fc("font-size",i.FontSize),h.Nb(1),h.vc("ngForOf",h.sc(24,32,i.YuanJu,0,4)),h.Nb(2),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(5),h.Fc("font-size",i.FontSize),h.Nb(1),h.vc("ngForOf",h.rc(33,36,i.YuanJu,4)),h.Nb(2),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Kc(" \u795e\u715e\uff1a",i.ShenShaHead," "),h.Nb(3),h.vc("ngForOf",i.ShenShas),h.Nb(1),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Kc(" \u5927\u8fd0\uff1a",i.DayunName," "),h.Nb(3),h.vc("ngForOf",i.Dayuns),h.Nb(4),h.Kc("\u8d77\u59cb: ",i.Dayuns[i.SelectedDY][0],""),h.Nb(3),h.Kc("\u85cf\u5e72: ",i.Dayuns[i.SelectedDY][4],""),h.Nb(3),h.Kc("\u7eb3\u97f3: ",i.Dayuns[i.SelectedDY][5],""),h.Nb(3),h.Kc("\u957f\u751f\u4e8c\u5341\u5bab: ",i.Dayuns[i.SelectedDY][6],""),h.Nb(3),h.Kc("\u795e\u715e: ",i.Dayuns[i.SelectedDY][7],""),h.Nb(1),h.vc("closeOthers",!0),h.Nb(1),h.vc("isOpen",!1),h.Nb(5),h.vc("ngForOf",i.AllLiuNian))},directives:[u.a,u.b,d.j,e.x,e.s,d.i,e.E,u.d,e.M,e.m,e.T],pipes:[d.p],styles:[".bzgrid[_ngcontent-%COMP%]{padding:0}.selected[_ngcontent-%COMP%]{background-color:#faebd7}"]}),t})()},n7QD:function(t,i,c){"use strict";c.d(i,"a",(function(){return r}));var n=c("ofXK"),e=c("3Pt+"),s=c("c7TG"),a=(c("ylIl"),c("i/bi")),o=c("fXoL");let r=(()=>{class t{}return t.\u0275mod=o.Xb({type:t}),t.\u0275inj=o.Wb({factory:function(i){return new(i||t)},imports:[[n.b,e.c,a.e,s.Z]]}),t})()},uEAi:function(t,i,c){"use strict";c.d(i,"a",(function(){return r}));var n=c("ofXK"),e=c("3Pt+"),s=c("c7TG"),a=(c("gTpY"),c("i/bi")),o=c("fXoL");let r=(()=>{class t{}return t.\u0275mod=o.Xb({type:t}),t.\u0275inj=o.Wb({factory:function(i){return new(i||t)},imports:[[n.b,e.c,a.e,s.Z]]}),t})()},ylIl:function(t,i,c){"use strict";c.d(i,"a",(function(){return x}));var n=c("mrSG"),e=c("c7TG"),s=(c("0eVs"),c("pNW8")),a=c("LTmD"),o=c("2QJI"),r=c("fXoL"),l=c("i/bi"),h=c("ofXK");const u=function(t){return{positive:t}},d=function(t){return{error:t}},g=function(t){return{warning:t}};function p(t,i){if(1&t&&(r.ec(0,"td",12),r.Ic(1),r.dc()),2&t){const t=i.$implicit;r.vc("colSpan",t.span)("ngClass",r.wc(5,u,"positive"===t.color))("ngClass",r.wc(7,d,"error"===t.color))("ngClass",r.wc(9,g,"warning"===t.color)),r.Nb(1),r.Kc("\xa0",t.txt,"\xa0")}}function b(t,i){if(1&t&&(r.ec(0,"tr"),r.Gc(1,p,2,11,"td",15),r.dc()),2&t){const t=i.$implicit;r.Nb(1),r.vc("ngForOf",t)}}function f(t,i){if(1&t){const t=r.fc();r.ec(0,"td",16),r.mc("click",(function(){return r.Bc(t),r.pc().calcColor(null)})),r.dc()}if(2&t){const t=i.$implicit;r.vc("colSpan",t.span)("innerHTML",t.txt,r.Cc)}}function m(t,i){if(1&t&&r.ac(0,"div",21),2&t){const t=r.pc().$implicit;r.vc("innerHTML",t.text,r.Cc)}}function N(t,i){if(1&t&&r.ac(0,"div",22),2&t){const t=r.pc().$implicit;r.vc("innerHTML",t.text,r.Cc)}}function v(t,i){if(1&t){const t=r.fc();r.ec(0,"td",18),r.mc("click",(function(){r.Bc(t);const c=i.index,n=r.pc().index;return r.pc().tostNayin(n,c)})),r.Gc(1,m,1,1,"div",19),r.Gc(2,N,1,1,"div",20),r.dc()}if(2&t){const t=i.$implicit;r.vc("ngClass",r.wc(5,u,"positive"===t.color))("ngClass",r.wc(7,d,"error"===t.color))("ngClass",r.wc(9,g,"warning"===t.color)),r.Nb(1),r.vc("ngIf","svg"!==t.size),r.Nb(1),r.vc("ngIf","svg"===t.size)}}function G(t,i){if(1&t&&(r.ec(0,"tr"),r.Gc(1,v,3,11,"td",17),r.dc()),2&t){const t=i.$implicit;r.Nb(1),r.vc("ngForOf",t)}}const S=function(t){return{gua:t}};let x=(()=>{class t{constructor(t,i){this.toastController=t,this.settings=i,this.smallSymbol=!1,this.ColorRiYue=["","","",""],this.YaoSymbols=[{svg:"assets/shaoyin.svg",name:"\u5c11\u9634"},{svg:"assets/shaoyan.svg",name:"\u5c11\u9633"},{svg:"assets/laoyin.svg",name:"\u8001\u9634"},{svg:"assets/laoyan.svg",name:"\u8001\u9633"}]}ngOnInit(){}set Config(t){this.config=Object(a.b)(t)}get Compact(){return this.settings.IsSmallScreen}get FontSize(){return`${this.config.fontsize}px`}get GuaText(){return this.guaText}set GuaText(t){this.guaText=t,this.initGua()}get ShenSha(){return this.shensha}get Xunkong(){return this.Gua.ShenShas[this.Gua.ShenShas.length-1].Result}get GuaLine(){return this.gualine}get GuaChi(){return this.guachi}get GuaInText(){return this.Gua.Ben.Index===this.Gua.Bian.Index?this.Gua.Ben.Name:`${this.Gua.Ben.NameS}\u4e4b${this.Gua.Bian.NameS}`}get HasBianGua(){return this.Gua.Ben.Index!==this.Gua.Bian.Index}Reflash(t){t&&(this.config=Object(a.b)(t)),this.initShensha(),this.calcGuaLine()}tostNayin(t,i){return Object(n.b)(this,void 0,void 0,(function*(){const c=5-t;let n=i<=4?1:2;n=i<=1?0:n;let e=this.Gua.Ben.GanZhis[c];0===n?e=this.Gua.FuGua.GanZhis[c]:2===n&&(e=this.Gua.Bian.GanZhis[c]);const s=yield this.toastController.create({message:`${e.Name} - ${e.NaYin}`,duration:3e3});yield s.present(),this.calcColor(e.Zhi.Index)}))}calcColor(t){const i=null===t,c=i?"XX":new o.b(t).Zhi.Name,n=i?"XX":new o.b((t+6)%12).Zhi.Name,e=i?"XX":new o.b((13-t)%12).Zhi.Name;this.ShenSha.forEach(t=>{t.forEach(t=>{t.color=t.txt.includes(c)?"positive":t.txt.includes(n)?"error":t.txt.includes(e)?"warning":""})}),this.gualine.forEach(t=>{t.forEach(t=>{t.color=t.text.includes(c)&&!t.text.startsWith("\u5b50\u5b59")?"positive":t.text.includes(n)&&!t.text.startsWith("\u5b50\u5b59")?"error":t.text.includes(e)&&!t.text.startsWith("\u5b50\u5b59")?"warning":""})});const s=[this.Gua.Yue.Name,this.Gua.Ri.Name,this.Xunkong[0],this.Xunkong[1]];for(let a=0;a<4;a++)this.ColorRiYue[a]=s[a].includes(c)?a<2?"positive":"#4854e0":s[a].includes(n)?a<2?"error":"#cf3c4f":s[a].includes(e)?a<2?"warning":"#28ba62":""}ChangSymbol(){!1===this.smallSymbol?(this.config_s=Object(a.b)(this.config),this.config.shensha=4,this.config.shortname=!0,this.config.shensha=4):this.config=Object(a.b)(this.config_s),this.smallSymbol=!this.smallSymbol,this.Reflash(null)}initGua(){this.Titel="\u95ee\u5ff5\uff1a"+this.guaText.question,this.Gua=new s.a(this.guaText.time,this.guaText.ben,this.guaText.bian),this.GuaTime="\u8d77\u5366\u65f6\u95f4\uff1a"+("string"==typeof this.guaText.time?this.guaText.time:`${this.guaText.time[0]}\u6708 ${this.guaText.time[1]}\u65e5`).replace("00:00:00",""),this.Reflash(null)}initShensha(){const t=this.config.shensha;this.shensha=[];for(let i=0;i<this.Gua.ShenShas.length-1;i+=t){const c=[];for(let n=0;n<t;n++){if(n+i>=this.Gua.ShenShas.length-1)continue;const t=i+n===this.Gua.ShenShas.length-2,e=this.Gua.ShenShas[n+i];c.push({txt:`[${e.Name} - ${e.Result.join("")}]`,span:t?2:1,color:""})}this.shensha.push(c)}}calcGuaLine(){const t=['<img src="assets/svg/shaoyin32.svg"/>','<img src="assets/svg/shaoyan32.svg"/>','<img src="assets/svg/arrowX.svg"/>','<img src="assets/svg/arrowO.svg"/>'];let i=!1;this.gualine=[];for(let n=6;n>0;n--){const c=this.Gua.GetLine(n,this.config.shortname);i="string"==typeof c[1];const e=[];let s=0;const a=i?4:3,o=a+1,r=i?1:-1;for(let i=0;i<c.length;i++){const n="number"==typeof c[i]?t[c[i]%2]:c[i];if(s="number"==typeof c[i]?c[i]%2:s,""===n)switch(i){case r:case a:case o:e.push({text:"",color:""})}else if(">"===n&&i===o)e.push({text:t[0===s?2:3],color:""});else{let t=i===r?`<small>&nbsp;${n}&nbsp;</small>`:n.toString();t=i===a?`&nbsp;${t}`:t,e.push({text:t,color:""})}}this.gualine.push(e)}this.guachi=[],this.guachi.push({txt:this.Gua.Ben.GuaGong,span:i?2:3});let c=""!==this.Gua.Ben.Property?`(${this.Gua.Ben.Property})`:"";this.guachi.push({txt:`${this.Gua.Ben.Name}${c}`,span:i?4:3}),this.Gua.Ben.Index!==this.Gua.Bian.Index?(c=""!==this.Gua.Bian.Property?`(${this.Gua.Bian.Property})`:"",this.guachi.push({txt:`${this.Gua.Bian.Name}${c}`,span:2})):this.guachi.push({txt:"&nbsp;".repeat(5),span:2}),this.gualine.forEach(t=>{t.forEach(t=>{t.text.startsWith("<img")&&(t.size="svg")}),i||t.insert(1,{text:"&nbsp;".repeat(this.HasBianGua?1:5),color:"",size:""}),this.HasBianGua||(t.push({text:"&nbsp;",color:"",size:""}),t.push({text:"&nbsp;".repeat(25),color:"",size:""}))})}}return t.\u0275fac=function(i){return new(i||t)(r.Zb(e.jb),r.Zb(a.a))},t.\u0275cmp=r.Tb({type:t,selectors:[["app-guaview"]],inputs:{Config:"Config",GuaText:"GuaText"},decls:35,vars:45,consts:[[1,"ui","attached","segment",2,"margin-left","3px","max-width","500px"],[1,"ui","teal","ribbon","label"],[1,"ui","top","right","attached","icon","basic","label",3,"click"],[1,"cut","icon"],[3,"closeOthers"],[3,"isOpen"],["title",""],[1,"dropdown","icon"],["content",""],[1,"ui","unstackable","very","basic","table","collapsing","table-noline",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ui","unstackable","very","basic","table","compact","collapsing",3,"ngClass"],[3,"colSpan","ngClass"],["colspan","4"],["class","collapsing",3,"colSpan","innerHTML","click",4,"ngFor","ngForOf"],[3,"colSpan","ngClass",4,"ngFor","ngForOf"],[1,"collapsing",3,"colSpan","innerHTML","click"],["class","collapsing gua",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"collapsing","gua",3,"ngClass","click"],[3,"innerHTML",4,"ngIf"],["class","ui image",3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"ui","image",3,"innerHTML"]],template:function(t,i){1&t&&(r.ec(0,"div",0),r.ec(1,"div"),r.ec(2,"a",1),r.Ic(3),r.dc(),r.Ic(4),r.ec(5,"a",2),r.mc("click",(function(){return i.ChangSymbol()})),r.ac(6,"i",3),r.dc(),r.dc(),r.ec(7,"sui-accordion",4),r.ec(8,"sui-accordion-panel",5),r.ec(9,"div",6),r.ac(10,"i",7),r.Ic(11),r.dc(),r.ec(12,"div",8),r.ec(13,"p"),r.Ic(14),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(15,"table",9),r.Gc(16,b,2,1,"tr",10),r.dc(),r.ec(17,"table",11),r.ec(18,"thead"),r.ec(19,"tr"),r.ec(20,"td",12),r.Ic(21),r.dc(),r.ec(22,"td",12),r.Ic(23),r.dc(),r.ec(24,"td",13),r.Ic(25),r.ec(26,"span"),r.Ic(27),r.dc(),r.ec(28,"span"),r.Ic(29),r.dc(),r.Ic(30,") "),r.dc(),r.dc(),r.ec(31,"tr"),r.Gc(32,f,1,2,"td",14),r.dc(),r.dc(),r.ec(33,"tbody"),r.Gc(34,G,2,1,"tr",10),r.dc(),r.dc(),r.dc()),2&t&&(r.Nb(3),r.Kc(" ",i.GuaInText," "),r.Nb(1),r.Lc(" ",i.Gua.Yue.Name,"\u6708 ",i.Gua.Ri.Name,"\u65e5 "),r.Nb(3),r.vc("closeOthers",!1),r.Nb(1),r.vc("isOpen",!0),r.Nb(3),r.Kc(" ",i.Titel," "),r.Nb(3),r.Jc(i.GuaTime),r.Nb(1),r.vc("ngClass",r.wc(29,S,i.Compact)),r.Nb(1),r.vc("ngForOf",i.ShenSha),r.Nb(1),r.vc("ngClass",r.wc(31,S,i.Compact)),r.Nb(3),r.vc("colSpan",i.GuaChi[0].span)("ngClass",r.wc(33,u,"positive"===i.ColorRiYue[0]))("ngClass",r.wc(35,d,"error"===i.ColorRiYue[0]))("ngClass",r.wc(37,g,"warning"===i.ColorRiYue[0])),r.Nb(1),r.Kc("",i.Gua.Yue.Name,"\u6708"),r.Nb(1),r.vc("colSpan",i.GuaChi[1].span)("ngClass",r.wc(39,u,"positive"===i.ColorRiYue[1]))("ngClass",r.wc(41,d,"error"===i.ColorRiYue[1]))("ngClass",r.wc(43,g,"warning"===i.ColorRiYue[1])),r.Nb(1),r.Kc("",i.Gua.Ri.Name,"\u65e5"),r.Nb(2),r.Kc("(",i.smallSymbol?"":"\u65ec\u7a7a\uff1a"," "),r.Nb(1),r.Fc("color",i.ColorRiYue[2]),r.Nb(1),r.Jc(i.Xunkong[0]),r.Nb(1),r.Fc("color",i.ColorRiYue[3]),r.Nb(1),r.Jc(i.Xunkong[1]),r.Nb(3),r.vc("ngForOf",i.GuaChi),r.Nb(2),r.vc("ngForOf",i.GuaLine))},directives:[l.a,l.b,h.h,h.i,h.j],styles:[".guatb[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px}.guagrid[_ngcontent-%COMP%]{margin-top:5px;margin-left:0;margin-right:0;--ion-grid-width-lg:540px;--ion-grid-width-md:540px;--ion-grid-width-sm:540px;--ion-grid-width-xl:540px;--ion-grid-width-xs:100%}.debug[_ngcontent-%COMP%]{border-color:red;border-style:solid}.guayao[_ngcontent-%COMP%]{margin-top:5px;border-bottom:1px dashed grey}.table-noline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0!important;padding-top:0!important}.gua[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0;padding-right:0;text-align:left}table[_ngcontent-%COMP%]{padding:0;margin:0;background-color:#fff}td[_ngcontent-%COMP%]{padding-left:0;padding-right:0;border-collapse:collapse;text-align:left}"]}),t})()}}]);