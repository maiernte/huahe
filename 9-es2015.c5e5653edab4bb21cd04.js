(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{HQI1:function(c,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("c7TG"),e=i("fXoL"),s=i("ofXK");function a(c,t){if(1&c){const c=e.ec();e.dc(0,"ion-item",3),e.lc("click",(function(){e.Cc(c);const i=t.$implicit;return e.oc(2).onSelect(i.value)})),e.dc(1,"ion-text"),e.Jc(2),e.cc(),e.cc()}if(2&c){const c=t.$implicit,i=e.oc(2);e.vc("color",c.value===i.currentOption?"light":""),e.Nb(2),e.Kc(c.name)}}function o(c,t){if(1&c&&(e.dc(0,"div"),e.Hc(1,a,3,2,"ion-item",2),e.cc()),2&c){const c=e.oc();e.Nb(1),e.vc("ngForOf",c.items)}}function r(c,t){if(1&c&&(e.dc(0,"ion-note"),e.Jc(1),e.cc()),2&c){const c=e.oc().$implicit;e.Nb(1),e.Lc(" ",c.name," ")}}function l(c,t){if(1&c&&(e.dc(0,"ion-item",6),e.Hc(1,r,2,1,"ion-note",0),e.dc(2,"ion-label",7),e.dc(3,"small"),e.Zb(4,"ion-text",8),e.cc(),e.cc(),e.cc()),2&c){const c=t.$implicit;e.Nb(1),e.vc("ngIf",c.name),e.Nb(3),e.vc("innerHtml",c.value,e.Dc)}}function h(c,t){if(1&c&&(e.dc(0,"ion-list",4),e.Hc(1,l,5,2,"ion-item",5),e.cc()),2&c){const c=e.oc();e.Nb(1),e.vc("ngForOf",c.items)}}let u=(()=>{class c{constructor(c){this.popoverCtrl=c,this.toselect=!0}ngOnInit(){}onSelect(c){this.popoverCtrl.dismiss(c)}}return c.\u0275fac=function(t){return new(t||c)(e.Yb(n.db))},c.\u0275cmp=e.Sb({type:c,selectors:[["app-optionpopover"]],inputs:{currentOption:"currentOption",items:"items",toselect:"toselect"},decls:2,vars:2,consts:[[4,"ngIf"],["class","ion-no-padding",4,"ngIf"],["button","",3,"color","click",4,"ngFor","ngForOf"],["button","",3,"color","click"],[1,"ion-no-padding"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end",1,"ion-text-wrap"],[3,"innerHtml"]],template:function(c,t){1&c&&(e.Hc(0,o,2,1,"div",0),e.Hc(1,h,2,1,"ion-list",1)),2&c&&(e.vc("ngIf",t.toselect),e.Nb(1),e.vc("ngIf",!t.toselect))},directives:[s.j,s.i,n.w,n.S,n.D,n.C,n.G],styles:[""]}),c})()},gTpY:function(c,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("mrSG"),e=i("c7TG"),s=i("+cLM"),a=(i("0eVs"),i("FiP+")),o=i("l+bK"),r=i("LTmD"),l=i("HQI1"),h=i("fXoL"),u=i("i/bi"),d=i("ofXK");function g(c,t){if(1&c&&(h.dc(0,"span"),h.Jc(1),h.cc()),2&c){const c=h.oc();h.Nb(1),h.Lc("\u771f\u592a\u9633\u65f6\uff1a",c.RealTime,"")}}function b(c,t){if(1&c&&(h.dc(0,"span"),h.Jc(1),h.cc()),2&c){const c=h.oc().$implicit;h.Nb(1),h.Kc(c.text)}}function p(c,t){if(1&c&&(h.dc(0,"span",20),h.Jc(1),h.cc()),2&c){const c=h.oc().$implicit;h.Nb(1),h.Kc(c.text)}}function f(c,t){if(1&c&&(h.dc(0,"ion-col",18),h.dc(1,"ion-text",9),h.Hc(2,b,2,1,"span",7),h.Hc(3,p,2,1,"span",19),h.cc(),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.Gc("color",c.color),h.Nb(1),h.vc("ngIf",!c.bz),h.Nb(1),h.vc("ngIf",c.bz)}}function m(c,t){if(1&c&&(h.dc(0,"ion-row",18),h.Hc(1,f,4,4,"ion-col",10),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.vc("ngForOf",c)}}function N(c,t){if(1&c&&(h.dc(0,"span"),h.Jc(1),h.cc()),2&c){const c=h.oc().$implicit;h.Nb(1),h.Kc(c.text)}}function v(c,t){if(1&c&&(h.dc(0,"span",20),h.Jc(1),h.cc()),2&c){const c=h.oc().$implicit;h.Nb(1),h.Kc(c.text)}}function S(c,t){if(1&c&&(h.dc(0,"ion-col",18),h.dc(1,"ion-text",9),h.Hc(2,N,2,1,"span",7),h.Hc(3,v,2,1,"span",19),h.cc(),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.Gc("color",c.color),h.Nb(1),h.vc("ngIf",!c.bz),h.Nb(1),h.vc("ngIf",c.bz)}}function x(c,t){if(1&c&&(h.dc(0,"ion-row",18),h.Hc(1,S,4,4,"ion-col",10),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.vc("ngForOf",c)}}function G(c,t){if(1&c&&(h.dc(0,"td"),h.Jc(1),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.Kc(c)}}function y(c,t){if(1&c&&(h.dc(0,"tr"),h.Hc(1,G,2,1,"td",12),h.cc()),2&c){const c=t.$implicit;h.Nb(1),h.vc("ngForOf",c)}}function C(c,t){if(1&c){const c=h.ec();h.dc(0,"div",21),h.dc(1,"div",22),h.Jc(2),h.cc(),h.dc(3,"div",23),h.lc("click",(function(){h.Cc(c);const i=t.index;return h.oc().SelectedDY=i})),h.dc(4,"div",24),h.Jc(5),h.cc(),h.dc(6,"div",25),h.Jc(7),h.cc(),h.cc(),h.dc(8,"div",22),h.Jc(9),h.cc(),h.dc(10,"div"),h.Jc(11),h.cc(),h.cc()}if(2&c){const c=t.$implicit,i=t.index,n=h.oc();h.Nb(2),h.Kc(c[1]),h.Nb(1),h.Gc("background-color",n.SelectedDY===i?"skyblue":"white"),h.Nb(2),h.Kc(c[2][0]),h.Nb(2),h.Kc(c[2][1]),h.Nb(2),h.Kc(c[3]),h.Nb(2),h.Kc(c[8])}}function z(c,t){if(1&c){const c=h.ec();h.dc(0,"tr"),h.dc(1,"td"),h.Jc(2),h.cc(),h.dc(3,"td"),h.Jc(4),h.cc(),h.dc(5,"td",23),h.lc("click",(function(i){h.Cc(c);const n=t.$implicit;return h.oc(2).ShowDetail(n,i)})),h.dc(6,"span",22),h.Jc(7),h.cc(),h.dc(8,"span",27),h.Jc(9),h.cc(),h.dc(10,"span",22),h.Jc(11),h.cc(),h.cc(),h.dc(12,"td",23),h.lc("click",(function(i){h.Cc(c);const n=t.$implicit;return h.oc(2).ShowDetail(n,i)})),h.dc(13,"span",22),h.Jc(14),h.cc(),h.dc(15,"span",27),h.Jc(16),h.cc(),h.dc(17,"span",22),h.Jc(18),h.cc(),h.cc(),h.cc()}if(2&c){const c=t.$implicit,i=t.index,n=h.oc().$implicit;h.Nb(2),h.Kc(c[0]),h.Nb(2),h.Kc(c[8]),h.Nb(3),h.Lc("(",c[1],")"),h.Nb(2),h.Kc(c[2]),h.Nb(2),h.Lc("(",c[3],")"),h.Nb(3),h.Lc("(",n.xiao[i][1],")"),h.Nb(2),h.Kc(n.xiao[i][2]),h.Nb(2),h.Lc("(",n.xiao[i][3],")")}}function $(c,t){if(1&c&&(h.dc(0,"sui-accordion",2),h.dc(1,"sui-accordion-panel",3),h.dc(2,"div",4),h.Zb(3,"i",5),h.Jc(4),h.cc(),h.dc(5,"div",6),h.dc(6,"table",26),h.dc(7,"thead"),h.dc(8,"tr"),h.dc(9,"th"),h.Jc(10,"\u5e74\u4efd"),h.cc(),h.dc(11,"th"),h.Jc(12,"\u5c81\u6570"),h.cc(),h.dc(13,"th"),h.Jc(14,"\u6d41\u5e74"),h.cc(),h.dc(15,"th"),h.Jc(16,"\u5c0f\u8fd0"),h.cc(),h.cc(),h.cc(),h.dc(17,"tbody"),h.Hc(18,z,19,8,"tr",12),h.cc(),h.cc(),h.cc(),h.cc(),h.cc()),2&c){const c=t.$implicit;h.vc("closeOthers",!0),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Lc(" ",c.name," "),h.Nb(14),h.vc("ngForOf",c.liu)}}let O=(()=>{class c{constructor(c,t){this.toastController=c,this.popoverCtrl=t,this.ShowDayun=!1,this.ShowLiunian=!1,this.ShowXiaoyun=!1,this.selectedDayun=0,this.SelectedLiu=0,this.SelectedXiao=0,this.AllLiuNian=[]}ngOnInit(){this.initBaseInfo(),this.Reflash(null)}set Config(c){this.config=Object(r.b)(c)}get FontSize(){return`${this.config.fontsize}px`}get YuanJu(){return this.yuanju}get DayunName(){return this.dayunname}get SelectedDY(){return this.selectedDayun}set SelectedDY(c){this.selectedDayun=c;const t=this.bazi.DaYun[c];t.Start.getFullYear(),this.dayunname=`${t.GZ.Name}`}set BaziText(c){this.baziText=c}get BaziInText(){return`${this.bazi.Y.Name} / ${this.bazi.M.Name} / ${this.bazi.D.Name} / ${this.bazi.T.Name} `}Reflash(c){c&&(this.config=Object(r.b)(c)),this.initYuanju(""===this.RealTime?this.Birthday:this.RealTime),this.initShenShas(),this.SelectedDY=0,this.initDayuns()}ChangeDayun(c){return Object(n.b)(this,void 0,void 0,(function*(){this.SelectedDY=c;const t=this.bazi.DaYun[c-1].Start.toChinaStr(),i=this.bazi.DaYun[c-1].GZ.Name,n=yield this.toastController.create({message:`\u5927\u8fd0${i} \u5f00\u59cb\u4e8e ${t}`,duration:3e3});yield n.present()}))}ShowDetail(c,t){return Object(n.b)(this,void 0,void 0,(function*(){const i=`${this.bazi.Y.Gan.Name} ${this.bazi.M.Gan.Name} ${this.bazi.D.Gan.Name} ${this.bazi.T.Gan.Name}`,n=`${this.bazi.Y.Zhi.Name} ${this.bazi.M.Zhi.Name} ${this.bazi.D.Zhi.Name} ${this.bazi.T.Zhi.Name}`,e=yield this.popoverCtrl.create({component:l.a,event:t,componentProps:{items:[{name:"\u516b\u5b57",value:`<span>${i}</span><br><span>${n}</span>`},{name:"\u85cf\u5e72",value:c[4]},{name:"\u7eb3\u97f3",value:c[5]},{name:"\u957f\u751f\u5bab",value:c[6]},{name:"\u795e\u715e",value:c[7]}],toselect:!1},translucent:!0});yield e.present(),yield e.onDidDismiss()}))}initBaseInfo(){let c;const t=this.baziText.place,i=a.a.FindCity(t[0],t[1]);this.Place=i?`${t[0]}\u7701/\u5e02 ${t[1]}\u5e02/\u53bf/\u533a`:"\u672a\u77e5",this.Gender=this.baziText.male?"\u4e7e":"\u5764",this.Person=`${this.baziText.person} (${this.Gender}\u9020)`;const n=this.baziText.time.parseDate();this.Birthday=n.toChinaStr(!0);const e=new o.a(n);if(this.BirthdayN=`${e.GZyear}\u5e74${e.NLleap}${e.NLmonth}\u6708${e.NLdate}`,this.baziText.realsuntime){const t=i?a.a.CalcTimeOff(i.Code):null;c=new Date(n.getTime()+6e4*t),this.RealTime=c.toChinaStr(!0)}else this.RealTime=""}initYuanju(c){const t=[],i=c.parseDate();this.bazi=new s.a(i,this.baziText.male?"m":"f");const n=this.config.shortname?1:0;if(t.push(this.bazi.All.select(c=>({text:c.Shen10Gan[n],color:"gray",bz:!1}))),t.push(this.bazi.All.select(c=>({text:c.Gan.Name,color:"darkblue",bz:!0}))),t.push(this.bazi.All.select(c=>({text:c.Zhi.Name,color:"darkblue",bz:!0}))),t.push(this.bazi.All.select(c=>({text:c.Shen10Zhi[n],color:"gray",bz:!1}))),t[0].insert(0,{text:this.Gender,color:"",bz:!1}),t[1].insert(0,{text:"\u9020",color:"",bz:!1}),t[2].insert(0,{text:"",color:"",bz:!1}),t[3].insert(0,{text:"",color:"",bz:!1}),this.config.yuanju.cangan){const c=this.bazi.All.select(c=>({text:c.Zhi.CGan.map(c=>c.Name).join(""),color:""}));c.insert(0,{text:"\u85cf\u5e72",color:"gray",bz:!1}),t.push(c)}if(this.config.yuanju.nayin){const c=this.bazi.All.select(c=>({text:c.NaYin,color:""}));c.insert(0,{text:"\u7eb3\u97f3",color:"gray",bz:!1}),t.push(c)}if(this.config.yuanju.changshen){const c=this.bazi.All.select(c=>({text:c.ChangSheng,color:""}));c.insert(0,{text:"\u957f\u751f",color:"gray",bz:!1}),t.push(c)}const e=this.bazi.WuXings.map(c=>({text:`${c.Name} - ${c.Num}`,color:"gray",bz:!1}));e.insert(0,{text:"\u4e94\u884c",color:"gray",bz:!1}),t.push(e),this.yuanju=t}initShenShas(){const c=[],t=this.bazi.ShenSha.length;for(let e=0;e<t;e++)c.push(`[${this.bazi.ShenSha[e].Name} - ${this.bazi.ShenSha[e].Result.join("")}]`);const i=this.config.shensha;this.ShenShas=[];for(let e=0;e<=t;e+=i){const n=c.slice(e,e+i>t?t:e+i);this.ShenShas.push(n)}const n=i-this.ShenShas[this.ShenShas.length-1].length;if(n>0)for(let e=0;e<n;e++)this.ShenShas[this.ShenShas.length-1].push("");this.ShenShaHead=`[\u547d\u5bab - ${this.bazi.MingGong.Name}] [\u80ce\u5143 - ${this.bazi.TaiYuan.Name}]`}initDayuns(){const c=this.config.shortname?1:0,t=this.bazi.Birthday.getFullYear(),i=[];this.bazi.DaYun.forEach(n=>{const e=[];e.push(`${n.Start.toChinaStr()}`),e.push(n.GZ.Shen10Gan[c]),e.push(n.GZ.Name),e.push(n.GZ.Shen10Zhi[c]),e.push(n.GZ.Zhi.CGan.map(c=>c.Name).join("")),e.push(n.GZ.NaYin),e.push(n.GZ.ChangSheng),e.push(this.bazi.CalcShenSha(n.GZ)),e.push(n.Start.getFullYear()-t),i.push(e)}),this.Dayuns=i,this.SelectedDY=0;const n=[];for(const e of this.bazi.DaYun){const c=this.calcXiaoyun(e.Start.getFullYear(),e.End.getFullYear());n.push({name:`${e.GZ.Name}\u8fd0 ${e.Start.toChinaStr()}`,liu:c[0],xiao:c[1]})}this.AllLiuNian=n}calcXiaoyun(c,t){const i=this.config.shortname?1:0,n=[],e=[];let s=this.bazi.Birthday.toChinaStr();return s=s.replace(this.bazi.Birthday.getFullYear().toString(),"##"),this.bazi.CalcLiuNian(c,t).forEach(c=>{const t=[],s=[];t.push(`${c.Start.getFullYear()}`),s.push(`${c.Start.getFullYear()}\u5e74${this.bazi.Birthday.getMonth()+1}\u6708${this.bazi.Birthday.getDate()+1}\u65e5`),t.push(c.GZ.Shen10Gan[i]),t.push(c.GZ.Name),t.push(c.GZ.Shen10Zhi[i]),s.push(c.GZ2.Shen10Gan[i]),s.push(c.GZ2.Name),s.push(c.GZ2.Shen10Zhi[i]),n.push(t),e.push(s),t.push(c.GZ.Zhi.CGan.map(c=>c.Name).join("")),s.push(c.GZ2.Zhi.CGan.map(c=>c.Name).join("")),t.push(c.GZ.NaYin),s.push(c.GZ2.NaYin),t.push(c.GZ.ChangSheng),s.push(c.GZ2.ChangSheng),t.push(this.bazi.CalcShenSha(c.GZ)),s.push(this.bazi.CalcShenSha(c.GZ2)),t.push(c.Start.getFullYear()-this.bazi.Birthday.getFullYear())}),[n,e]}}return c.\u0275fac=function(t){return new(t||c)(h.Yb(e.hb),h.Yb(e.db))},c.\u0275cmp=h.Sb({type:c,selectors:[["app-baziview"]],inputs:{Config:"Config",BaziText:"BaziText"},decls:73,vars:39,consts:[[1,"ui","attached","segment",2,"margin-left","3px","max-width","500px"],[1,"ui","blue","ribbon","label"],[3,"closeOthers"],[3,"isOpen"],["title",""],[1,"dropdown","icon"],["content",""],[4,"ngIf"],["lines","none"],[1,"bzgrid"],["class","ion-no-padding bzgrid",4,"ngFor","ngForOf"],[2,"width","100%"],[4,"ngFor","ngForOf"],[1,"ui","equal","width","grid"],["class","column","style","padding-left: 0;padding-right: 0;text-align: center",4,"ngFor","ngForOf"],[1,"ion-no-padding"],[1,"item"],[3,"closeOthers",4,"ngFor","ngForOf"],[1,"ion-no-padding","bzgrid"],["style","font-weight: bolder;",4,"ngIf"],[2,"font-weight","bolder"],[1,"column",2,"padding-left","0","padding-right","0","text-align","center"],[2,"color","gray"],[3,"click"],[2,"margin-top","3px","font-weight","bold"],[2,"margin-bottom","3px","font-weight","bold"],[1,"ui","unstackable","very","basic","table","compact","striped"],[2,"font-weight","bold"]],template:function(c,t){1&c&&(h.dc(0,"div",0),h.dc(1,"div"),h.dc(2,"a",1),h.Jc(3),h.cc(),h.cc(),h.dc(4,"sui-accordion",2),h.dc(5,"sui-accordion-panel",3),h.dc(6,"div",4),h.Zb(7,"i",5),h.Jc(8),h.cc(),h.dc(9,"div",6),h.dc(10,"span"),h.Jc(11),h.cc(),h.Zb(12,"br"),h.dc(13,"span"),h.Jc(14),h.cc(),h.Zb(15,"br"),h.dc(16,"span"),h.Jc(17),h.cc(),h.Zb(18,"br"),h.Hc(19,g,2,1,"span",7),h.Zb(20,"br"),h.cc(),h.cc(),h.cc(),h.dc(21,"ion-item",8),h.dc(22,"ion-grid",9),h.Hc(23,m,2,1,"ion-row",10),h.pc(24,"slice"),h.cc(),h.cc(),h.dc(25,"sui-accordion",2),h.dc(26,"sui-accordion-panel",3),h.dc(27,"div",4),h.Zb(28,"i",5),h.Jc(29," \u516b\u5b57\u539f\u5c40 "),h.cc(),h.dc(30,"div",6),h.dc(31,"ion-grid",9),h.Hc(32,x,2,1,"ion-row",10),h.pc(33,"slice"),h.cc(),h.cc(),h.cc(),h.cc(),h.dc(34,"sui-accordion",2),h.dc(35,"sui-accordion-panel",3),h.dc(36,"div",4),h.Zb(37,"i",5),h.Jc(38),h.cc(),h.dc(39,"div",6),h.dc(40,"table",11),h.Hc(41,y,2,1,"tr",12),h.cc(),h.cc(),h.cc(),h.cc(),h.dc(42,"sui-accordion",2),h.dc(43,"sui-accordion-panel",3),h.dc(44,"div",4),h.Zb(45,"i",5),h.Jc(46),h.cc(),h.dc(47,"div",6),h.dc(48,"div",13),h.Hc(49,C,12,7,"div",14),h.cc(),h.dc(50,"ion-list",15),h.dc(51,"ion-item",16),h.dc(52,"small"),h.Jc(53),h.cc(),h.cc(),h.dc(54,"ion-item",16),h.dc(55,"small"),h.Jc(56),h.cc(),h.cc(),h.dc(57,"ion-item",16),h.dc(58,"small"),h.Jc(59),h.cc(),h.cc(),h.dc(60,"ion-item",16),h.dc(61,"small"),h.Jc(62),h.cc(),h.cc(),h.dc(63,"ion-item",16),h.dc(64,"small"),h.Jc(65),h.cc(),h.cc(),h.cc(),h.cc(),h.cc(),h.cc(),h.dc(66,"sui-accordion",2),h.dc(67,"sui-accordion-panel",3),h.dc(68,"div",4),h.Zb(69,"i",5),h.Jc(70," \u6d41\u5e74\u5c0f\u8fd0 "),h.cc(),h.dc(71,"div",6),h.Hc(72,$,19,4,"sui-accordion",17),h.cc(),h.cc(),h.cc(),h.cc()),2&c&&(h.Nb(3),h.Lc(" ",t.BaziInText," "),h.Nb(1),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Lc(" \u547d\u4e3b\uff1a",t.Person," "),h.Nb(3),h.Lc("\u751f\u65e5\uff1a",t.Birthday,""),h.Nb(3),h.Lc("\u519c\u5386\uff1a",t.BirthdayN,""),h.Nb(3),h.Lc("\u51fa\u751f\u5730\uff1a",t.Place,""),h.Nb(2),h.vc("ngIf",""!=t.RealTime),h.Nb(3),h.Gc("font-size",t.FontSize),h.Nb(1),h.vc("ngForOf",h.sc(24,32,t.YuanJu,0,4)),h.Nb(2),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(5),h.Gc("font-size",t.FontSize),h.Nb(1),h.vc("ngForOf",h.rc(33,36,t.YuanJu,4)),h.Nb(2),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Lc(" \u795e\u715e\uff1a",t.ShenShaHead," "),h.Nb(3),h.vc("ngForOf",t.ShenShas),h.Nb(1),h.vc("closeOthers",!1),h.Nb(1),h.vc("isOpen",!1),h.Nb(3),h.Lc(" \u5927\u8fd0\uff1a",t.DayunName," "),h.Nb(3),h.vc("ngForOf",t.Dayuns),h.Nb(4),h.Lc("\u8d77\u59cb: ",t.Dayuns[t.SelectedDY][0],""),h.Nb(3),h.Lc("\u85cf\u5e72: ",t.Dayuns[t.SelectedDY][4],""),h.Nb(3),h.Lc("\u7eb3\u97f3: ",t.Dayuns[t.SelectedDY][5],""),h.Nb(3),h.Lc("\u957f\u751f\u4e8c\u5341\u5bab: ",t.Dayuns[t.SelectedDY][6],""),h.Nb(3),h.Lc("\u795e\u715e: ",t.Dayuns[t.SelectedDY][7],""),h.Nb(1),h.vc("closeOthers",!0),h.Nb(1),h.vc("isOpen",!1),h.Nb(5),h.vc("ngForOf",t.AllLiuNian))},directives:[u.a,u.b,d.j,e.w,e.r,d.i,e.D,u.d,e.L,e.l,e.S],pipes:[d.p],styles:[".bzgrid[_ngcontent-%COMP%]{padding:0}.selected[_ngcontent-%COMP%]{background-color:#faebd7}"]}),c})()},n7QD:function(c,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),e=i("3Pt+"),s=i("c7TG"),a=(i("ylIl"),i("i/bi")),o=i("fXoL");let r=(()=>{class c{}return c.\u0275mod=o.Wb({type:c}),c.\u0275inj=o.Vb({factory:function(t){return new(t||c)},imports:[[n.b,e.c,a.e,s.X]]}),c})()},uEAi:function(c,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),e=i("3Pt+"),s=i("c7TG"),a=(i("gTpY"),i("i/bi")),o=i("fXoL");let r=(()=>{class c{}return c.\u0275mod=o.Wb({type:c}),c.\u0275inj=o.Vb({factory:function(t){return new(t||c)},imports:[[n.b,e.c,a.e,s.X]]}),c})()},ylIl:function(c,t,i){"use strict";i.d(t,"a",(function(){return G}));var n=i("mrSG"),e=i("c7TG"),s=(i("0eVs"),i("pNW8")),a=i("LTmD"),o=i("2QJI"),r=i("fXoL"),l=i("i/bi"),h=i("ofXK");const u=function(c){return{positive:c}},d=function(c){return{error:c}},g=function(c){return{warning:c}};function b(c,t){if(1&c&&(r.dc(0,"td",12),r.Jc(1),r.cc()),2&c){const c=t.$implicit;r.vc("colSpan",c.span)("ngClass",r.xc(5,u,"positive"===c.color))("ngClass",r.xc(7,d,"error"===c.color))("ngClass",r.xc(9,g,"warning"===c.color)),r.Nb(1),r.Lc("\xa0",c.txt,"\xa0")}}function p(c,t){if(1&c&&(r.dc(0,"tr"),r.Hc(1,b,2,11,"td",15),r.cc()),2&c){const c=t.$implicit;r.Nb(1),r.vc("ngForOf",c)}}function f(c,t){if(1&c){const c=r.ec();r.dc(0,"td",16),r.lc("click",(function(){return r.Cc(c),r.oc().calcColor(null)})),r.cc()}if(2&c){const c=t.$implicit;r.vc("colSpan",c.span)("innerHTML",c.txt,r.Dc)}}function m(c,t){if(1&c&&r.Zb(0,"div",21),2&c){const c=r.oc().$implicit;r.vc("innerHTML",c.text,r.Dc)}}function N(c,t){if(1&c&&r.Zb(0,"div",22),2&c){const c=r.oc().$implicit;r.vc("innerHTML",c.text,r.Dc)}}function v(c,t){if(1&c){const c=r.ec();r.dc(0,"td",18),r.lc("click",(function(){r.Cc(c);const i=t.index,n=r.oc().index;return r.oc().tostNayin(n,i)})),r.Hc(1,m,1,1,"div",19),r.Hc(2,N,1,1,"div",20),r.cc()}if(2&c){const c=t.$implicit;r.vc("ngClass",r.xc(5,u,"positive"===c.color))("ngClass",r.xc(7,d,"error"===c.color))("ngClass",r.xc(9,g,"warning"===c.color)),r.Nb(1),r.vc("ngIf","svg"!==c.size),r.Nb(1),r.vc("ngIf","svg"===c.size)}}function S(c,t){if(1&c&&(r.dc(0,"tr"),r.Hc(1,v,3,11,"td",17),r.cc()),2&c){const c=t.$implicit;r.Nb(1),r.vc("ngForOf",c)}}const x=function(c){return{gua:c}};let G=(()=>{class c{constructor(c,t){this.toastController=c,this.settings=t,this.smallSymbol=!1,this.ColorRiYue=["","","",""],this.YaoSymbols=[{svg:"assets/shaoyin.svg",name:"\u5c11\u9634"},{svg:"assets/shaoyan.svg",name:"\u5c11\u9633"},{svg:"assets/laoyin.svg",name:"\u8001\u9634"},{svg:"assets/laoyan.svg",name:"\u8001\u9633"}]}ngOnInit(){}set Config(c){this.config=Object(a.b)(c)}get Compact(){return this.settings.IsSmallScreen}get FontSize(){return`${this.config.fontsize}px`}get GuaText(){return this.guaText}set GuaText(c){this.guaText=c,this.initGua()}get ShenSha(){return this.shensha}get Xunkong(){return this.Gua.ShenShas[this.Gua.ShenShas.length-1].Result}get GuaLine(){return this.gualine}get GuaChi(){return this.guachi}get GuaInText(){return this.Gua.Ben.Index===this.Gua.Bian.Index?this.Gua.Ben.Name:`${this.Gua.Ben.NameS}\u4e4b${this.Gua.Bian.NameS}`}get HasBianGua(){return this.Gua.Ben.Index!==this.Gua.Bian.Index}Reflash(c){c&&(this.config=Object(a.b)(c)),this.initShensha(),this.calcGuaLine()}tostNayin(c,t){return Object(n.b)(this,void 0,void 0,(function*(){const i=5-c;let n=t<=4?1:2;n=t<=1?0:n;let e=this.Gua.Ben.GanZhis[i];0===n?e=this.Gua.FuGua.GanZhis[i]:2===n&&(e=this.Gua.Bian.GanZhis[i]);const s=yield this.toastController.create({message:`${e.Name} - ${e.NaYin}`,duration:3e3});yield s.present(),this.calcColor(e.Zhi.Index)}))}calcColor(c){const t=null===c,i=t?"XX":new o.b(c).Zhi.Name,n=t?"XX":new o.b((c+6)%12).Zhi.Name,e=t?"XX":new o.b((13-c)%12).Zhi.Name;this.ShenSha.forEach(c=>{c.forEach(c=>{c.color=c.txt.includes(i)?"positive":c.txt.includes(n)?"error":c.txt.includes(e)?"warning":""})}),this.gualine.forEach(c=>{c.forEach(c=>{c.color=c.text.includes(i)&&!c.text.startsWith("\u5b50\u5b59")?"positive":c.text.includes(n)&&!c.text.startsWith("\u5b50\u5b59")?"error":c.text.includes(e)&&!c.text.startsWith("\u5b50\u5b59")?"warning":""})});const s=[this.Gua.Yue.Name,this.Gua.Ri.Name,this.Xunkong[0],this.Xunkong[1]];for(let a=0;a<4;a++)this.ColorRiYue[a]=s[a].includes(i)?a<2?"positive":"#4854e0":s[a].includes(n)?a<2?"error":"#cf3c4f":s[a].includes(e)?a<2?"warning":"#28ba62":""}ChangSymbol(){!1===this.smallSymbol?(this.config_s=Object(a.b)(this.config),this.config.shensha=4,this.config.shortname=!0,this.config.shensha=4):this.config=Object(a.b)(this.config_s),this.smallSymbol=!this.smallSymbol,this.Reflash(null)}initGua(){this.Titel="\u95ee\u5ff5\uff1a"+this.guaText.question,this.Gua=new s.a(this.guaText.time,this.guaText.ben,this.guaText.bian),this.GuaTime="\u8d77\u5366\u65f6\u95f4\uff1a"+("string"==typeof this.guaText.time?this.guaText.time:`${this.guaText.time[0]}\u6708 ${this.guaText.time[1]}\u65e5`).replace("00:00:00",""),this.Reflash(null)}initShensha(){const c=this.config.shensha;this.shensha=[];for(let t=0;t<this.Gua.ShenShas.length-1;t+=c){const i=[];for(let n=0;n<c;n++){if(n+t>=this.Gua.ShenShas.length-1)continue;const c=t+n===this.Gua.ShenShas.length-2,e=this.Gua.ShenShas[n+t];i.push({txt:`[${e.Name} - ${e.Result.join("")}]`,span:c?2:1,color:""})}this.shensha.push(i)}}calcGuaLine(){const c=['<img src="assets/svg/shaoyin32.svg"/>','<img src="assets/svg/shaoyan32.svg"/>','<img src="assets/svg/arrowX.svg"/>','<img src="assets/svg/arrowO.svg"/>'];let t=!1;this.gualine=[];for(let n=6;n>0;n--){const i=this.Gua.GetLine(n,this.config.shortname);t="string"==typeof i[1];const e=[];let s=0;const a=t?4:3,o=a+1,r=t?1:-1;for(let t=0;t<i.length;t++){const n="number"==typeof i[t]?c[i[t]%2]:i[t];if(s="number"==typeof i[t]?i[t]%2:s,""===n)switch(t){case r:case a:case o:e.push({text:"",color:""})}else if(">"===n&&t===o)e.push({text:c[0===s?2:3],color:""});else{let c=t===r?`<small>&nbsp;${n}&nbsp;</small>`:n.toString();c=t===a?`&nbsp;${c}`:c,e.push({text:c,color:""})}}this.gualine.push(e)}this.guachi=[],this.guachi.push({txt:this.Gua.Ben.GuaGong,span:t?2:3});let i=""!==this.Gua.Ben.Property?`(${this.Gua.Ben.Property})`:"";this.guachi.push({txt:`${this.Gua.Ben.Name}${i}`,span:t?4:3}),this.Gua.Ben.Index!==this.Gua.Bian.Index?(i=""!==this.Gua.Bian.Property?`(${this.Gua.Bian.Property})`:"",this.guachi.push({txt:`${this.Gua.Bian.Name}${i}`,span:2})):this.guachi.push({txt:"&nbsp;".repeat(5),span:2}),this.gualine.forEach(c=>{c.forEach(c=>{c.text.startsWith("<img")&&(c.size="svg")}),t||c.insert(1,{text:"&nbsp;".repeat(this.HasBianGua?1:5),color:"",size:""}),this.HasBianGua||(c.push({text:"&nbsp;",color:"",size:""}),c.push({text:"&nbsp;".repeat(25),color:"",size:""}))})}}return c.\u0275fac=function(t){return new(t||c)(r.Yb(e.hb),r.Yb(a.a))},c.\u0275cmp=r.Sb({type:c,selectors:[["app-guaview"]],inputs:{Config:"Config",GuaText:"GuaText"},decls:35,vars:45,consts:[[1,"ui","attached","segment",2,"margin-left","3px","max-width","500px"],[1,"ui","teal","ribbon","label"],[1,"ui","top","right","attached","icon","basic","label",3,"click"],[1,"cut","icon"],[3,"closeOthers"],[3,"isOpen"],["title",""],[1,"dropdown","icon"],["content",""],[1,"ui","unstackable","very","basic","table","collapsing","table-noline",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ui","unstackable","very","basic","table","compact","collapsing",3,"ngClass"],[3,"colSpan","ngClass"],["colspan","4"],["class","collapsing",3,"colSpan","innerHTML","click",4,"ngFor","ngForOf"],[3,"colSpan","ngClass",4,"ngFor","ngForOf"],[1,"collapsing",3,"colSpan","innerHTML","click"],["class","collapsing gua",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"collapsing","gua",3,"ngClass","click"],[3,"innerHTML",4,"ngIf"],["class","ui image",3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"ui","image",3,"innerHTML"]],template:function(c,t){1&c&&(r.dc(0,"div",0),r.dc(1,"div"),r.dc(2,"a",1),r.Jc(3),r.cc(),r.Jc(4),r.dc(5,"a",2),r.lc("click",(function(){return t.ChangSymbol()})),r.Zb(6,"i",3),r.cc(),r.cc(),r.dc(7,"sui-accordion",4),r.dc(8,"sui-accordion-panel",5),r.dc(9,"div",6),r.Zb(10,"i",7),r.Jc(11),r.cc(),r.dc(12,"div",8),r.dc(13,"p"),r.Jc(14),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(15,"table",9),r.Hc(16,p,2,1,"tr",10),r.cc(),r.dc(17,"table",11),r.dc(18,"thead"),r.dc(19,"tr"),r.dc(20,"td",12),r.Jc(21),r.cc(),r.dc(22,"td",12),r.Jc(23),r.cc(),r.dc(24,"td",13),r.Jc(25),r.dc(26,"span"),r.Jc(27),r.cc(),r.dc(28,"span"),r.Jc(29),r.cc(),r.Jc(30,") "),r.cc(),r.cc(),r.dc(31,"tr"),r.Hc(32,f,1,2,"td",14),r.cc(),r.cc(),r.dc(33,"tbody"),r.Hc(34,S,2,1,"tr",10),r.cc(),r.cc(),r.cc()),2&c&&(r.Nb(3),r.Lc(" ",t.GuaInText," "),r.Nb(1),r.Mc(" ",t.Gua.Yue.Name,"\u6708 ",t.Gua.Ri.Name,"\u65e5 "),r.Nb(3),r.vc("closeOthers",!1),r.Nb(1),r.vc("isOpen",!0),r.Nb(3),r.Lc(" ",t.Titel," "),r.Nb(3),r.Kc(t.GuaTime),r.Nb(1),r.vc("ngClass",r.xc(29,x,t.Compact)),r.Nb(1),r.vc("ngForOf",t.ShenSha),r.Nb(1),r.vc("ngClass",r.xc(31,x,t.Compact)),r.Nb(3),r.vc("colSpan",t.GuaChi[0].span)("ngClass",r.xc(33,u,"positive"===t.ColorRiYue[0]))("ngClass",r.xc(35,d,"error"===t.ColorRiYue[0]))("ngClass",r.xc(37,g,"warning"===t.ColorRiYue[0])),r.Nb(1),r.Lc("",t.Gua.Yue.Name,"\u6708"),r.Nb(1),r.vc("colSpan",t.GuaChi[1].span)("ngClass",r.xc(39,u,"positive"===t.ColorRiYue[1]))("ngClass",r.xc(41,d,"error"===t.ColorRiYue[1]))("ngClass",r.xc(43,g,"warning"===t.ColorRiYue[1])),r.Nb(1),r.Lc("",t.Gua.Ri.Name,"\u65e5"),r.Nb(2),r.Lc("(",t.smallSymbol?"":"\u65ec\u7a7a\uff1a"," "),r.Nb(1),r.Gc("color",t.ColorRiYue[2]),r.Nb(1),r.Kc(t.Xunkong[0]),r.Nb(1),r.Gc("color",t.ColorRiYue[3]),r.Nb(1),r.Kc(t.Xunkong[1]),r.Nb(3),r.vc("ngForOf",t.GuaChi),r.Nb(2),r.vc("ngForOf",t.GuaLine))},directives:[l.a,l.b,h.h,h.i,h.j],styles:[".guatb[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px}.guagrid[_ngcontent-%COMP%]{margin-top:5px;margin-left:0;margin-right:0;--ion-grid-width-lg:540px;--ion-grid-width-md:540px;--ion-grid-width-sm:540px;--ion-grid-width-xl:540px;--ion-grid-width-xs:100%}.debug[_ngcontent-%COMP%]{border-color:red;border-style:solid}.guayao[_ngcontent-%COMP%]{margin-top:5px;border-bottom:1px dashed grey}.table-noline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0!important;padding-top:0!important}.gua[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0;padding-right:0;text-align:left}table[_ngcontent-%COMP%]{padding:0;margin:0;background-color:#fff}td[_ngcontent-%COMP%]{padding-left:0;padding-right:0;border-collapse:collapse;text-align:left}"]}),c})()}}]);