(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{bZWr:function(e,i,o){"use strict";o.r(i);var t=o("ofXK"),n=o("3Pt+"),c=o("tyNb"),r=o("c7TG"),s=o("mrSG"),a=o("LTmD"),l=o("PKx9"),b=o("G6JS"),h=o("fXoL");function u(e,i){if(1&e){const e=h.ac();h.Zb(0,"ion-item"),h.Zb(1,"ion-label"),h.xc(2,"\u540d\u5b57\uff1a"),h.Yb(),h.Zb(3,"ion-input",11),h.hc("ngModelChange",(function(i){return h.rc(e),h.jc().SearchName=i})),h.Yb(),h.Yb()}if(2&e){const e=h.jc();h.Mb(3),h.oc("ngModel",e.SearchName)}}function d(e,i){if(1&e){const e=h.ac();h.Zb(0,"ion-chip",4),h.hc("click",(function(){h.rc(e);const o=i.$implicit;return h.jc(2).SearchRole=o.value})),h.Zb(1,"ion-avatar"),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-text",15),h.xc(4),h.Yb(),h.Yb()}if(2&e){const e=i.$implicit,o=h.jc(2);h.Mb(2),h.oc("src",e.icon,h.tc),h.Mb(1),h.oc("color",o.SearchRole===e.value?"success":"medium"),h.Mb(1),h.yc(e.name)}}function g(e,i){if(1&e&&(h.Zb(0,"ion-item"),h.Zb(1,"ion-label",12),h.wc(2,d,5,3,"ion-chip",13),h.Yb(),h.Yb()),2&e){const e=h.jc();h.Mb(2),h.oc("ngForOf",e.Roles)}}function f(e,i){if(1&e&&(h.Zb(0,"ion-chip"),h.Zb(1,"ion-avatar"),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-text"),h.xc(4),h.Yb(),h.Yb()),2&e){const e=i.$implicit;h.Mb(2),h.oc("src",e.icon,h.tc),h.Mb(2),h.yc(e.name)}}function m(e,i){if(1&e){const e=h.ac();h.Zb(0,"ion-item"),h.Zb(1,"ion-thumbnail",1),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-label",12),h.Zb(4,"ion-text",16),h.hc("click",(function(){h.rc(e);const o=i.$implicit;return h.jc().ShowUserInfo(o.id)})),h.xc(5),h.Yb(),h.wc(6,f,5,2,"ion-chip",10),h.Yb(),h.Yb()}if(2&e){const e=i.$implicit,o=h.jc();h.Mb(2),h.oc("src",e.avatar,h.tc),h.Mb(3),h.zc(" ",e.id," "),h.Mb(1),h.oc("ngForOf",o.GetRoles(e.roller))}}let p=(()=>{class e{constructor(e,i,o,t){this.settings=e,this.forumservice=i,this.modalCtrl=o,this.loadingController=t,this.SearchMode="name",this.SearchName="",this.SearchRole=4,this.Resultes=[]}ngOnInit(){}get Roles(){return this.settings.UserRolers(508)}Execute(){"name"===this.SearchMode&&""!==this.SearchName?this.SearchSingle(this.SearchName):this.SearchRoller(this.SearchRole)}SearchSingle(e){return Object(s.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(e).then(e=>{console.log("SearchSingle",e),e&&(this.Resultes=[e],this.initalUser())}).finally(()=>{this.closeLoading()})}))}SearchRoller(e){return Object(s.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(null,e).then(e=>{console.log("SearchRoller",e),e&&Array.isArray(e)&&(this.Resultes=e,this.initalUser())}).finally(()=>{this.closeLoading()})}))}ShowUserInfo(e){return Object(s.b)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:b.a,componentProps:{Uerid:e}});yield i.present(),yield i.onWillDismiss()}))}GetRoles(e){return this.settings.UserRolers(e)}initalUser(){this.Resultes.forEach(e=>{e.avatar&&""!==e.avatar||(e.avatar=this.settings.Avatar(e.gender))})}showLoading(){return Object(s.b)(this,void 0,void 0,(function*(){this.loadingView||(this.loadingView=yield this.loadingController.create({message:"\u6b63\u5728\u67e5\u627e...",duration:6e4})),yield this.loadingView.present()}))}closeLoading(){return Object(s.b)(this,void 0,void 0,(function*(){this.loadingView&&(yield this.loadingView.dismiss(),this.loadingView=null)}))}}return e.\u0275fac=function(i){return new(i||e)(h.Wb(a.a),h.Wb(l.a),h.Wb(r.cb),h.Wb(r.bb))},e.\u0275cmp=h.Qb({type:e,selectors:[["app-searchuser"]],decls:21,vars:4,consts:[["color","primary"],["slot","start"],["defaulthref","","text","\u8fd4\u56de"],["slot","end"],[3,"click"],["name","search"],[3,"ngModel","ngModelChange"],["value","name"],["value","role"],[4,"ngIf"],[4,"ngFor","ngForOf"],["placeholder","\u8f93\u5165\u7528\u6237\u540d\u5b57",3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],[3,"click",4,"ngFor","ngForOf"],[3,"src"],[3,"color"],["color","primary",3,"click"]],template:function(e,i){1&e&&(h.Zb(0,"ion-header"),h.Zb(1,"ion-toolbar",0),h.Zb(2,"ion-buttons",1),h.Xb(3,"ion-back-button",2),h.Yb(),h.Zb(4,"ion-title"),h.xc(5,"\u67e5\u627e\u7528\u6237"),h.Yb(),h.Yb(),h.Yb(),h.Zb(6,"ion-content"),h.Zb(7,"ion-item"),h.Zb(8,"ion-buttons",3),h.Zb(9,"ion-button",4),h.hc("click",(function(){return i.Execute()})),h.Xb(10,"ion-icon",5),h.xc(11," \u6267\u884c "),h.Yb(),h.Yb(),h.Zb(12,"ion-buttons",1),h.Zb(13,"ion-segment",6),h.hc("ngModelChange",(function(e){return i.SearchMode=e})),h.Zb(14,"ion-segment-button",7),h.xc(15,"\u6309\u540d\u5b57"),h.Yb(),h.Zb(16,"ion-segment-button",8),h.xc(17,"\u6309\u89d2\u8272"),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.wc(18,u,4,1,"ion-item",9),h.wc(19,g,3,1,"ion-item",9),h.wc(20,m,7,3,"ion-item",10),h.Yb()),2&e&&(h.Mb(13),h.oc("ngModel",i.SearchMode),h.Mb(5),h.oc("ngIf","name"===i.SearchMode),h.Mb(1),h.oc("ngIf","role"===i.SearchMode),h.Mb(1),h.oc("ngForOf",i.Resultes))},directives:[r.s,r.Y,r.k,r.g,r.h,r.W,r.o,r.w,r.j,r.t,r.N,r.hb,n.c,n.d,r.O,t.j,t.i,r.C,r.v,r.ib,r.m,r.f,r.T,r.V],styles:[""]}),e})();o.d(i,"SearchuserPageModule",(function(){return S}));const M=[{path:"",component:p}];let S=(()=>{class e{}return e.\u0275mod=h.Ub({type:e}),e.\u0275inj=h.Tb({factory:function(i){return new(i||e)},imports:[[t.b,n.a,r.Z,c.i.forChild(M)]]}),e})()}}]);