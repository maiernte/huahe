(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{bZWr:function(e,c,i){"use strict";i.r(c);var n=i("ofXK"),t=i("3Pt+"),o=i("tyNb"),s=i("c7TG"),r=i("mrSG"),a=i("LTmD"),l=i("PKx9"),d=i("G6JS"),h=i("fXoL");function u(e,c){if(1&e){const e=h.fc();h.ec(0,"ion-item"),h.ec(1,"ion-label"),h.Hc(2,"\u540d\u5b57\uff1a"),h.dc(),h.ec(3,"ion-input",11),h.mc("ngModelChange",(function(c){return h.Ac(e),h.pc().SearchName=c})),h.dc(),h.dc()}if(2&e){const e=h.pc();h.Nb(3),h.uc("ngModel",e.SearchName)}}function f(e,c){if(1&e){const e=h.fc();h.ec(0,"ion-chip",4),h.mc("click",(function(){h.Ac(e);const i=c.$implicit;return h.pc(2).SearchRole=i.value})),h.ec(1,"ion-avatar"),h.ac(2,"img",14),h.dc(),h.ec(3,"ion-text",15),h.Hc(4),h.dc(),h.dc()}if(2&e){const e=c.$implicit,i=h.pc(2);h.Nb(2),h.uc("src",e.icon,h.Cc),h.Nb(1),h.uc("color",i.SearchRole===e.value?"success":"medium"),h.Nb(1),h.Ic(e.name)}}function g(e,c){if(1&e&&(h.ec(0,"ion-item"),h.ec(1,"ion-label",12),h.Fc(2,f,5,3,"ion-chip",13),h.dc(),h.dc()),2&e){const e=h.pc();h.Nb(2),h.uc("ngForOf",e.Roles)}}function m(e,c){if(1&e&&(h.ec(0,"ion-chip"),h.ec(1,"ion-avatar"),h.ac(2,"img",14),h.dc(),h.ec(3,"ion-text"),h.Hc(4),h.dc(),h.dc()),2&e){const e=c.$implicit;h.Nb(2),h.uc("src",e.icon,h.Cc),h.Nb(2),h.Ic(e.name)}}function b(e,c){if(1&e){const e=h.fc();h.ec(0,"ion-item"),h.ec(1,"ion-thumbnail",1),h.ac(2,"img",14),h.dc(),h.ec(3,"ion-label",12),h.ec(4,"ion-text",16),h.mc("click",(function(){h.Ac(e);const i=c.$implicit;return h.pc().ShowUserInfo(i.id)})),h.Hc(5),h.dc(),h.Fc(6,m,5,2,"ion-chip",10),h.dc(),h.dc()}if(2&e){const e=c.$implicit,i=h.pc();h.Nb(2),h.uc("src",e.avatar,h.Cc),h.Nb(3),h.Jc(" ",e.id," "),h.Nb(1),h.uc("ngForOf",i.GetRoles(e.roller))}}let p=(()=>{class e{constructor(e,c,i,n){this.settings=e,this.forumservice=c,this.modalCtrl=i,this.loadingController=n,this.SearchMode="name",this.SearchName="",this.SearchRole=4,this.Resultes=[]}ngOnInit(){}get Roles(){return this.settings.UserRolers(508)}Execute(){"name"===this.SearchMode&&""!==this.SearchName?this.SearchSingle(this.SearchName):this.SearchRoller(this.SearchRole)}SearchSingle(e){return Object(r.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(e).then(e=>{console.log("SearchSingle",e),e&&(this.Resultes=[e],this.initalUser())}).finally(()=>{this.closeLoading()})}))}SearchRoller(e){return Object(r.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(null,e).then(e=>{console.log("SearchRoller",e),e&&Array.isArray(e)&&(this.Resultes=e,this.initalUser())}).finally(()=>{this.closeLoading()})}))}ShowUserInfo(e){return Object(r.b)(this,void 0,void 0,(function*(){const c=yield this.modalCtrl.create({component:d.a,componentProps:{Uerid:e}});yield c.present(),yield c.onWillDismiss()}))}GetRoles(e){return this.settings.UserRolers(e)}initalUser(){this.Resultes.forEach(e=>{e.avatar&&""!==e.avatar||(e.avatar=this.settings.Avatar(e.gender))})}showLoading(){return Object(r.b)(this,void 0,void 0,(function*(){this.loadingView||(this.loadingView=yield this.loadingController.create({message:"\u6b63\u5728\u67e5\u627e...",duration:6e4})),yield this.loadingView.present()}))}closeLoading(){return Object(r.b)(this,void 0,void 0,(function*(){this.loadingView&&(yield this.loadingView.dismiss(),this.loadingView=null)}))}}return e.\u0275fac=function(c){return new(c||e)(h.Zb(a.a),h.Zb(l.a),h.Zb(s.fb),h.Zb(s.eb))},e.\u0275cmp=h.Tb({type:e,selectors:[["app-searchuser"]],decls:21,vars:4,consts:[["color","primary"],["slot","start"],["defaulthref","","text","\u8fd4\u56de"],["slot","end"],[3,"click"],["name","search"],[3,"ngModel","ngModelChange"],["value","name"],["value","role"],[4,"ngIf"],[4,"ngFor","ngForOf"],["placeholder","\u8f93\u5165\u7528\u6237\u540d\u5b57",3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],[3,"click",4,"ngFor","ngForOf"],[3,"src"],[3,"color"],["color","primary",3,"click"]],template:function(e,c){1&e&&(h.ec(0,"ion-header"),h.ec(1,"ion-toolbar",0),h.ec(2,"ion-buttons",1),h.ac(3,"ion-back-button",2),h.dc(),h.ec(4,"ion-title"),h.Hc(5,"\u67e5\u627e\u7528\u6237"),h.dc(),h.dc(),h.dc(),h.ec(6,"ion-content"),h.ec(7,"ion-item"),h.ec(8,"ion-buttons",3),h.ec(9,"ion-button",4),h.mc("click",(function(){return c.Execute()})),h.ac(10,"ion-icon",5),h.Hc(11," \u6267\u884c "),h.dc(),h.dc(),h.ec(12,"ion-buttons",1),h.ec(13,"ion-segment",6),h.mc("ngModelChange",(function(e){return c.SearchMode=e})),h.ec(14,"ion-segment-button",7),h.Hc(15,"\u6309\u540d\u5b57"),h.dc(),h.ec(16,"ion-segment-button",8),h.Hc(17,"\u6309\u89d2\u8272"),h.dc(),h.dc(),h.dc(),h.dc(),h.Fc(18,u,4,1,"ion-item",9),h.Fc(19,g,3,1,"ion-item",9),h.Fc(20,b,7,3,"ion-item",10),h.dc()),2&e&&(h.Nb(13),h.uc("ngModel",c.SearchMode),h.Nb(5),h.uc("ngIf","name"===c.SearchMode),h.Nb(1),h.uc("ngIf","role"===c.SearchMode),h.Nb(1),h.uc("ngForOf",c.Resultes))},directives:[s.t,s.bb,s.j,s.f,s.g,s.Z,s.n,s.x,s.i,s.u,s.Q,s.kb,t.f,t.g,s.R,n.j,n.i,s.D,s.w,s.lb,s.l,s.e,s.W,s.Y],styles:[""]}),e})();i.d(c,"SearchuserPageModule",(function(){return v}));const S=[{path:"",component:p}];let v=(()=>{class e{}return e.\u0275mod=h.Xb({type:e}),e.\u0275inj=h.Wb({factory:function(c){return new(c||e)},imports:[[n.b,t.c,s.cb,o.i.forChild(S)]]}),e})()}}]);