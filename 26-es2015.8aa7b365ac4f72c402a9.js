(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"Y/6B":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("3Pt+"),s=n("tyNb"),r=n("c7TG"),o=n("mrSG"),h=n("LvB5"),u=n("B8lH"),l=n("LTmD"),c=n("L99X"),f=(n("0eVs"),n("ylIl")),b=n("mo90"),m=n("fXoL");function g(t,e){if(1&t&&m.Xb(0,"app-guaview",11),2&t){const t=m.jc();m.oc("Config",t.Config)("GuaText",t.Gua)}}let p=(()=>{class t{constructor(t,e,n){this.modalController=t,this.setting=e,this.dbservice=n,this.smallSymbol=!1}get Config(){return this.config||(this.config=Object(l.b)(this.setting.Gua)),this.config}set Config(t){t&&(this.config=t)}get Gua(){return this.gua}get HasGua(){return!!this.Gua}ngOnInit(){}SaveGua(){return Object(o.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:b.a,componentProps:{Titel:"\u9009\u62e9\u65b0\u76ee\u5f55",SelectDocument:!0,NodeID:""}});yield t.present();const{data:e}=yield t.onWillDismiss();console.log("select node",e),e&&e.nodeid&&this.dbservice.SaveRecord(e.nodeid,this.gua.question,8,JSON.stringify(this.gua))}))}showPaiguaModal(){return Object(o.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:h.a});yield t.present();const{data:e}=yield t.onWillDismiss();this.gua=e.result?e.result:null}))}showSettingModal(){return Object(o.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:u.a,componentProps:{SettingComponent:"gua",Config:Object(l.b)(this.Config)}});yield t.present();const{data:e}=yield t.onWillDismiss();Object(l.c)({},e.result)||!Object(l.c)(this.Config,e.result)&&(this.Config=Object(l.b)(e.result),this.guaview&&this.guaview.Reflash(this.Config))}))}ChangSymbol(){const t=Object(l.b)(this.config);!1===this.smallSymbol&&(t.shensha=4,t.symbol=1),this.smallSymbol=!this.smallSymbol,this.guaview.Reflash(t)}}return t.\u0275fac=function(e){return new(e||t)(m.Wb(r.W),m.Wb(l.a),m.Wb(c.a))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-paigua"]],viewQuery:function(t,e){var n;1&t&&m.Ac(f.a,!0),2&t&&m.qc(n=m.ic())&&(e.guaview=n.first)},decls:17,vars:3,consts:[["slot","start"],[3,"hidden","click"],["name","md-options"],["slot","end"],[3,"click"],["slot","icon-only","name","add-circle-outline"],["slot","icon-only","name","settings"],[3,"disabled","click"],["slot","icon-only","name","save"],[1,"ion-padding"],[3,"Config","GuaText",4,"ngIf"],[3,"Config","GuaText"]],template:function(t,e){1&t&&(m.Zb(0,"ion-header"),m.Zb(1,"ion-toolbar"),m.Zb(2,"ion-buttons",0),m.Xb(3,"ion-menu-button"),m.Zb(4,"ion-button",1),m.hc("click",(function(t){return e.ChangSymbol()})),m.Xb(5,"ion-icon",2),m.Yb(),m.Yb(),m.Zb(6,"ion-title"),m.xc(7,"\u516d\u723b"),m.Yb(),m.Zb(8,"ion-buttons",3),m.Zb(9,"ion-button",4),m.hc("click",(function(t){return e.showPaiguaModal()})),m.Xb(10,"ion-icon",5),m.Yb(),m.Zb(11,"ion-button",4),m.hc("click",(function(t){return e.showSettingModal()})),m.Xb(12,"ion-icon",6),m.Yb(),m.Zb(13,"ion-button",7),m.hc("click",(function(t){return e.SaveGua()})),m.Xb(14,"ion-icon",8),m.Yb(),m.Yb(),m.Yb(),m.Yb(),m.Zb(15,"ion-content",9),m.wc(16,g,1,2,"app-guaview",10),m.Yb()),2&t&&(m.Mb(4),m.oc("hidden",!e.HasGua),m.Mb(9),m.oc("disabled",!e.HasGua),m.Mb(3),m.oc("ngIf",e.HasGua))},directives:[r.p,r.T,r.i,r.y,r.h,r.q,r.R,r.l,i.j,f.a],styles:[""]}),t})(),d=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[i.b,a.a,r.U]]}),t})();var N=n("KPWP"),w=n("n7QD");n.d(e,"PaiguaPageModule",(function(){return P}));const y=[{path:"",component:p}];let P=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(e){return new(e||t)},imports:[[d,N.a,w.a,i.b,a.a,r.U,s.i.forChild(y)]]}),t})()},"uq+3":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("2QJI"),a=n("Y6BA");function s(t){return t%12%4}function r(t){return t%10}function o(t){return Math.floor((t+1)%12/3)}function h(t){return(t%12-1+12)%12}var u=new Array;class l{constructor(t,e){this.name=t,this.ganzhi=e,u.length>0||(u.push({Name:"\u5c06\u661f",Pattern:[0,9,6,3],Fetch:"\u4e09\u5408"}),u.push({Name:"\u534e\u76d6",Pattern:[4,1,10,7],Fetch:"\u4e09\u5408"}),u.push({Name:"\u9a7f\u9a6c",Pattern:[2,11,8,5],Fetch:"\u4e09\u5408"}),u.push({Name:"\u8c0b\u661f",Pattern:[10,7,4,1],Fetch:"\u4e09\u5408"}),u.push({Name:"\u6843\u82b1",Pattern:[9,6,3,0],Fetch:"\u4e09\u5408"}),u.push({Name:"\u707e\u715e",Pattern:[6,3,0,9],Fetch:"\u4e09\u5408"}),u.push({Name:"\u52ab\u715e",Pattern:[5,2,11,8],Fetch:"\u4e09\u5408"}),u.push({Name:"\u7984\u795e",Pattern:[2,3,5,6,5,6,8,9,11,0],Fetch:"\u5e72"}),u.push({Name:"\u7f8a\u5203",Pattern:[3,2,6,5,6,5,9,8,0,11],Fetch:"\u5e72"}),u.push({Name:"\u6587\u660c",Pattern:[5,6,8,9,8,9,11,0,2,3],Fetch:"\u5e72"}),u.push({Name:"\u5b66\u5802",Pattern:[11,11,2,2,8,8,5,5,8,8],Fetch:"\u5e72"}),u.push({Name:"\u8d35\u4eba",Pattern:[[1,7],[8,0],[11,9],[11,9],[1,7],[8,0],[2,6],[2,6],[3,5],[3,5]],Fetch:"\u8d35\u4eba"}),u.push({Name:"\u5929\u559c",Pattern:[7,10,1,4],Fetch:"\u4e09\u4f1a"}),u.push({Name:"\u5929\u533b",Pattern:null,Fetch:"\u5929\u533b"}),u.push({Name:"\u65ec\u7a7a",Pattern:null,Fetch:"\u65ec\u7a7a"}),u.push({Name:"\u9b41\u7f61",Pattern:null,Fetch:null}),u.push({Name:"\u56db\u5e9f",Pattern:null,Fetch:null}),u.push({Name:"\u5b64\u8fb0\u5be1\u5bbf",Pattern:null,Fetch:null}),u.push({Name:"\u5929\u7f57\u5730\u7f51",Pattern:null,Fetch:null}),u.push({Name:"\u9634\u5dee\u9633\u9519",Pattern:null,Fetch:null}));let n=u.filter(e=>e.Name==t);this.pattern=n[0].Pattern,this.fetchName=n[0].Fetch}get Name(){return this.name}get Result(){return this.result?this.result:(this.result="\u9b41\u7f61"==this.Name?this.getKuiGang():"\u56db\u5e9f"==this.Name?this.getSiFei(this.ganzhi[1]):"\u5b64\u8fb0\u5be1\u5bbf"==this.Name?this.getGuChengGuaShu(this.ganzhi[0]):"\u9634\u5dee\u9633\u9519"==this.Name?this.getYinChaYangCuo():"\u5929\u7f57\u5730\u7f51"==this.Name?this.getTianLuoDiWang("m"==this.Gender):this.getNormalResult(),this.result.filter(a.onlyUnique))}Is(t){if(this.Result.length>0){for(let e of this.result)if(e==t.Zhi.Name)return!0}else{if("\u5929\u7f57\u5730\u7f51"==this.Name)return this.IsTianLuoDiWang(t.Index);{let e="\u5b64\u8fb0\u5be1\u5bbf"==this.Name?t.Index%12:t.Index;for(let t of this.pattern)if(t==e)return!0}}return!1}normalFetch(t){if("\u4e09\u5408"==this.fetchName)return[this.pattern[s(t)]];if("\u5e72"==this.fetchName)return[this.pattern[r(t)]];if("\u4e09\u4f1a"==this.fetchName)return[this.pattern[o(t)]];if("\u5929\u533b"==this.fetchName)return[h(t)];if("\u65ec\u7a7a"==this.fetchName)return function(t){let e=10-2*Math.floor(t/10);return[e,e+1]}(t);if("\u8d35\u4eba"==this.fetchName){let e=this.pattern[r(t)];return[e[0],e[1]]}}getNormalResult(){let t=new Array;for(let n of this.ganzhi)this.fetchName&&(t=t.concat(this.normalFetch(n)));let e=new Array;for(let n of t){let t=Object(i.c)(n);e.push(t.Name)}return 2==e.length&&e[0]==e[1]?[e[0]]:e}getKuiGang(){let t=[new i.b("\u5e9a\u620c"),new i.b("\u5e9a\u8fb0"),new i.b("\u620a\u620c"),new i.b("\u58ec\u8fb0")];this.pattern=t.map(t=>t.Index);for(let e of this.ganzhi)for(let t of this.pattern)if(e==t)return["\u221a"];return[]}getSiFei(t){let e=[];switch(t%12){case 2:case 3:e=[new i.b("\u5e9a\u7533"),new i.b("\u8f9b\u9149")];break;case 5:case 6:e=[new i.b("\u58ec\u5b50"),new i.b("\u7678\u4ea5")];break;case 8:case 9:e=[new i.b("\u7532\u5bc5"),new i.b("\u4e59\u536f")];break;case 0:case 11:e=[new i.b("\u4e19\u5348"),new i.b("\u4e01\u5df3")]}this.pattern=e.map(t=>t.Index);for(let n of this.ganzhi)for(let t of this.pattern)if(n==t)return["\u221a"];return[]}getGuChengGuaShu(t){switch(Math.floor((t+1)%12/3)){case 0:this.pattern=[2,10];break;case 1:this.pattern=[5,1];break;case 2:this.pattern=[8,4];break;case 3:this.pattern=[11,7]}for(let e of this.ganzhi)for(let t of this.pattern)if(e%12==t)return["\u221a"];return[]}getYinChaYangCuo(){this.pattern=["\u4e19\u5b50","\u4e19\u5348","\u4e01\u4e11","\u4e01\u672a","\u8f9b\u536f","\u8f9b\u9149","\u58ec\u8fb0","\u58ec\u620c","\u7678\u5df3","\u7678\u4ea5","\u620a\u5bc5","\u620a\u7533"].map(t=>new i.b(t).Index);for(let t of this.ganzhi)for(let e of this.pattern)if(t==e)return["\u221a"];return[]}getTianLuoDiWang(t){let e=0;this.pattern=t?[4,5]:[10,11];for(let n of this.ganzhi){let t=n%12;for(let n=0;n<2;n++)this.pattern[n]==t&&(e|=1<<n)}return 3===e?["\u221a"]:[]}IsTianLuoDiWang(t){t%=12;let e=0;for(let n of this.ganzhi){let i=n%12;for(let n=0;n<2;n++)this.pattern[n]==i&&(e|=1<<n),this.pattern[n]==t&&(e|=1<<n)}return 3===e}}}}]);