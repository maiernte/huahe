(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{bZWr:function(i,e,t){"use strict";t.r(e);var n=t("ofXK"),o=t("3Pt+"),c=t("tyNb"),r=t("c7TG"),s=t("mrSG"),a=t("LTmD"),l=t("PKx9"),b=t("G6JS"),h=t("fXoL");function u(i,e){if(1&i){const i=h.ac();h.Zb(0,"ion-item"),h.Zb(1,"ion-label"),h.xc(2,"\u540d\u5b57\uff1a"),h.Yb(),h.Zb(3,"ion-input",11),h.hc("ngModelChange",(function(e){return h.rc(i),h.jc().SearchName=e})),h.Yb(),h.Yb()}if(2&i){const i=h.jc();h.Mb(3),h.oc("ngModel",i.SearchName)}}function d(i,e){if(1&i){const i=h.ac();h.Zb(0,"ion-chip",4),h.hc("click",(function(){h.rc(i);const t=e.$implicit;return h.jc(2).SearchRole=t.value})),h.Zb(1,"ion-avatar"),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-text",15),h.xc(4),h.Yb(),h.Yb()}if(2&i){const i=e.$implicit,t=h.jc(2);h.Mb(2),h.oc("src",i.icon,h.tc),h.Mb(1),h.oc("color",t.SearchRole===i.value?"success":"medium"),h.Mb(1),h.yc(i.name)}}function f(i,e){if(1&i&&(h.Zb(0,"ion-item"),h.Zb(1,"ion-label",12),h.wc(2,d,5,3,"ion-chip",13),h.Yb(),h.Yb()),2&i){const i=h.jc();h.Mb(2),h.oc("ngForOf",i.Roles)}}function g(i,e){if(1&i&&(h.Zb(0,"ion-chip"),h.Zb(1,"ion-avatar"),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-text"),h.xc(4),h.Yb(),h.Yb()),2&i){const i=e.$implicit;h.Mb(2),h.oc("src",i.icon,h.tc),h.Mb(2),h.yc(i.name)}}function m(i,e){if(1&i){const i=h.ac();h.Zb(0,"ion-item"),h.Zb(1,"ion-thumbnail",1),h.Xb(2,"img",14),h.Yb(),h.Zb(3,"ion-label",12),h.Zb(4,"ion-text",16),h.hc("click",(function(){h.rc(i);const t=e.$implicit;return h.jc().ShowUserInfo(t.id)})),h.xc(5),h.Yb(),h.wc(6,g,5,2,"ion-chip",10),h.Yb(),h.Yb()}if(2&i){const i=e.$implicit,t=h.jc();h.Mb(2),h.oc("src",i.avatar,h.tc),h.Mb(3),h.zc(" ",i.id," "),h.Mb(1),h.oc("ngForOf",t.GetRoles(i.roller))}}let p=(()=>{class i{constructor(i,e,t,n){this.settings=i,this.forumservice=e,this.modalCtrl=t,this.loadingController=n,this.SearchMode="name",this.SearchName="",this.SearchRole=4,this.Resultes=[]}ngOnInit(){}get Roles(){return this.settings.UserRolers(508)}Execute(){"name"===this.SearchMode&&""!==this.SearchName?this.SearchSingle(this.SearchName):this.SearchRoller(this.SearchRole)}SearchSingle(i){return Object(s.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(i).then(i=>{i&&(this.Resultes=[i],this.initalUser())}).finally(()=>{this.closeLoading()})}))}SearchRoller(i){return Object(s.b)(this,void 0,void 0,(function*(){yield this.showLoading(),this.forumservice.GetUserInfo(null,i).then(i=>{i&&Array.isArray(i)&&(this.Resultes=i,this.initalUser())}).finally(()=>{this.closeLoading()})}))}ShowUserInfo(i){return Object(s.b)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:b.a,componentProps:{Uerid:i}});yield e.present(),yield e.onWillDismiss()}))}GetRoles(i){return this.settings.UserRolers(i)}initalUser(){this.Resultes.forEach(i=>{i.avatar&&""!==i.avatar||(i.avatar=this.settings.Avatar(i.gender))})}showLoading(){return Object(s.b)(this,void 0,void 0,(function*(){this.loadingView||(this.loadingView=yield this.loadingController.create({message:"\u6b63\u5728\u67e5\u627e...",duration:6e4})),yield this.loadingView.present()}))}closeLoading(){return Object(s.b)(this,void 0,void 0,(function*(){this.loadingView&&(yield this.loadingView.dismiss(),this.loadingView=null)}))}}return i.\u0275fac=function(e){return new(e||i)(h.Wb(a.a),h.Wb(l.a),h.Wb(r.cb),h.Wb(r.bb))},i.\u0275cmp=h.Qb({type:i,selectors:[["app-searchuser"]],decls:21,vars:4,consts:[["color","primary"],["slot","start"],["defaulthref","","text","\u8fd4\u56de"],["slot","end"],[3,"click"],["name","search"],[3,"ngModel","ngModelChange"],["value","name"],["value","role"],[4,"ngIf"],[4,"ngFor","ngForOf"],["placeholder","\u8f93\u5165\u7528\u6237\u540d\u5b57",3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],[3,"click",4,"ngFor","ngForOf"],[3,"src"],[3,"color"],["color","primary",3,"click"]],template:function(i,e){1&i&&(h.Zb(0,"ion-header"),h.Zb(1,"ion-toolbar",0),h.Zb(2,"ion-buttons",1),h.Xb(3,"ion-back-button",2),h.Yb(),h.Zb(4,"ion-title"),h.xc(5,"\u67e5\u627e\u7528\u6237"),h.Yb(),h.Yb(),h.Yb(),h.Zb(6,"ion-content"),h.Zb(7,"ion-item"),h.Zb(8,"ion-buttons",3),h.Zb(9,"ion-button",4),h.hc("click",(function(){return e.Execute()})),h.Xb(10,"ion-icon",5),h.xc(11," \u6267\u884c "),h.Yb(),h.Yb(),h.Zb(12,"ion-buttons",1),h.Zb(13,"ion-segment",6),h.hc("ngModelChange",(function(i){return e.SearchMode=i})),h.Zb(14,"ion-segment-button",7),h.xc(15,"\u6309\u540d\u5b57"),h.Yb(),h.Zb(16,"ion-segment-button",8),h.xc(17,"\u6309\u89d2\u8272"),h.Yb(),h.Yb(),h.Yb(),h.Yb(),h.wc(18,u,4,1,"ion-item",9),h.wc(19,f,3,1,"ion-item",9),h.wc(20,m,7,3,"ion-item",10),h.Yb()),2&i&&(h.Mb(13),h.oc("ngModel",e.SearchMode),h.Mb(5),h.oc("ngIf","name"===e.SearchMode),h.Mb(1),h.oc("ngIf","role"===e.SearchMode),h.Mb(1),h.oc("ngForOf",e.Resultes))},directives:[r.s,r.Y,r.k,r.g,r.h,r.W,r.o,r.w,r.j,r.t,r.N,r.hb,o.c,o.d,r.O,n.j,n.i,r.C,r.v,r.ib,r.m,r.f,r.T,r.V],styles:[""]}),i})();t.d(e,"SearchuserPageModule",(function(){return Z}));const M=[{path:"",component:p}];let Z=(()=>{class i{}return i.\u0275mod=h.Ub({type:i}),i.\u0275inj=h.Tb({factory:function(e){return new(e||i)},imports:[[n.b,o.a,r.Z,c.i.forChild(M)]]}),i})()}}]);